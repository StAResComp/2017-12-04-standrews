---
title: 'Programming in R: Part One'
author: "Leighton Pritchard"
date: "5/12/2017"
output:
  ioslides_presentation:
    css: ./includes/custom.css
    font-family: 'Helvetica'
    widescreen: True
    mathjax: local
    self_contained: false
# runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Etherpad

<div class="attention">
Please do take notes on the course `etherpad`:
</div>

[http://pad.software-carpentry.org/2017-12-04-standrews](http://pad.software-carpentry.org/2017-12-04-standrews)

<div class="highlight">
* **Communal notes**: share your understanding, and benefit from others
* **Ask questions**: get detailed answers with links and examples
* **A record/reference for after the course**
</div>


# 01. Introduction to <br />`R` and `RStudio`


## Learning Objectives

* Understand what `R` is
* Understand what `RStudio` is
* Understand why `R` is different from something like `Excel`


## What is `R`?

* `R` is a programming language
* `R` is the software that interprets programs written in the `R` programming language

<div class="highlight">
* **Have you used `R` before?**
</div>

> * `R` is free (commercial support can be bought)
> * `R` is widely-used and *interdisciplinary* (sciences, humanities, engineering, etc.)
> * `R` has many excellent packages for statistics and data analysis, visualisation and graphics
> * `R` has an international, friendly user community

<div class="references">
<p>RStudio community support: [https://community.rstudio.com/](https://community.rstudio.com/)</p>
<p>Stack Overflow: [https://stackoverflow.com/](https://stackoverflow.com/)</p>
</div>


## "But I already know `Excel`…"

<div class="highlight">
* `Excel` is great for many things, but `R` is great for reproducibility…
</div>

<center>
<img src="images/dt160107.gif" width="80%" />
</center>

> * ***Separates data from analysis***
> * Not point-and-click: *every step is explicit and transparent*
> * Easy to share, adapt, reuse, publish analyses with new/modified data (GitHub)
> * `R` can be run on supercomputers…

    
<div class="references">
* Mike Croucher's MLPM talk: [https://mikecroucher.github.io/MLPM_talk/](https://mikecroucher.github.io/MLPM_talk/)
</div>


## What is `RStudio`?

* `RStudio` is an *integrated development environment* (IDE) - all platforms

<center>
<img src="images/rstudio_window.png" width="50%" />
<img src="images/RStudio-Screenshot.png" width="40%" />
</center>

<div class="highlight">
* Interaction with `R` (console/'scratchpad')
* Script/code editor
* Graphics/visualisation
* Project management (`git` integration)
</div>


# 02. Getting to know `RStudio`


## Learning Objectives

* Familiarity with the `RStudio` IDE
* Introduce `R` syntax
* Learn good project management practices
* Set up a working directory with version control (`git`) in `RStudio`


## `RStudio` overview - Interactive Demo

<center>
<img src="images/rstudio-start-view.png" width="75%" />
</center>

## Challenge 01 (5min)

* **Try out some of your own calculations in the interactive console**

```{r}
2 ** 16
15 %% 4
15 %/% 4
```

<img src="images/red_green_sticky.png" width="100%" />

## Variables

<div class="highlight">
**Variables** are like *named boxes*
</div>

* An item of data goes in the box (called `Name`)
* When we refer the box (*variable*) with a name, we really mean *what's in the box*

<center>
<img src="images/boxes_variables_arrow.png" width="45%" />
</center>


## Variables - Interactive Demo

```{r}
name <- "Samia"
name
x <- 1 / 40
x
x ^ 2
log(x)
```


## Removing Variables

To remove variables, use `rm()`

```{r}
x <- 1
ls()
rm(x, name)
ls()
```

To remove all variables use the broom in the `Environment` tab (`Rstudio`), or:

```{r}
rm(list=ls())
```


## Challenge 02 (5min)

What will be the value of each variable after each statement in the following program?

```{r, echo=TRUE}
mass <- 47.5
age <- 122
mass <- mass * 2.3
age <- age - 20
```

<img src="images/red_green_sticky.png" width="100%" />


## Good Project Management Practices

<div class="highlight">
**No single 'right way' - only good principles**
</div>

* Use a single working directory per project/analysis
    - easier to move, share, and find files
    - use *relative paths* to locate files
* Treat raw data as read-only
    * keep in separate subfolder (`data`)?
* Clean data ready for work
    * keep cleaned/modified data in separate folder?
* Consider output generated by analysis to be disposable
    * can be regenerated by running analysis/code
    * don't place under version control

<div class="references">
Good Enough Practices in Scientific Computing (2017) Wilson *et al.* [http://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005510](http://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005510)
</class>

## Example Directory Structure

<center>
<img src="images/working-directory-structure.png" width="100%" />
</center>


## Project Management in `RStudio`

* `RStudio` tries to help you manage your projects
    * `R Project` concept - files and subdirectory structure
    * `git` integration
    * switching between multiple projects within `RStudio`
    * stores project history
    
<div class="highlight">
**Let's create a project in `RStudio`**

Using `git` for version control.
</div>

<center>
<div class="attention">
**INTERACTIVE DEMO**
</div>
</center>

<img src="images/red_green_sticky.png" width="100%" />

<div class="references">
`RStudio` projects: [https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)
</div>


## Working in `RStudio`

<div class="highlight">
We can write code in several ways in `RStudio`
</div>

* At the console (you've done this)
* In a script
* As an interactive notebook
* As a markdown file
* As a Shiny app

We're going to create a new dataset and `R` script.

* Putting code in a script makes it easier to modify, share and run

<center>
<div class="attention">
**INTERACTIVE DEMO**
</div>
</center>


# 03. A First Analysis in `RStudio`


## Learning Objectives

* Load data into an `R` project
* Produce summary statistics of data
* Extract subsets of data
* Basic plotting in `R` (*base graphics*)


# 04. Data Types and <br />Structures in `R`


## Learning Objectives

* Basic data types in `R`
* Common data structures in `R`
* How to find out the type/structure of `R` data
* Understand how `R`'s data types and structures relate to your own data


## Data Types and Structures in `R`

* `R` is mostly used for data analysis
* `R` has special *types* and *structures* to help you work with data
* Much of the focus is on tabular data (*data frames*) 

<center>
<div class="attention">
**INTERACTIVE DEMO**
</div>
</center>

<div class="highlight">
Understanding data types, their uses, and how they relate to your own data is key to successful analysis with `R`

(it's not just about programming)
</div>

## What Data Types Do You Expect?

<center>
<div class="attention">
**What data types would you expect to see?**

What examples of data types can you think of from your own experience?
</div>
</center>

## Data Types in `R`

* Data *types* in `R` are *atomic*
    * All data is one of these types
    * All data *structures* are built from these
    
<div class="highlight">
1. **logical**: `TRUE`, `FALSE`
2. **numeric**:
    * **integer**: `3`, `2L`, `123456`
    * **double** (*decimal*): `3.0`, `-23.45`, `pi`
3. **complex**: `3+0i`, `1+4i`
4. **character** (*text*): `"a"`, `'SWC'`, `"This is not a string"`
5. **raw**: binary data
</div>

<center>
<div class="attention">
**INTERACTIVE DEMO**
</div>
</center>


## Challenge 03 (5min)

Create examples of data with the following characteristics:

<div class="highlight">
* name: `answer`, type: `logical`
* name: `height`, type: `numeric`
* name: `dog_name`, type: `character`
</div>

For each variable, test that it has the data type you intended

<img src="images/red_green_sticky.png" width="100%" />


## Five Common `R` Data Structures

* `vector`
* `factor`
* `list`
* `matrix`
* `data.frame`

<center>
<div class="attention">
**INTERACTIVE DEMO**
</div>
</center>


## Challenge 04 (5min)

Vectors are *atomic*: they can contain only a single data *type*

What data type are the following vectors (`xx`)?

```R
xx <- c(1.7, "a")
xx <- c(TRUE, 2)
xx <- c("a", TRUE)
```

<div class="highlight">
Options: `logical`, `integer`, `numeric`, `character`
</div>

<img src="images/red_green_sticky.png" width="100%" />


## Coercion

* *Coercion* means changing data from one type to another
* `R` will perform *implicit coercion* on vectors to make them atomic

<div class="highlight">
`logical` $\rightarrow$ `integer` $\rightarrow$ `double` $\rightarrow$ `complex` $\rightarrow$ `character`
</div>

<center>
<div class="attention">
**If there are formatting problems with your data, you might not have the type you expect when you import into `R`**
</div>
</center>

* Manual coercion with `as.<type_name>()`

<center>
<div class="attention">
**INTERACTIVE DEMO**
</div>
</center>