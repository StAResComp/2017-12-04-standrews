<h1 id="notes.md---r-lesson"><code>NOTES.md</code> - <code>R</code> lesson</h1>
<p>These notes are for the tutor on day one of the two-day <code>R</code> Software Carpentry course, taught 5th December 2017 at the University of St Andrews.</p>
<h1 id="things-to-remember"><strong>THINGS TO REMEMBER</strong></h1>
<p>To clear a console environment in <code>R</code>:</p>
<pre class="sourceCode r" id="cb1"><code class="sourceCode r"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</div></code></pre>
<h1 id="start-the-slides">Start the slides</h1>
<h2 id="title">TITLE</h2>
<ul>
<li>Programming in <code>R</code>: Part One</li>
</ul>
<h2 id="etherpad">ETHERPAD</h2>
<ul>
<li>Please use the Etherpad for the course</li>
</ul>
<h2 id="learning-objectives">LEARNING OBJECTIVES</h2>
<ul>
<li>We’re being <strong>QUITE AMBITIOUS</strong>, and covering a few things, but we <strong>HAVE TWO SESSIONS</strong>, so should be OK</li>
<li>We’ll be covering the fundamentals of <code>R</code> and <code>RStudio</code> - how to <strong>GET AROUND <code>R</code> AND WHAT <code>RStudio</code> CAN DO</strong></li>
<li>You’ll come away with fundamental knowledge applicable to <strong>PROGRAMMING IN ANY LANGUAGE</strong></li>
<li>We’ll be learning some of the best practices for writing and organising your code (<strong>FOLLOWING ON FROM GIT</strong>) and for reproducible computing</li>
<li>Finally, we’ll be going through how to use these skills to be <strong>MORE EFFECTIVE WITH DATA ANALYSIS</strong> in <code>R</code></li>
</ul>
<h2 id="section-01-introduction-to-r-and-rstudio">SECTION 01: Introduction to <code>R</code> and <code>RStudio</code></h2>
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>We’re going to talk in general terms about <strong>WHAT <code>R</code> and <code>RSTUDIO</code> are</strong>.</li>
<li>We’re also going to discuss <strong>WHAT MAKES THEM DIFFERENT FROM SOME OTHER TOOLS</strong> you might already use for similar tasks, like <code>Excel</code></li>
</ul>
<hr />
<p><strong>SLIDE: What is <code>R</code>?</strong></p>
<ul>
<li><code>R</code> is a <strong>PROGRAMMING LANGUAGE</strong>, and the <strong>SOFTWARE</strong> that runs programs written in that language.</li>
<li><code>R</code> is <strong>AVAILABLE ON ALL PLATFORMS</strong></li>
<li><p>This can sometimes be confusing - <strong>IF AT ANY POINT I AM UNCLEAR, PLEASE ASK!</strong></p></li>
<li><strong>HAS ANYONE IN THE ROOM USED <code>R</code> BEFORE? - GREEN STICKY</strong>
<ul>
<li>If anyone has used <code>R</code>, please could you be available to help one of your neighbours who has not, if they have any questions. Look around you - if there’s someone nearby with a green sticky, say ‘hi’!</li>
</ul></li>
<li><strong>WHY USE OR TEACH <code>R</code>?</strong>
<ul>
<li><code>R</code> is <strong>FREE</strong>, and very <strong>WIDELY-USED</strong> across a range of disciplines.</li>
<li>There are <strong>MANY USEFUL PACKAGES</strong> or data analysis and statistics</li>
<li>It has excellent <strong>GRAPHICS CAPABILITIES</strong></li>
<li>There is an international, friendly <strong>COMMUNITY</strong> across a range of disciplines, so it’s easy to find local and online support</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: But I already know <code>Excel</code></strong></p>
<ul>
<li>I’m <strong>NOT HERE TO CRITICISE <code>EXCEL</code></strong>. <code>Excel</code> is brilliant at what it’s meant to do. It’s <strong>POWERFUL</strong> and <strong>INTUITIVE</strong>.</li>
<li><p>But <strong><code>R</code> HAS MANY ADVANTAGES FOR REPRODUCIBLE AND COMPLEX ANALYSIS</strong></p></li>
<li>A key thing for reproducibility is that it <strong>SEPARATES DATA FROM ANALYSIS</strong>.
<ul>
<li>In <code>R</code>, when you do anything to the original data, that original data remains unmodified (unless you overwrite the file).</li>
<li><strong>POINT OF GOOD PRACTICE: RAW DATA SHOULD BE READ-ONLY</strong></li>
<li>In <code>Excel</code> however it’s easy to overwrite data with copy-and-paste (and many bad things have happened as a result) - see Mike Croucher’s talk for examples.</li>
</ul></li>
<li>Because <strong>YOUR ANALYSIS IN <code>R</code> IS A PROGRAM</strong>, every step is written down explicitly, and is transparent and understandable by someone else.
<ul>
<li>In <code>Excel</code>, there is no clear record of where you moved your mouse, or what you copied and pasted, and it’s not immediately obvious how your formulas work.</li>
</ul></li>
<li><code>R</code> code is <strong>EASY TO SHARE AND ADAPT</strong>, and to apply again to a different or a modified input dataset. It’s easy to publish the analyses via online resources, such as GitHub.</li>
<li><p><code>R</code> code can also be <strong>RUN ON EXTREMELY LARGE DATASETS</strong>, quickly. That’s much harder in <code>Excel</code>.</p></li>
</ul>
<hr />
<p><strong>SLIDE: What is <code>RStudio</code>?</strong></p>
<ul>
<li><code>RStudio</code> is an <strong>INTEGRATED DEVELOPMENT ENVIRONMENT</strong> - which is to say it’s a very powerful tool for writing and using <code>R</code> and programs in the <code>R</code> language.
<ul>
<li>It’s available on <strong>ALL PLATFORMS</strong></li>
<li>It’s available as a webserver, too.</li>
</ul></li>
<li>On the left is a screenshot <strong>WHILE I WAS WRITING THIS PRESENTATION IN RSTUDIO</strong> on a Mac</li>
<li><p>On the right is the Windows version, with an <strong>EXAMPLE ANALYSIS AND VISUALISATION</strong></p></li>
<li>You can use it to <strong>INTERACT WITH <code>R</code> DIRECTLY TO EXPERIMENT WITH DATA</strong></li>
<li>It has a <strong>CODE/SCRIPT EDITOR FOR WRITING PROGRAMS</strong></li>
<li>It has tools for <strong>VISUALISING DATA</strong></li>
<li><p>It has built-in <strong>GIT INTEGRATION FOR MANAGING YOUR PROJECTS</strong></p></li>
</ul>
<p>## SECTION 02: Getting To Know <code>RStudio</code></p>
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>We need to get some <strong>FAMILIARITY WITH OUR WORKING ENVIRONMENT</strong>: the <code>RStudio</code> IDE</li>
<li>Develop some <strong>BEST PRACTICES FOR PROJECT MANAGEMENT</strong> in general, and in <code>RStudio</code></li>
<li>We’ll <strong>BUILD UPON THE <code>GIT</code> LESSON</strong> because <code>RStudio</code> integrates naturally with <code>git</code> to keep all your analysis and code under version control.</li>
<li>We’ll introduce <code>R</code> syntax, and <strong>SEE HOW <code>R</code> REPRESENTS DATA</strong> and how to <strong>PROGRAM IN <code>R</code></strong></li>
<li>If we have time we’ll deal with <strong>MANAGING SOME OF THE MANY USEFUL PACKAGES</strong> available in <code>R</code></li>
</ul>
<hr />
<p><strong>SLIDE: <code>RStudio</code> overview - Interactive Demo</strong></p>
<ul>
<li><strong>START <code>RStudio</code></strong> (click icon/go into start menu and select RStudio/etc.)
<ul>
<li><strong>CHECK EVERYONE CAN START <code>RSTUDIO</code></strong></li>
</ul></li>
</ul>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<ul>
<li><strong>REMIND PEOPLE THEY CAN USE RED/GREEN STICKIES AT ANY TIME</strong></li>
<li>You should see <strong>THREE PANELS</strong>
<ul>
<li>Interactive <code>R</code> console: <strong>you can type here and get instant feedback</strong></li>
<li>Environment/History window</li>
<li>Files/Plots/Packages/Help/Viewer: <strong>interacting with files on the computer, and viewing help and some output</strong></li>
</ul></li>
<li>We’re going to use <code>R</code> in the interactive console to get used to some of the features of the language, and <code>RStudio</code>. <strong>DEMO CODE: ASK PEOPLE TO TYPE ALONG</strong>
<ul>
<li><strong>THE RIGHT ANGLED BRACKET IS A PROMPT: <code>R</code> EXPECTS INPUT</strong></li>
<li><strong>TYPE THE CALCULATION, THEN PRESS RETURN</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb2"><code class="sourceCode r"><div class="sourceLine" id="cb2-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">100</span></div>
<div class="sourceLine" id="cb2-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">101</span></div>
<div class="sourceLine" id="cb2-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span></div>
<div class="sourceLine" id="cb2-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">10</span></div></code></pre>
<ul>
<li><strong>RESULT IS INDICATED WITH A NUMBER <code>[1]</code></strong> this indicates the line with output in it</li>
<li>If you type an <strong>INCOMPLETE COMMAND</strong>, <code>R</code> will wait for you to complete it
<ul>
<li><strong>DEMO CODE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb3"><code class="sourceCode r"><div class="sourceLine" id="cb3-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span></div>
<div class="sourceLine" id="cb3-2" data-line-number="2"><span class="op">+</span><span class="st"> </span></div></code></pre>
<ul>
<li>The <strong>PROMPT CHANGES TO <code>+</code> WHEN <code>R</code> EXPECTS MORE INPUT</strong></li>
<li>You can either complete the line, or use <code>Esc</code> (<code>Ctrl-C</code>) to exit</li>
</ul>
<pre class="sourceCode r" id="cb4"><code class="sourceCode r"><div class="sourceLine" id="cb4-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span></div>
<div class="sourceLine" id="cb4-2" data-line-number="2"><span class="op">+</span><span class="st"> </span><span class="dv">6</span></div>
<div class="sourceLine" id="cb4-3" data-line-number="3">[<span class="dv">1</span>] <span class="dv">7</span></div>
<div class="sourceLine" id="cb4-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span></div>
<div class="sourceLine" id="cb4-5" data-line-number="5"><span class="op">+</span><span class="st"> </span></div>
<div class="sourceLine" id="cb4-6" data-line-number="6"></div>
<div class="sourceLine" id="cb4-7" data-line-number="7"><span class="er">&gt;</span><span class="st"> </span></div></code></pre>
<ul>
<li><code>R</code> obeys the usual <strong>PRECEDENCE OPERATIONS</strong> ( <code>(</code>, <code>**</code>/<code>^</code>, <code>/</code>, <code>*</code>, <code>+</code>, <code>-</code>)
<ul>
<li><strong>DEMO CODE: NOTE SPACES AROUND OPERATORS</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb5"><code class="sourceCode r"><div class="sourceLine" id="cb5-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb5-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">13</span></div>
<div class="sourceLine" id="cb5-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>(<span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span>) <span class="op">*</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb5-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">16</span></div>
<div class="sourceLine" id="cb5-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">^</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb5-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">23</span></div>
<div class="sourceLine" id="cb5-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)</div>
<div class="sourceLine" id="cb5-8" data-line-number="8">[<span class="dv">1</span>] <span class="dv">23</span></div></code></pre>
<ul>
<li><strong>ARROW KEYS RECOVER OLD COMMANDS</strong></li>
<li><strong>THE <code>HISTORY</code> TAB SHOWS ALL COMMANDS USED</strong></li>
<li><code>R</code> will report in <strong>SCIENTIFIC NOTATION</strong>
<ul>
<li><strong>CHECK THAT EVERYONE KNOWS WHAT SCIENTIFIC NOTATION IS</strong></li>
</ul></li>
</ul>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<pre class="sourceCode r" id="cb6"><code class="sourceCode r"><div class="sourceLine" id="cb6-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="dv">1000</span></div>
<div class="sourceLine" id="cb6-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">0.002</span></div>
<div class="sourceLine" id="cb6-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="dv">10000</span></div>
<div class="sourceLine" id="cb6-4" data-line-number="4">[<span class="dv">1</span>] <span class="fl">2e-04</span></div>
<div class="sourceLine" id="cb6-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="fl">5e3</span></div>
<div class="sourceLine" id="cb6-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">5000</span></div></code></pre>
<ul>
<li><code>R</code> has many <strong>STANDARD MATHEMATICAL FUNCTIONS</strong></li>
<li><strong>FUNCTION SYNTAX</strong>
<ul>
<li>type the function name</li>
<li>open parentheses</li>
<li>type input value</li>
<li>close parentheses</li>
<li>press return</li>
<li><strong>DEMO CODE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb7"><code class="sourceCode r"><div class="sourceLine" id="cb7-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">sin</span>(<span class="dv">1</span>)</div>
<div class="sourceLine" id="cb7-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">0.841471</span></div>
<div class="sourceLine" id="cb7-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">log</span>(<span class="dv">1</span>)</div>
<div class="sourceLine" id="cb7-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">0</span></div>
<div class="sourceLine" id="cb7-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">log10</span>(<span class="dv">10</span>)</div>
<div class="sourceLine" id="cb7-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">1</span></div>
<div class="sourceLine" id="cb7-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">log</span>(<span class="dv">10</span>)</div>
<div class="sourceLine" id="cb7-8" data-line-number="8">[<span class="dv">1</span>] <span class="fl">2.302585</span></div></code></pre>
<ul>
<li>How do we learn more about a function, or the difference between <code>log()</code> and <code>log10()</code>?</li>
<li><strong>USE <code>R</code> BUILT-IN HELP</strong>
<ul>
<li>Type <code>?</code> then the function name</li>
<li>Scroll to the bottom of the page to find example code</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb8"><code class="sourceCode r"><div class="sourceLine" id="cb8-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>?log</div></code></pre>
<ul>
<li>This brings up help in the <strong>HELP WINDOW</strong></li>
<li>You can also use the <strong>SEARCH BOX</strong> at the top of the help window (try <code>sin()</code>)</li>
<li><p>If you’re not sure about spelling, the editor has <strong>AUTOCOMPLETION</strong> which will suggest all possible endings for something you type (try <code>log</code>) - <strong>USE TAB TO SEE AUTOCOMPLETIONS</strong></p></li>
<li>We can do <strong>COMPARISONS</strong> in <code>R</code>
<ul>
<li>Comparisons return <code>TRUE</code> or <code>FALSE</code>. <strong>DEMO CODE</strong></li>
<li><strong>NOTE:</strong> when comparing numbers, it’s better to use <code>all.equal()</code> (<em>machine numeric tolerance</em>) <strong>ASK IF THERE’S ANYONE FROM MATHS/PHYSICS</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb9"><code class="sourceCode r"><div class="sourceLine" id="cb9-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span></div>
<div class="sourceLine" id="cb9-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">!=</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb9-4" data-line-number="4">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb9-6" data-line-number="6">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span></div>
<div class="sourceLine" id="cb9-8" data-line-number="8">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></div>
<div class="sourceLine" id="cb9-10" data-line-number="10">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">-9</span></div>
<div class="sourceLine" id="cb9-12" data-line-number="12">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">all.equal</span>(<span class="fl">1.0</span>, <span class="fl">1.0</span>)</div>
<div class="sourceLine" id="cb9-14" data-line-number="14">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="kw">all.equal</span>(<span class="fl">1.0</span>, <span class="fl">1.1</span>)</div>
<div class="sourceLine" id="cb9-16" data-line-number="16">[<span class="dv">1</span>] <span class="st">&quot;Mean relative difference: 0.1&quot;</span></div>
<div class="sourceLine" id="cb9-17" data-line-number="17"><span class="op">&gt;</span><span class="st"> </span><span class="kw">all.equal</span>(pi<span class="fl">-1e-7</span>, pi)</div>
<div class="sourceLine" id="cb9-18" data-line-number="18">[<span class="dv">1</span>] <span class="st">&quot;Mean relative difference: 3.183099e-08&quot;</span></div>
<div class="sourceLine" id="cb9-19" data-line-number="19"><span class="op">&gt;</span><span class="st"> </span><span class="kw">all.equal</span>(pi<span class="fl">-1e-8</span>, pi)</div>
<div class="sourceLine" id="cb9-20" data-line-number="20">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb9-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span>pi<span class="fl">-1e-8</span> <span class="op">==</span><span class="st"> </span>pi</div>
<div class="sourceLine" id="cb9-22" data-line-number="22">[<span class="dv">1</span>] <span class="ot">FALSE</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 01</strong></p>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Variables</strong></p>
<ul>
<li><strong>VARIABLES</strong> are critical to programming in general, and also to working in <code>R</code></li>
<li>Variables are like <strong>NAMED BOXES</strong>
<ul>
<li>Like a box, they <strong>HOLD THINGS</strong></li>
<li>When we make reference to a box’s name, we <strong>MEAN THE THING THE BOX CONTAINS</strong></li>
</ul></li>
<li>Here, the box is called <code>Name</code>, and it contains the word <code>Samia</code></li>
<li>When we refer to the box, we call it <code>Name</code>, and we might ask questions like:
<ul>
<li>“What is the length of <code>Name</code>?”, meaning “What is the length of the word in the box called <code>Name</code>?” (answer: 5)</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Variables - Interactive Demo</strong></p>
<ul>
<li>This is a very important concept, so we’re going to go through some practical examples, to reinforce it
<ul>
<li>In <code>R</code>, variables are assigned with the <strong>ASSIGNMENT OPERATOR</strong> <code>&lt;-</code></li>
<li>We will assign the value <code>1/40</code> to the variable <code>x</code></li>
<li><strong>DEMO CODE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb10"><code class="sourceCode r"><div class="sourceLine" id="cb10-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">40</span></div></code></pre>
<ul>
<li>At first, nothing seems to happen, but we can see that the variable <code>x</code> now exists, and contains the value <code>0.025</code> - a <strong>DECIMAL APPROXMATION</strong> of the fraction <code>1/40</code></li>
</ul>
<pre class="sourceCode r" id="cb11"><code class="sourceCode r"><div class="sourceLine" id="cb11-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb11-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">0.025</span></div></code></pre>
<ul>
<li><strong>CLICK ON THE ENVIRONMENT WINDOW</strong>
<ul>
<li>You should see that <code>x</code> is defined, there</li>
</ul></li>
<li><p>The <em>Environment</em> window in <code>RStudio</code> tells you the name and content of every variable currently active in your <code>R</code> session.</p></li>
<li>This <strong>VARIABLE CAN BE USED ANYWHERE THAT EXPECTS A NUMBER</strong>
<ul>
<li>such as an argument to a function</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb12"><code class="sourceCode r"><div class="sourceLine" id="cb12-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">log</span>(x)</div>
<div class="sourceLine" id="cb12-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">-3.688879</span></div>
<div class="sourceLine" id="cb12-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">sin</span>(x)</div>
<div class="sourceLine" id="cb12-4" data-line-number="4">[<span class="dv">1</span>] <span class="fl">0.0249974</span></div>
<div class="sourceLine" id="cb12-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb12-6" data-line-number="6">[<span class="dv">1</span>] <span class="fl">0.05</span></div>
<div class="sourceLine" id="cb12-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb12-8" data-line-number="8">[<span class="dv">1</span>] <span class="fl">0.05</span></div>
<div class="sourceLine" id="cb12-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>x <span class="op">^</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb12-10" data-line-number="10">[<span class="dv">1</span>] <span class="fl">0.000625</span></div></code></pre>
<ul>
<li>We can <strong>REASSIGN VALUES TO VARIABLES</strong>
<ul>
<li><strong>MONITOR THE VALUE OF <code>x</code> IN THE ENVIRONMENT WINDOW</strong></li>
<li>We can also assign a variable to itself, to modify the variable</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb13"><code class="sourceCode r"><div class="sourceLine" id="cb13-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">100</span></div>
<div class="sourceLine" id="cb13-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">5</span></div></code></pre>
<ul>
<li>We can assign <strong>ANY KIND OF VALUE</strong> to a variable
<ul>
<li>Including <strong>STRINGS</strong> - i.e. sets of characters</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb14"><code class="sourceCode r"><div class="sourceLine" id="cb14-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>name &lt;-<span class="st"> &quot;Samia&quot;</span></div>
<div class="sourceLine" id="cb14-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>name</div>
<div class="sourceLine" id="cb14-3" data-line-number="3">[<span class="dv">1</span>] <span class="st">&quot;Samia&quot;</span></div></code></pre>
<ul>
<li>But <strong>BE CAREFUL</strong> - <code>R</code> is not always intuitive
<ul>
<li>Strings in particular may not work the way you expect</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb15"><code class="sourceCode r"><div class="sourceLine" id="cb15-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(name)</div>
<div class="sourceLine" id="cb15-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">1</span></div>
<div class="sourceLine" id="cb15-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">nchar</span>(name)</div>
<div class="sourceLine" id="cb15-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">5</span></div></code></pre>
<hr />
<p><strong>SLIDE: Functions</strong></p>
<ul>
<li>You’ve now used some <strong>functions</strong>. These are like “canned scripts”</li>
<li>Functions have <strong>THREE MAIN PURPOSES</strong>
<ul>
<li>They <strong>ENCAPSULATE COMPLEX TASKS</strong> - you don’t need to worry about how a sine is calculated, just that you give the function a value, and it tells you what the sine is.</li>
<li>They <strong>MAKE CODE MORE READABLE</strong> - by dividing code into logical operations, represented by short names, the code is easier to read</li>
<li>They also <strong>MAKE CODE MORE REUSABLE</strong> - you don’t need to write the routine for finding a square root every time you want one, you just need to call the <code>sqrt()</code> function</li>
</ul></li>
<li><strong>ALL THE FUNCTIONS YOU’VE SEEN ARE BUILT-IN</strong>, the so-called <code>base</code> functions</li>
<li><p><strong>OTHER FUNCTIONS FOR SPECIFIC TASKS CAN BE BROUGHT IN, THROUGH <code>libraries</code></strong></p></li>
<li>Functions usually <strong>TAKE ARGUMENTS</strong> (input), e.g. <code>sqrt(4)</code> - the <code>4</code> is an argument</li>
<li><p>Functions often <strong>RETURN</strong> values (output), e.g. <code>sqrt(4)</code> <strong>returns</strong> the value <code>2</code></p></li>
</ul>
<hr />
<p><strong>SLIDE: Getting Help for Functions</strong></p>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb16"><code class="sourceCode r"><div class="sourceLine" id="cb16-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">args</span>(lm)</div>
<div class="sourceLine" id="cb16-2" data-line-number="2"><span class="cf">function</span> (formula, data, subset, weights, na.action, <span class="dt">method =</span> <span class="st">&quot;qr&quot;</span>, </div>
<div class="sourceLine" id="cb16-3" data-line-number="3">    <span class="dt">model =</span> <span class="ot">TRUE</span>, <span class="dt">x =</span> <span class="ot">FALSE</span>, <span class="dt">y =</span> <span class="ot">FALSE</span>, <span class="dt">qr =</span> <span class="ot">TRUE</span>, <span class="dt">singular.ok =</span> <span class="ot">TRUE</span>, </div>
<div class="sourceLine" id="cb16-4" data-line-number="4">    <span class="dt">contrasts =</span> <span class="ot">NULL</span>, offset, ...) </div>
<div class="sourceLine" id="cb16-5" data-line-number="5"><span class="ot">NULL</span></div>
<div class="sourceLine" id="cb16-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>?sqrt</div>
<div class="sourceLine" id="cb16-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">help</span>(sqrt)</div>
<div class="sourceLine" id="cb16-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span>??sqrt</div>
<div class="sourceLine" id="cb16-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="kw">help.search</span>(<span class="st">&quot;sqrt&quot;</span>)</div>
<div class="sourceLine" id="cb16-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">help.search</span>(<span class="st">&quot;categorical&quot;</span>)</div>
<div class="sourceLine" id="cb16-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="kw">vignette</span>(two<span class="op">-</span>table)</div>
<div class="sourceLine" id="cb16-12" data-line-number="12">Error <span class="cf">in</span> <span class="kw">vignette</span>(two <span class="op">-</span><span class="st"> </span>table) <span class="op">:</span><span class="st"> </span>object <span class="st">&#39;two&#39;</span> not found</div>
<div class="sourceLine" id="cb16-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">vignette</span>(<span class="st">&quot;two-table&quot;</span>)</div></code></pre>
<hr />
<p><strong>SLIDE: Removing Variables</strong></p>
<ul>
<li>To remove <strong>ONE OR MORE SPECIFIED VARIABLES</strong>, use <code>rm()</code>
<ul>
<li><strong><code>ls()</code> IS A FUNCTION THAT LISTS VARIABLES</strong> (like the Environment tab)</li>
<li><strong>DEMO CODE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb17"><code class="sourceCode r"><div class="sourceLine" id="cb17-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">1</span></div>
<div class="sourceLine" id="cb17-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb17-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>z &lt;-<span class="st"> </span><span class="dv">3</span></div>
<div class="sourceLine" id="cb17-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="kw">ls</span>()</div>
<div class="sourceLine" id="cb17-5" data-line-number="5">[<span class="dv">1</span>] <span class="st">&quot;x&quot;</span> <span class="st">&quot;y&quot;</span> <span class="st">&quot;z&quot;</span></div>
<div class="sourceLine" id="cb17-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(x)</div>
<div class="sourceLine" id="cb17-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">ls</span>()</div>
<div class="sourceLine" id="cb17-8" data-line-number="8">[<span class="dv">1</span>] <span class="st">&quot;y&quot;</span> <span class="st">&quot;z&quot;</span></div>
<div class="sourceLine" id="cb17-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(y, z)</div>
<div class="sourceLine" id="cb17-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">ls</span>()</div>
<div class="sourceLine" id="cb17-11" data-line-number="11"><span class="kw">character</span>(<span class="dv">0</span>)</div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 02</strong></p>
<p>Solution:</p>
<p><code>mass &lt;- 47.5</code> This will give a value of 47.5 for the variable mass</p>
<p><code>age &lt;- 122</code> This will give a value of 122 for the variable age</p>
<p><code>mass &lt;- mass * 2.3</code> This will multiply the existing value of 47.5 by 2.3 to give a new value of 109.25 to the variable mass.</p>
<p><code>age &lt;- age - 20</code> This will subtract 20 from the existing value of 122 to give a new value of 102 to the variable age.</p>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Good Variable Names</strong></p>
<ul>
<li>Good variable names <strong>SHOULD HELP YOU DESCRIBE WHAT’S GOING ON</strong>
<ul>
<li>Helpful <strong>FOR YOU AND FOR OTHERS</strong></li>
</ul></li>
<li>It’s better to <strong>avoid using names that already exist</strong></li>
<li><p>Use a <strong>CONSISTENT NAMING STYLE</strong></p></li>
<li>Rules for <strong>VARIABLE NAMES DIFFER BETWEEN LANGUAGES</strong></li>
<li><strong>IN <code>R</code></strong>
<ul>
<li>You can only use <strong>LETTERS, NUMBERS, UNDERSCORES, AND PERIODS</strong></li>
<li>You <strong>can’t start variable names with a number</strong></li>
<li>You <strong>can’t use whitespace in a variable name</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Good Project Management Practices</strong></p>
<ul>
<li>There is <strong>NO SINGLE GOOD WAY TO ORGANISE A PROJECT</strong>
<ul>
<li>It’s important to find something that <strong>WORKS FOR YOU</strong></li>
<li>But it’s <strong>ALSO IMPORTANT THAT IT WORKS FOR COLLABORATORS</strong></li>
<li>Some <strong>PRINCIPLES MAKE THINGS EASIER FOR EVERYONE</strong></li>
</ul></li>
<li>Using a <strong>SINGLE WORKING DIRECTORY PER PROJECT/ANALYSIS</strong>
<ul>
<li><strong>NAME IT AFTER THE PROJECT</strong></li>
<li><strong>EASY TO PACKAGE UP</strong> the whole directory and move it around, or share it - <strong>OR PUBLISH ALONGSIDE YOUR PAPER</strong></li>
<li><strong>NO NEED TO HUNT AROUND THE WHOLE DISK</strong> to find relevant or important files.</li>
<li>You can use <strong>RELATIVE PATHS</strong> that will always work, so long as you work within the project directory</li>
</ul></li>
<li>Treat your <strong>RAW DATA AS READ-ONLY</strong>
<ul>
<li>Establishes <strong>PROVENANCE</strong> and <strong>ENABLES REANALYSIS</strong></li>
<li>Keep in <strong>SEPARATE SUBFOLDER</strong></li>
</ul></li>
<li><strong>CLEAN THE DATA PROGRAMMATICALLY</strong> (part of the analysis chain)
<ul>
<li>Remove/fill in null values, etc. - whatever is appropriate</li>
<li><strong>KEEP CLEANED DATA SEPARATE FROM RAW</strong> - like food hygiene</li>
</ul></li>
<li><strong>GENERATED OUTPUT IS DISPOSABLE</strong>
<ul>
<li>This means <strong>ANYTHING GENERATED AUTOMATICALLY BY YOUR CODE/ANALYSIS</strong></li>
<li>If a file can be generated by scripts/code in your project, no need to put it under version control</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Example Directory Structure</strong></p>
<ul>
<li>This is <strong>ONE WAY TO STRUCTURE YOUR WORKING DIRECTORY</strong>
<ul>
<li>It’s a good starting point, but something else might be more appropriate for your own work</li>
</ul></li>
<li><strong><code>WORKING DIR/</code></strong> is the <em>root</em> directory of the project.
<ul>
<li>Everything related to the project (subdirectories of data, scripts and figures; <code>git</code> files; configuration files; notes to yourself; whatever)</li>
</ul></li>
<li><strong><code>data/</code></strong> is a subdirectory for storing data
<ul>
<li>raw data only, or raw and intermediate data? <strong>YOUR DECISION</strong></li>
<li><code>data/raw</code>, <code>data/intermediate</code> - <strong>USE SUBFOLDERS WHEN SENSIBLE</strong></li>
</ul></li>
<li><strong><code>data_output/</code></strong> could be a place to write the analysis output (<code>.csv</code> files etc.)</li>
<li><strong><code>documents/</code></strong> is a place where notes, drafts, and explanatory text could be stored</li>
<li><strong><code>fig_output/</code></strong> could be a place to write graphical output of the analysis (keep separate from tables)</li>
<li><p><strong><code>scripts</code></strong> might be where you would choose to keep executable code that automates your analysis</p></li>
<li><p>The important thing is that the structure is <strong>SELF-EXPLANATORY WHERE POSSIBLE</strong></p></li>
</ul>
<hr />
<p><strong>SLIDE: Project Management in <code>RStudio</code></strong></p>
<ul>
<li><code>RStudio</code> <strong>TRIES TO BE HELPFUL</strong> and provides the ‘Project’ concept
<ul>
<li>Keeps <strong>ALL PROJECT FILES IN A SINGLE DIRECTORY</strong></li>
<li><strong>INTEGRATES WITH <code>GIT</code></strong></li>
<li>Enables switching between projects within <code>RStudio</code></li>
<li>Keeps project histories</li>
</ul></li>
<li><p><strong>INTERACTIVE DEMO</strong></p></li>
<li><strong>CREATE PROJECT</strong></li>
<li>Click <code>File</code> -&gt; <code>New Project</code>
<ul>
<li>Options for how we want to create a project: brand new in a new working directory; turn an existing directory into a project; or checkout a project from <code>GitHub</code> or some other repository</li>
</ul></li>
<li>Click <code>New Directory</code>
<ul>
<li>Options for various things we can do in <code>RStudio</code>. Here we want <code>New Project</code></li>
</ul></li>
<li>Click <code>New Project</code>
<ul>
<li>We are asked for a directory name. <strong>ENTER <code>swc-r-lesson</code></strong></li>
<li>We are asked for a parent directory. <strong>PUT YOURS ON THE DESKTOP; STUDENTS CAN CHOOSE ANYWHERE SENSIBLE</strong></li>
<li><strong>SELECT <code>Create a git repository</code></strong> - this will create and initialise a <code>git</code> repository, just for this project</li>
</ul></li>
<li>Click <code>Create Project</code></li>
<li><p><strong>YOU SHOULD SEE AN EMPTY-ISH <code>RSTUDIO</code> WINDOW</strong></p></li>
<li><strong>INSPECT PROJECT ENVIRONMENT</strong></li>
<li>First, <strong>NOTE THE WINDOWS</strong>: editor; environment; files</li>
<li><strong>EDITOR</strong> is empty</li>
<li><strong>ENVIRONMENT</strong> is empty</li>
<li><strong>FILES</strong> shows
<ul>
<li><strong>CURRENT WORKING DIRECTORY</strong> (see breadcrumb trail)</li>
<li><strong>TWO FILES</strong>: <code>*.Rproj</code> - information about your project; <code>.gitignore</code> - your project’s <code>.gitignore</code> file (remember the <code>git</code> lesson?)</li>
</ul></li>
<li><strong>CLICK ON <code>GIT</code> TAB</strong>
<ul>
<li>We see that the files are not yet added to the project (status is <code>?</code>)</li>
<li><strong>CHECK BOXES TO STAGE FILES</strong></li>
<li><strong>CLICK ON <code>DIFF</code> TO SEE CHANGES</strong> (note colours, lines, etc.)</li>
<li><strong>CLICK ON <code>COMMIT</code> TO COMMIT CHANGES</strong></li>
<li><strong>WRITE COMMIT MESSAGE</strong> (add .gitignore and R project files to repo)</li>
<li><strong>CLICK <code>COMMIT</code></strong> (explain message)</li>
</ul></li>
<li><strong>CREATE DIRECTORIES IN PROJECT</strong></li>
<li><strong>Create directoris called <code>scripts</code> and <code>data</code></strong>
<ul>
<li>Click on <code>New Folder</code></li>
<li>Enter directory name (<code>scripts</code>)</li>
<li>Note that the directory now exists in the <code>Files</code> tab (but not in the <code>git</code> tab, as the directory is empty)</li>
<li>Do the same for <code>data/</code></li>
</ul></li>
<li><p><strong>NOTE THAT WE WILL NOW POPULATE THE DIRECTORY</strong></p></li>
</ul>
<hr />
<p><strong>SLIDE: Working in RStudio</strong></p>
<ul>
<li><code>RStudio</code> offers <strong>SEVERAL WAYS TO WRITE CODE</strong>
<ul>
<li>We’ll not see all of them today</li>
<li>You’ve seen <strong>DIRECT INTERACTION IN THE CONSOLE</strong> (entering variables)</li>
<li><code>RStudio</code> also has an editor for writing scripts, notebooks, markdown documents, and Shiny applications (<strong>EXPLAIN BRIEFLY</strong>)</li>
<li>It can also be used to write plain text</li>
</ul></li>
<li><p><strong>INTERACTIVE DEMO OF <code>R</code> SCRIPT</strong></p></li>
<li>Click on <code>File</code> -&gt; <code>New File</code> -&gt; <code>Text File</code>. <strong>NOTE THAT THE EDITOR WINDOW OPENS</strong></li>
<li>Enter the following text, and <strong>EXPLAIN CSV</strong>
<ul>
<li>plain text file</li>
<li>one row per line</li>
<li>column entries separated by commas</li>
<li>first row is header data</li>
<li><strong>NEEDS A BLANK LINE AT THE END</strong></li>
<li><strong>DATA DESCRIBES CATS</strong></li>
</ul></li>
</ul>
<pre><code>coat,weight,likes_string
calico,2.1,1
black,5.0,0
tabby,3.2,1
</code></pre>
<ul>
<li><strong>SAVE THE FILE AS <code>data/feline_data.csv</code></strong>
<ul>
<li>Click on disk icon</li>
<li>Navigate to <code>data/</code> subdirectory</li>
<li>Enter filename <code>feline_data.csv</code></li>
</ul></li>
<li><strong>NOTE CHANGES IN <code>GIT</code> TAB</strong>
<ul>
<li>The <code>data</code> directory appears!</li>
<li>Click on <code>Staged</code> and <strong>THE FILE APPEARS</strong></li>
<li>Click <code>Commit</code> and add a commit string, e.g. “add cat dataset”</li>
</ul></li>
<li><p><strong>CLOSE THE EDITOR FOR THAT FILE</strong></p></li>
<li>Click on <code>File</code> -&gt; <code>New File</code> -&gt; <code>R Script</code>.</li>
<li><strong>EXPLAIN COMMENTS</strong> while entering the code below
<ul>
<li><strong>COMMENTS ANNOTATE YOUR CODE</strong>: reminders for you, and information for others</li>
</ul></li>
<li><strong>EXPLAIN <code>read.csv()</code></strong>
<ul>
<li><code>read.csv()</code> is a <strong>FUNCTION</strong> that reads data from a <strong>CSV-FORMAT FILE</strong> into a variable in <code>R</code></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb19"><code class="sourceCode r"><div class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># Script for exploring data structures</span></div>
<div class="sourceLine" id="cb19-2" data-line-number="2"></div>
<div class="sourceLine" id="cb19-3" data-line-number="3"><span class="co"># Load cat data as a dataframe</span></div>
<div class="sourceLine" id="cb19-4" data-line-number="4">cats &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/feline_data.csv&quot;</span>)</div></code></pre>
<ul>
<li><strong>SAVE THE SCRIPT</strong>
<ul>
<li>Click on <code>File</code> -&gt; <code>Save</code></li>
<li>Navigate to the <code>scripts/</code> subdirectory</li>
<li>Enter filename <code>data_structures</code> (<strong>EXTENSION IS AUTOMATICALLY APPLIED</strong>) <strong>NOTE CHANGES IN <code>GIT</code> TAB</strong></li>
<li>The <code>scripts</code> directory appears!</li>
<li>Click on <code>Staged</code> and the file appears</li>
<li>Click on <code>Commit</code> and add a commit string, e.g. “add data structures script”</li>
</ul></li>
<li><strong>DO YOU SEE THE VARIABLE IN THE ENVIRONMENT?</strong>
<ul>
<li><strong>NO</strong> - because the code hasn’t been executed, only written.</li>
</ul></li>
<li><strong>RUN THE SCRIPT</strong>
<ul>
<li>Click on <code>Source</code> and <strong>NOTE THIS RUNS THE WHOLE SCRIPT</strong></li>
</ul></li>
<li>Go to the <code>Environment</code> tab
<ul>
<li><strong>NOTE THE DATA WAS LOADED IN THE VARIABLE <code>cats</code></strong></li>
<li>Note that there is a description of the data (3 obs. of 3 variables)</li>
<li><strong>CLICK ON THE VARIABLE AND NOTE THAT THE TABLE IS NOW VISIBLE</strong> - this is helpful</li>
<li><strong>YOU CANNOT EDIT THE DATA IN THIS TABLE</strong> - you can sort and filter, but not modify the data. This <strong>ENFORCES GOOD PRACTICE</strong> (compare to Excel).</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: 03. A First Analysis in <code>RStudio</code></strong></p>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>We’re going to cover some ways of loading data into an <code>R</code> project/analysis</li>
<li>We’ll <strong>EXPLORE SOME FUNCTIONS FOR SUMMARISING DATA</strong></li>
<li>Sometimes we want to use only a portion of our data, and we’ll see some <strong>WAYS OF INDEXING DATASETS</strong></li>
<li>We’ll also look at some ways to <strong>PLOT DATA IN R</strong>, using the built-in <em>base graphics</em></li>
</ul>
<hr />
<p><strong>SLIDE: Our Task</strong></p>
<ul>
<li>We’ve got some medical data relating to a new treatment for arthritis</li>
<li>There are some measurements of patient inflammation, taken over a period of days post-treatment for each patient</li>
<li><p>We’ve been <strong>ASKED TO PRODUCE A SUMMARY AND SOME GRAPHS</strong></p></li>
<li><strong>DOWNLOAD THE FILE FROM THE LINK TO <code>data/</code></strong></li>
<li><strong>EXPLAIN THE LINK IS ON THE ETHERPAD PAGE</strong> (no need to type!)</li>
<li><strong>DEMO THIS</strong>
<ul>
<li><strong>NOTE:</strong> A new directory is created <em>within</em> <code>data</code>, called <code>data</code>. <strong>THIS IS UNTIDY, SO LET’S CLEAN</strong></li>
<li><strong>COPY ALL FILES BEGINNING WITH <code>inflammation</code> TO THE PARENT FOLDER</strong></li>
<li><strong>THEN DELETE THE SUBFOLDER AND ZIP FILE</strong></li>
<li><strong>ADD THE DATA FILES TO THE REPO</strong> (can shift-click, here)</li>
</ul></li>
<li><p><strong>CHECK EVERYONE’S READY TO PROCEED</strong></p></li>
</ul>
<hr />
<p><strong>SLIDE: Loading Data - Interactive Demo</strong></p>
<ul>
<li>We’ve already created some cat data manually, but <strong>THIS IS UNUSUAL</strong> - most data comes in the form of plain text files</li>
</ul>
<p><strong>START DEMO</strong> * <strong>INSPECT DATA IN FILES WINDOW</strong> * Click on filename, and select <code>View File</code> * Note: <strong>THERE IS NO HEADER</strong> and <strong>THERE ARE NO ROW NAMES</strong> * Ask: <strong>IS THIS WELL-FORMATTED DATA?</strong> * I happen to know that there is <strong>one row per patient, and the columns are days, in turn, post-treatment</strong>, and <strong>measurements are inflammation levels</strong> * <strong>WHAT IS THE DATA TYPE</strong> * Tabular, with <strong>EACH COLUMN SEPARATED BY A COMMA</strong>, so <strong>CSV</strong> * <strong>IN THE CONSOLE</strong> use <code>read.csv()</code> to read the data in * Note: <strong>IF WE DON’T ASSIGN THE RESULT TO A VARIABLE WE JUST SEE THE DATA</strong> * <strong>CREATE A NEW SCRIPT</strong> * Click the <strong>triangle next to the new document icon</strong> * Add the code and <strong>SAVE AS <code>scripts/inflammation</code></strong> (<code>RStudio</code> adds the extension) * See that the file appears in <code>Files</code> and <code>Git</code> windows</p>
<pre class="sourceCode r" id="cb20"><code class="sourceCode r"><div class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Preliminary analysis of inflammation in arthritis patients</span></div>
<div class="sourceLine" id="cb20-2" data-line-number="2"></div>
<div class="sourceLine" id="cb20-3" data-line-number="3"><span class="co"># Load data (no headers, CSV)</span></div>
<div class="sourceLine" id="cb20-4" data-line-number="4">data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>)</div></code></pre>
<ul>
<li><strong>INSPECT THE DATA</strong>
<ul>
<li><code>Source</code> the script</li>
<li>Check the <code>Environment</code> window: 60 observations (patients) of 40 variables (days)</li>
<li><strong>CLICK ON <code>data</code></strong></li>
<li><strong>COLUMN HEADERS ARE PROVIDED: <code>Vn</code></strong> for <em>variable n</em></li>
<li><code>dim()</code> - <em>dimensions</em> of data: rows X columns</li>
<li><code>length()</code> - number of columns in the table</li>
<li><code>ncol()</code> - number of columns in the table</li>
<li><code>nrow()</code> - number of rows in the table</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb21"><code class="sourceCode r"><div class="sourceLine" id="cb21-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(data, <span class="dt">n =</span> <span class="dv">2</span>)</div>
<div class="sourceLine" id="cb21-2" data-line-number="2">  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26</div>
<div class="sourceLine" id="cb21-3" data-line-number="3"><span class="dv">1</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">7</span>  <span class="dv">8</span>   <span class="dv">3</span>   <span class="dv">3</span>   <span class="dv">3</span>  <span class="dv">10</span>   <span class="dv">5</span>   <span class="dv">7</span>   <span class="dv">4</span>   <span class="dv">7</span>   <span class="dv">7</span>  <span class="dv">12</span>  <span class="dv">18</span>   <span class="dv">6</span>  <span class="dv">13</span>  <span class="dv">11</span>  <span class="dv">11</span>   <span class="dv">7</span>   <span class="dv">7</span></div>
<div class="sourceLine" id="cb21-4" data-line-number="4"><span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">2</span>  <span class="dv">2</span>   <span class="dv">6</span>  <span class="dv">10</span>  <span class="dv">11</span>   <span class="dv">5</span>   <span class="dv">9</span>   <span class="dv">4</span>   <span class="dv">4</span>   <span class="dv">7</span>  <span class="dv">16</span>   <span class="dv">8</span>   <span class="dv">6</span>  <span class="dv">18</span>   <span class="dv">4</span>  <span class="dv">12</span>   <span class="dv">5</span>  <span class="dv">12</span>   <span class="dv">7</span></div>
<div class="sourceLine" id="cb21-5" data-line-number="5">  V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40</div>
<div class="sourceLine" id="cb21-6" data-line-number="6"><span class="dv">1</span>   <span class="dv">4</span>   <span class="dv">6</span>   <span class="dv">8</span>   <span class="dv">8</span>   <span class="dv">4</span>   <span class="dv">4</span>   <span class="dv">5</span>   <span class="dv">7</span>   <span class="dv">3</span>   <span class="dv">4</span>   <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">0</span>   <span class="dv">0</span></div>
<div class="sourceLine" id="cb21-7" data-line-number="7"><span class="dv">2</span>  <span class="dv">11</span>   <span class="dv">5</span>  <span class="dv">11</span>   <span class="dv">3</span>   <span class="dv">3</span>   <span class="dv">5</span>   <span class="dv">4</span>   <span class="dv">4</span>   <span class="dv">5</span>   <span class="dv">5</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">1</span></div>
<div class="sourceLine" id="cb21-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(data)</div>
<div class="sourceLine" id="cb21-9" data-line-number="9">[<span class="dv">1</span>] <span class="dv">60</span> <span class="dv">40</span></div>
<div class="sourceLine" id="cb21-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(data)</div>
<div class="sourceLine" id="cb21-11" data-line-number="11">[<span class="dv">1</span>] <span class="dv">40</span></div>
<div class="sourceLine" id="cb21-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span><span class="kw">ncol</span>(data)</div>
<div class="sourceLine" id="cb21-13" data-line-number="13">[<span class="dv">1</span>] <span class="dv">40</span></div>
<div class="sourceLine" id="cb21-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span><span class="kw">nrow</span>(data)</div>
<div class="sourceLine" id="cb21-15" data-line-number="15">[<span class="dv">1</span>] <span class="dv">60</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 03</strong></p>
<p><strong>SOLUTION</strong></p>
<pre class="sourceCode r" id="cb22"><code class="sourceCode r"><div class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&#39;file.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&#39;;&#39;</span>, <span class="dt">dec=</span><span class="st">&#39;,&#39;</span>)</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Indexing Data</strong></p>
<ul>
<li>We can refer to an element in our dataset by <em>indexing</em> it
<ul>
<li>We <strong>LOCATE A SINGLE ELEMENT as <code>[row, column]</code> in square brackets</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb23"><code class="sourceCode r"><div class="sourceLine" id="cb23-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">ncol</span>(data)</div>
<div class="sourceLine" id="cb23-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">40</span></div>
<div class="sourceLine" id="cb23-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">1</span>,<span class="dv">1</span>]</div>
<div class="sourceLine" id="cb23-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">0</span></div>
<div class="sourceLine" id="cb23-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">50</span>,<span class="dv">1</span>]</div>
<div class="sourceLine" id="cb23-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">0</span></div>
<div class="sourceLine" id="cb23-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">50</span>,<span class="dv">20</span>]</div>
<div class="sourceLine" id="cb23-8" data-line-number="8">[<span class="dv">1</span>] <span class="dv">16</span></div>
<div class="sourceLine" id="cb23-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">30</span>,<span class="dv">20</span>]</div>
<div class="sourceLine" id="cb23-10" data-line-number="10">[<span class="dv">1</span>] <span class="dv">16</span></div></code></pre>
<ul>
<li>To get a <strong>RANGE OF VALUES</strong>, use the <code>:</code> separator to mean ‘to’:</li>
</ul>
<pre class="sourceCode r" id="cb24"><code class="sourceCode r"><div class="sourceLine" id="cb24-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]   <span class="co"># rows 1 to 4; columns 1 to 4</span></div>
<div class="sourceLine" id="cb24-2" data-line-number="2">  V1 V2 V3 V4</div>
<div class="sourceLine" id="cb24-3" data-line-number="3"><span class="dv">1</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">3</span></div>
<div class="sourceLine" id="cb24-4" data-line-number="4"><span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">1</span></div>
<div class="sourceLine" id="cb24-5" data-line-number="5"><span class="dv">3</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">1</span>  <span class="dv">3</span></div>
<div class="sourceLine" id="cb24-6" data-line-number="6"><span class="dv">4</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">0</span></div>
<div class="sourceLine" id="cb24-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">30</span><span class="op">:</span><span class="dv">32</span>, <span class="dv">20</span><span class="op">:</span><span class="dv">22</span>]</div>
<div class="sourceLine" id="cb24-8" data-line-number="8">   V20 V21 V22</div>
<div class="sourceLine" id="cb24-9" data-line-number="9"><span class="dv">30</span>  <span class="dv">16</span>  <span class="dv">14</span>  <span class="dv">15</span></div>
<div class="sourceLine" id="cb24-10" data-line-number="10"><span class="dv">31</span>  <span class="dv">16</span>  <span class="dv">13</span>   <span class="dv">7</span></div>
<div class="sourceLine" id="cb24-11" data-line-number="11"><span class="dv">32</span>   <span class="dv">9</span>  <span class="dv">19</span>  <span class="dv">15</span></div></code></pre>
<ul>
<li>To get a <strong>WHOLE ROW OR COLUMN</strong>, leave that entry blank</li>
</ul>
<pre class="sourceCode r" id="cb25"><code class="sourceCode r"><div class="sourceLine" id="cb25-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>data[<span class="dv">5</span>,]</div>
<div class="sourceLine" id="cb25-2" data-line-number="2">  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26</div>
<div class="sourceLine" id="cb25-3" data-line-number="3"><span class="dv">5</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">3</span>  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">5</span>  <span class="dv">2</span>   <span class="dv">4</span>   <span class="dv">4</span>   <span class="dv">7</span>   <span class="dv">6</span>   <span class="dv">5</span>   <span class="dv">3</span>  <span class="dv">10</span>   <span class="dv">8</span>  <span class="dv">10</span>   <span class="dv">6</span>  <span class="dv">17</span>   <span class="dv">9</span>  <span class="dv">14</span>   <span class="dv">9</span>   <span class="dv">7</span>  <span class="dv">13</span>   <span class="dv">9</span></div>
<div class="sourceLine" id="cb25-4" data-line-number="4">  V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40</div>
<div class="sourceLine" id="cb25-5" data-line-number="5"><span class="dv">5</span>  <span class="dv">12</span>   <span class="dv">6</span>   <span class="dv">7</span>   <span class="dv">7</span>   <span class="dv">9</span>   <span class="dv">6</span>   <span class="dv">3</span>   <span class="dv">2</span>   <span class="dv">2</span>   <span class="dv">4</span>   <span class="dv">2</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">1</span></div>
<div class="sourceLine" id="cb25-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>data[,<span class="dv">16</span>]</div>
<div class="sourceLine" id="cb25-7" data-line-number="7"> [<span class="dv">1</span>]  <span class="dv">4</span>  <span class="dv">4</span> <span class="dv">15</span>  <span class="dv">8</span> <span class="dv">10</span> <span class="dv">15</span> <span class="dv">13</span>  <span class="dv">9</span> <span class="dv">11</span>  <span class="dv">6</span>  <span class="dv">3</span>  <span class="dv">8</span> <span class="dv">12</span>  <span class="dv">3</span>  <span class="dv">5</span> <span class="dv">10</span> <span class="dv">11</span>  <span class="dv">4</span> <span class="dv">11</span> <span class="dv">13</span> <span class="dv">15</span>  <span class="dv">5</span> <span class="dv">14</span> <span class="dv">13</span>  <span class="dv">4</span>  <span class="dv">9</span> <span class="dv">13</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">6</span> <span class="dv">14</span></div>
<div class="sourceLine" id="cb25-8" data-line-number="8">[<span class="dv">32</span>]  <span class="dv">3</span> <span class="dv">15</span>  <span class="dv">4</span> <span class="dv">15</span> <span class="dv">11</span>  <span class="dv">7</span> <span class="dv">10</span> <span class="dv">15</span>  <span class="dv">6</span>  <span class="dv">5</span>  <span class="dv">6</span> <span class="dv">15</span> <span class="dv">11</span> <span class="dv">15</span>  <span class="dv">6</span> <span class="dv">11</span> <span class="dv">15</span> <span class="dv">14</span>  <span class="dv">4</span> <span class="dv">10</span> <span class="dv">15</span> <span class="dv">11</span>  <span class="dv">6</span> <span class="dv">13</span>  <span class="dv">8</span>  <span class="dv">4</span> <span class="dv">13</span> <span class="dv">12</span>  <span class="dv">9</span></div></code></pre>
<hr />
<p><strong>SLIDE: Summary Functions - Interactive Demo</strong></p>
<ul>
<li><strong><code>R</code> was designed for data analysis</strong>, so has many built-in functions for analysing and describing data
<ul>
<li><strong>TALK THROUGH CODE IN CONSOLE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb26"><code class="sourceCode r"><div class="sourceLine" id="cb26-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">max</span>(data)</div>
<div class="sourceLine" id="cb26-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">20</span></div>
<div class="sourceLine" id="cb26-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">max</span>(data[<span class="dv">2</span>,])</div>
<div class="sourceLine" id="cb26-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">18</span></div>
<div class="sourceLine" id="cb26-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">max</span>(data[,<span class="dv">7</span>])</div>
<div class="sourceLine" id="cb26-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">6</span></div>
<div class="sourceLine" id="cb26-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">min</span>(data[,<span class="dv">7</span>])</div>
<div class="sourceLine" id="cb26-8" data-line-number="8">[<span class="dv">1</span>] <span class="dv">1</span></div>
<div class="sourceLine" id="cb26-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(data[,<span class="dv">7</span>])</div>
<div class="sourceLine" id="cb26-10" data-line-number="10">[<span class="dv">1</span>] <span class="fl">3.8</span></div>
<div class="sourceLine" id="cb26-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="kw">median</span>(data[,<span class="dv">7</span>])</div>
<div class="sourceLine" id="cb26-12" data-line-number="12">[<span class="dv">1</span>] <span class="dv">4</span></div>
<div class="sourceLine" id="cb26-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">sd</span>(data[,<span class="dv">7</span>])</div>
<div class="sourceLine" id="cb26-14" data-line-number="14">[<span class="dv">1</span>] <span class="fl">1.725187</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 04</strong></p>
<pre class="sourceCode r" id="cb27"><code class="sourceCode r"><div class="sourceLine" id="cb27-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>animal &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;m&#39;</span>, <span class="st">&#39;o&#39;</span>, <span class="st">&#39;n&#39;</span>, <span class="st">&#39;k&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;y&#39;</span>)</div>
<div class="sourceLine" id="cb27-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</div>
<div class="sourceLine" id="cb27-3" data-line-number="3">[<span class="dv">1</span>] <span class="st">&quot;m&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;n&quot;</span></div>
<div class="sourceLine" id="cb27-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>]</div>
<div class="sourceLine" id="cb27-5" data-line-number="5">[<span class="dv">1</span>] <span class="st">&quot;k&quot;</span> <span class="st">&quot;e&quot;</span> <span class="st">&quot;y&quot;</span></div>
<div class="sourceLine" id="cb27-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="dv">3</span><span class="op">:</span><span class="dv">1</span>]</div>
<div class="sourceLine" id="cb27-7" data-line-number="7">[<span class="dv">1</span>] <span class="st">&quot;n&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;m&quot;</span></div>
<div class="sourceLine" id="cb27-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="op">-</span><span class="dv">1</span>]</div>
<div class="sourceLine" id="cb27-9" data-line-number="9">[<span class="dv">1</span>] <span class="st">&quot;o&quot;</span> <span class="st">&quot;n&quot;</span> <span class="st">&quot;k&quot;</span> <span class="st">&quot;e&quot;</span> <span class="st">&quot;y&quot;</span></div>
<div class="sourceLine" id="cb27-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="op">-</span><span class="dv">4</span>]</div>
<div class="sourceLine" id="cb27-11" data-line-number="11">[<span class="dv">1</span>] <span class="st">&quot;m&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;n&quot;</span> <span class="st">&quot;e&quot;</span> <span class="st">&quot;y&quot;</span></div>
<div class="sourceLine" id="cb27-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="op">-</span><span class="dv">1</span><span class="op">:-</span><span class="dv">4</span>]</div>
<div class="sourceLine" id="cb27-13" data-line-number="13">[<span class="dv">1</span>] <span class="st">&quot;e&quot;</span> <span class="st">&quot;y&quot;</span></div>
<div class="sourceLine" id="cb27-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span>animal[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</div>
<div class="sourceLine" id="cb27-15" data-line-number="15">Error <span class="cf">in</span> animal[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="op">:</span><span class="st"> </span>only <span class="dv">0</span><span class="st">&#39;s may be mixed with negative subscripts</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Repetitive Calculations - Interactive Demo</strong></p>
<ul>
<li>We might want to <strong>CALCULATE MEAN INFLAMMATION FOR EACH PATIENT</strong>, but doing it the way we’ve just seen is tedious and slow.</li>
<li>Happily <strong>COMPUTERS WERE INVENTED TO SAVE US THE HASSLE</strong></li>
<li>We could automate this task in any of several ways available in <code>R</code>
<ul>
<li>What we’d like to do is <strong>APPLY A FUNCTION TO EACH ROW</strong></li>
<li><code>R</code> has an <code>apply()</code> function exactly for this</li>
<li><strong>IN THE CONSOLE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb28"><code class="sourceCode r"><div class="sourceLine" id="cb28-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">apply</span>(<span class="dt">X =</span> data, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> mean)</div>
<div class="sourceLine" id="cb28-2" data-line-number="2"> [<span class="dv">1</span>] <span class="fl">5.450</span> <span class="fl">5.425</span> <span class="fl">6.100</span> <span class="fl">5.900</span> <span class="fl">5.550</span> <span class="fl">6.225</span> <span class="fl">5.975</span> <span class="fl">6.650</span> <span class="fl">6.625</span> <span class="fl">6.525</span> <span class="fl">6.775</span> <span class="fl">5.800</span> <span class="fl">6.225</span> <span class="fl">5.750</span> <span class="fl">5.225</span></div>
<div class="sourceLine" id="cb28-3" data-line-number="3">[<span class="dv">16</span>] <span class="fl">6.300</span> <span class="fl">6.550</span> <span class="fl">5.700</span> <span class="fl">5.850</span> <span class="fl">6.550</span> <span class="fl">5.775</span> <span class="fl">5.825</span> <span class="fl">6.175</span> <span class="fl">6.100</span> <span class="fl">5.800</span> <span class="fl">6.425</span> <span class="fl">6.050</span> <span class="fl">6.025</span> <span class="fl">6.175</span> <span class="fl">6.550</span></div>
<div class="sourceLine" id="cb28-4" data-line-number="4">[<span class="dv">31</span>] <span class="fl">6.175</span> <span class="fl">6.350</span> <span class="fl">6.725</span> <span class="fl">6.125</span> <span class="fl">7.075</span> <span class="fl">5.725</span> <span class="fl">5.925</span> <span class="fl">6.150</span> <span class="fl">6.075</span> <span class="fl">5.750</span> <span class="fl">5.975</span> <span class="fl">5.725</span> <span class="fl">6.300</span> <span class="fl">5.900</span> <span class="fl">6.750</span></div>
<div class="sourceLine" id="cb28-5" data-line-number="5">[<span class="dv">46</span>] <span class="fl">5.925</span> <span class="fl">7.225</span> <span class="fl">6.150</span> <span class="fl">5.950</span> <span class="fl">6.275</span> <span class="fl">5.700</span> <span class="fl">6.100</span> <span class="fl">6.825</span> <span class="fl">5.975</span> <span class="fl">6.725</span> <span class="fl">5.700</span> <span class="fl">6.250</span> <span class="fl">6.400</span> <span class="fl">7.050</span> <span class="fl">5.900</span></div></code></pre>
<ul>
<li><strong>IN OUR ANALYSIS SCRIPT</strong> we want to assign these values to a variable, and <strong>ALSO CALCULATE AVERAGE BY DAY</strong>
<ul>
<li>So long as we provide arguments in the correct order, <strong>WE DON’T NEED TO PROVIDE ARGUMENT NAMES</strong> - true for most <code>R</code> functions</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb29"><code class="sourceCode r"><div class="sourceLine" id="cb29-1" data-line-number="1"><span class="co"># Calculate average inflammation by patient and day</span></div>
<div class="sourceLine" id="cb29-2" data-line-number="2">avg_inflammation_patient &lt;-<span class="st"> </span><span class="kw">apply</span>(<span class="dt">X =</span> data, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> mean)</div>
<div class="sourceLine" id="cb29-3" data-line-number="3">avg_inflammation_day &lt;-<span class="st"> </span><span class="kw">apply</span>(data, <span class="dv">2</span>, mean)</div></code></pre>
<ul>
<li><strong>RUN THE LINES</strong>
<ul>
<li>Note that the values appear in the Environment tab</li>
</ul></li>
<li>Like many common operations, there’s an <code>R</code> function that’s a shortcut
<ul>
<li><strong>IN THE CONSOLE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb30"><code class="sourceCode r"><div class="sourceLine" id="cb30-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">rowMeans</span>(data)</div>
<div class="sourceLine" id="cb30-2" data-line-number="2"> [<span class="dv">1</span>] <span class="fl">5.450</span> <span class="fl">5.425</span> <span class="fl">6.100</span> <span class="fl">5.900</span> <span class="fl">5.550</span> <span class="fl">6.225</span> <span class="fl">5.975</span> <span class="fl">6.650</span> <span class="fl">6.625</span> <span class="fl">6.525</span> <span class="fl">6.775</span> <span class="fl">5.800</span> <span class="fl">6.225</span> <span class="fl">5.750</span> <span class="fl">5.225</span></div>
<div class="sourceLine" id="cb30-3" data-line-number="3">[<span class="dv">16</span>] <span class="fl">6.300</span> <span class="fl">6.550</span> <span class="fl">5.700</span> <span class="fl">5.850</span> <span class="fl">6.550</span> <span class="fl">5.775</span> <span class="fl">5.825</span> <span class="fl">6.175</span> <span class="fl">6.100</span> <span class="fl">5.800</span> <span class="fl">6.425</span> <span class="fl">6.050</span> <span class="fl">6.025</span> <span class="fl">6.175</span> <span class="fl">6.550</span></div>
<div class="sourceLine" id="cb30-4" data-line-number="4">[<span class="dv">31</span>] <span class="fl">6.175</span> <span class="fl">6.350</span> <span class="fl">6.725</span> <span class="fl">6.125</span> <span class="fl">7.075</span> <span class="fl">5.725</span> <span class="fl">5.925</span> <span class="fl">6.150</span> <span class="fl">6.075</span> <span class="fl">5.750</span> <span class="fl">5.975</span> <span class="fl">5.725</span> <span class="fl">6.300</span> <span class="fl">5.900</span> <span class="fl">6.750</span></div>
<div class="sourceLine" id="cb30-5" data-line-number="5">[<span class="dv">46</span>] <span class="fl">5.925</span> <span class="fl">7.225</span> <span class="fl">6.150</span> <span class="fl">5.950</span> <span class="fl">6.275</span> <span class="fl">5.700</span> <span class="fl">6.100</span> <span class="fl">6.825</span> <span class="fl">5.975</span> <span class="fl">6.725</span> <span class="fl">5.700</span> <span class="fl">6.250</span> <span class="fl">6.400</span> <span class="fl">7.050</span> <span class="fl">5.900</span></div>
<div class="sourceLine" id="cb30-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="kw">colMeans</span>(data)</div>
<div class="sourceLine" id="cb30-7" data-line-number="7">        V1         V2         V3         V4         V5         V6         V7         V8         V9 </div>
<div class="sourceLine" id="cb30-8" data-line-number="8"> <span class="fl">0.0000000</span>  <span class="fl">0.4500000</span>  <span class="fl">1.1166667</span>  <span class="fl">1.7500000</span>  <span class="fl">2.4333333</span>  <span class="fl">3.1500000</span>  <span class="fl">3.8000000</span>  <span class="fl">3.8833333</span>  <span class="fl">5.2333333</span> </div>
<div class="sourceLine" id="cb30-9" data-line-number="9">       V10        V11        V12        V13        V14        V15        V16        V17        V18 </div>
<div class="sourceLine" id="cb30-10" data-line-number="10"> <span class="fl">5.5166667</span>  <span class="fl">5.9500000</span>  <span class="fl">5.9000000</span>  <span class="fl">8.3500000</span>  <span class="fl">7.7333333</span>  <span class="fl">8.3666667</span>  <span class="fl">9.5000000</span>  <span class="fl">9.5833333</span> <span class="fl">10.6333333</span> </div>
<div class="sourceLine" id="cb30-11" data-line-number="11">       V19        V20        V21        V22        V23        V24        V25        V26        V27 </div>
<div class="sourceLine" id="cb30-12" data-line-number="12"><span class="fl">11.5666667</span> <span class="fl">12.3500000</span> <span class="fl">13.2500000</span> <span class="fl">11.9666667</span> <span class="fl">11.0333333</span> <span class="fl">10.1666667</span> <span class="fl">10.0000000</span>  <span class="fl">8.6666667</span>  <span class="fl">9.1500000</span> </div>
<div class="sourceLine" id="cb30-13" data-line-number="13">       V28        V29        V30        V31        V32        V33        V34        V35        V36 </div>
<div class="sourceLine" id="cb30-14" data-line-number="14"> <span class="fl">7.2500000</span>  <span class="fl">7.3333333</span>  <span class="fl">6.5833333</span>  <span class="fl">6.0666667</span>  <span class="fl">5.9500000</span>  <span class="fl">5.1166667</span>  <span class="fl">3.6000000</span>  <span class="fl">3.3000000</span>  <span class="fl">3.5666667</span> </div>
<div class="sourceLine" id="cb30-15" data-line-number="15">       V37        V38        V39        V40 </div>
<div class="sourceLine" id="cb30-16" data-line-number="16"> <span class="fl">2.4833333</span>  <span class="fl">1.5000000</span>  <span class="fl">1.1333333</span>  <span class="fl">0.5666667</span> </div></code></pre>
<hr />
<p><strong>SLIDE: Base Graphics</strong></p>
<ul>
<li>We’re doing all this work to try to <strong>GAIN INSIGHT INTO OUR DATA</strong></li>
<li><p><strong>VISUALISATION IS A KEY ROUTE TO INSIGHT</strong></p></li>
<li><code>R</code> has many graphics packages - some of which produce extremely beautiful images, or are tailored to a specific problem domain</li>
<li>The built-in graphics are known as <em>base graphics</em></li>
<li><p>They may not be as pretty, or as immediately suited for all circumstances as some other packages, but they are still very powerful</p></li>
</ul>
<hr />
<p><strong>SLIDE: Plotting - Interactive Demo</strong></p>
<ul>
<li><strong>IN THE SCRIPT</strong>
<ul>
<li><code>R</code>’s <strong><code>plot()</code> FUNCTION IS GENERAL AND WORKS FOR MANY KINDS OF DATA</strong></li>
<li><strong>RUN EACH LINE IN TURN</strong></li>
<li><strong>NOTE WHERE PLOTS SHOW</strong> (Plot window)</li>
<li>Opportunity to note: <strong>VARIABLES HELP READABILITY</strong></li>
<li><strong>USE ARROW BUTTONS</strong> to cycle through plots</li>
<li><strong>COMMIT CHANGES WHEN DONE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb31"><code class="sourceCode r"><div class="sourceLine" id="cb31-1" data-line-number="1"><span class="co"># Plot data summaries</span></div>
<div class="sourceLine" id="cb31-2" data-line-number="2"><span class="co"># Average inflammation by patient</span></div>
<div class="sourceLine" id="cb31-3" data-line-number="3"><span class="kw">plot</span>(avg_inflammation_patient)</div>
<div class="sourceLine" id="cb31-4" data-line-number="4"></div>
<div class="sourceLine" id="cb31-5" data-line-number="5"><span class="co"># Average inflammation per day</span></div>
<div class="sourceLine" id="cb31-6" data-line-number="6"><span class="kw">plot</span>(avg_inflammation_day)</div>
<div class="sourceLine" id="cb31-7" data-line-number="7"></div>
<div class="sourceLine" id="cb31-8" data-line-number="8"><span class="co"># Maximum inflammation per day</span></div>
<div class="sourceLine" id="cb31-9" data-line-number="9">max_inflammation_day &lt;-<span class="st"> </span><span class="kw">apply</span>(data, <span class="dv">2</span>, max)</div>
<div class="sourceLine" id="cb31-10" data-line-number="10"><span class="kw">plot</span>(max_inflammation_day)</div>
<div class="sourceLine" id="cb31-11" data-line-number="11"></div>
<div class="sourceLine" id="cb31-12" data-line-number="12"><span class="co"># Minimum inflammation per day</span></div>
<div class="sourceLine" id="cb31-13" data-line-number="13"><span class="kw">plot</span>(<span class="kw">apply</span>(data, <span class="dv">2</span>, min))</div>
<div class="sourceLine" id="cb31-14" data-line-number="14"></div>
<div class="sourceLine" id="cb31-15" data-line-number="15"><span class="co"># Show a historgram of average patient inflammation</span></div>
<div class="sourceLine" id="cb31-16" data-line-number="16"><span class="kw">hist</span>(avg_inflammation_patient)</div></code></pre>
<ul>
<li><strong>THE <code>hist()</code> FUNCTION PLOTS A HISTOGRAM OF INPUT DATA FREQUENCY/COUNT</strong>
<ul>
<li>The choice of bin sizes/<em>breaks</em> could be improved</li>
<li>We need to <strong>PROVIDE THE BOUNDARIES BETWEEN BINS</strong></li>
<li><strong>IN THE CONSOLE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb32"><code class="sourceCode r"><div class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">hist</span>(avg_inflammation_patient, <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>))</div></code></pre>
<ul>
<li>We’d have to <strong>TYPE IN A LOT OF NUMBERS</strong> to get smaller breaks, which is <strong>SLOW</strong>
<ul>
<li>The <code>seq()</code> function generates a sequence of numbers for us</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb33"><code class="sourceCode r"><div class="sourceLine" id="cb33-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">8</span>)</div>
<div class="sourceLine" id="cb33-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span></div>
<div class="sourceLine" id="cb33-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">hist</span>(avg_inflammation_patient, <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">8</span>))</div></code></pre>
<ul>
<li>We can <strong>SET THE INTERVAL OF THE SEQUENCE</strong></li>
</ul>
<pre class="sourceCode r" id="cb34"><code class="sourceCode r"><div class="sourceLine" id="cb34-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">8</span>, <span class="dt">by=</span><span class="fl">0.2</span>)</div>
<div class="sourceLine" id="cb34-2" data-line-number="2"> [<span class="dv">1</span>] <span class="fl">5.0</span> <span class="fl">5.2</span> <span class="fl">5.4</span> <span class="fl">5.6</span> <span class="fl">5.8</span> <span class="fl">6.0</span> <span class="fl">6.2</span> <span class="fl">6.4</span> <span class="fl">6.6</span> <span class="fl">6.8</span> <span class="fl">7.0</span> <span class="fl">7.2</span> <span class="fl">7.4</span> <span class="fl">7.6</span> <span class="fl">7.8</span> <span class="fl">8.0</span></div>
<div class="sourceLine" id="cb34-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">hist</span>(avg_inflammation_patient, <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">8</span>, <span class="dt">by=</span><span class="fl">0.2</span>))</div></code></pre>
<ul>
<li><strong>IN THE SCRIPT</strong>
<ul>
<li>Add a line with the histogram for average patient inflammation</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb35"><code class="sourceCode r"><div class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># Show a historgram of average patient inflammation</span></div>
<div class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">hist</span>(avg_inflammation_patient, <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">8</span>, <span class="dt">by=</span><span class="fl">0.2</span>))</div></code></pre>
<ul>
<li><strong>IN THE SCRIPT</strong>
<ul>
<li>Demonstrate changing the input file</li>
<li><strong>CHANGING FILENAME IN A SCRIPT IS QUICKER THAN RETYPING ALL THE COMMANDS</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Challenge 05</strong></p>
<pre class="sourceCode r" id="cb36"><code class="sourceCode r"><div class="sourceLine" id="cb36-1" data-line-number="1"><span class="co"># Plot standard deviation by day</span></div>
<div class="sourceLine" id="cb36-2" data-line-number="2"><span class="kw">plot</span>(<span class="kw">apply</span>(data, <span class="dv">2</span>, sd))</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: 04. Data Structures in <code>R</code></strong></p>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>In this section, you’ll be learning about the data types in <code>R</code>: <strong>WHAT DATA IS</strong></li>
<li>You’ll also be learning about the data <em>structures</em>: <strong>WHAT DATA IS BUILT INTO - HOW IT IS ARRANGED</strong></li>
<li>And you’ll also learn how to find out what type/structure a particular piece of data has</li>
<li>Putting it together, you’ll see how <code>R</code>’s data types and structures relate to the types of data that you work with, yourself.</li>
</ul>
<hr />
<p><strong>SLIDE: Data Types and Structures in <code>R</code></strong></p>
<ul>
<li><code>R</code> is <strong>MOSTLY USED FOR DATA ANALYSIS</strong></li>
<li><code>R</code> is set up with key, core data types designed to help you work with your own data</li>
<li>A lot of the time, <code>R</code> focuses on tabular data (like our cat example)</li>
<li><p><strong>INTERACTIVE DEMO</strong></p></li>
<li><strong>SWITCH TO THE CONSOLE</strong> (Establish that <code>cats</code> is available as a variable)</li>
<li><p>If you type <code>cats</code>, you get a nice tabular representation of your data</p></li>
</ul>
<pre class="sourceCode r" id="cb37"><code class="sourceCode r"><div class="sourceLine" id="cb37-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>cats</div>
<div class="sourceLine" id="cb37-2" data-line-number="2">    coat weight likes_string</div>
<div class="sourceLine" id="cb37-3" data-line-number="3"><span class="dv">1</span> calico    <span class="fl">2.1</span>            <span class="dv">1</span></div>
<div class="sourceLine" id="cb37-4" data-line-number="4"><span class="dv">2</span>  black    <span class="fl">5.0</span>            <span class="dv">0</span></div>
<div class="sourceLine" id="cb37-5" data-line-number="5"><span class="dv">3</span>  tabby    <span class="fl">3.2</span>            <span class="dv">1</span></div></code></pre>
<ul>
<li><strong>THINK ABOUT THE DATA TYPES</strong> Are they all the same?
<ul>
<li><strong>NO</strong> <code>coat</code> is text; <code>weight</code> is some real value (in kg or pounds, maybe), and <code>likes_string</code> looks like it should be <code>TRUE</code>/<code>FALSE</code></li>
<li><strong>DOES IT MAKE SENSE TO WORK WITH THEM AS IF THEY’RE THE SAME THING?</strong> (No)</li>
</ul></li>
<li><strong>EXTRACT A COLUMN FROM A TABLE</strong>
<ul>
<li>Use <code>$</code> notation in the console</li>
<li><strong>NOTE THE AUTOCOMPLETION</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb38"><code class="sourceCode r"><div class="sourceLine" id="cb38-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>cats<span class="op">$</span>weight</div>
<div class="sourceLine" id="cb38-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">2.1</span> <span class="fl">5.0</span> <span class="fl">3.2</span></div></code></pre>
<ul>
<li><strong>WHAT DID <code>R</code> RETURN?</strong>
<ul>
<li>A <em>vector</em> (1D ordered collection) of numbers</li>
</ul></li>
<li><strong>WE CAN OPERATE ON THESE <em>VECTORS</em> </strong>
<ul>
<li><em>Vectors</em> are an important concept, and <code>R</code> is largely built so that operations on vectors are central to data analysis.</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb39"><code class="sourceCode r"><div class="sourceLine" id="cb39-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>cats<span class="op">$</span>weight <span class="op">+</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb39-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">4.1</span> <span class="fl">7.0</span> <span class="fl">5.2</span></div></code></pre>
<ul>
<li><strong>WHAT ABOUT OTHER COLUMNS?</strong></li>
</ul>
<pre class="sourceCode r" id="cb40"><code class="sourceCode r"><div class="sourceLine" id="cb40-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>cats<span class="op">$</span>coat</div>
<div class="sourceLine" id="cb40-2" data-line-number="2">[<span class="dv">1</span>] calico black  tabby </div>
<div class="sourceLine" id="cb40-3" data-line-number="3">Levels<span class="op">:</span><span class="st"> </span>black calico tabby</div></code></pre>
<ul>
<li><strong>WHAT DID <code>R</code> RETURN?</strong>
<ul>
<li>A <em>vector</em> of <em>levels</em></li>
<li>We’ll talk about these in more detail shortly, but the key point is that <code>R</code> <strong>DOESN’T THINK THEY’RE ONLY WORDS</strong> - it <strong>THINKS THEY’RE NAMED CATEGORIES OF OBJECT</strong>. <code>R</code> is assuming that you mean to import <em>data</em></li>
<li>We can operate on this vector, too (<strong>EXPLAIN <code>paste()</code></strong>)</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb41"><code class="sourceCode r"><div class="sourceLine" id="cb41-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;My cat is&quot;</span>, cats<span class="op">$</span>coat)</div>
<div class="sourceLine" id="cb41-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">&quot;My cat is calico&quot;</span> <span class="st">&quot;My cat is black&quot;</span>  <span class="st">&quot;My cat is tabby&quot;</span> </div></code></pre>
<ul>
<li><strong>WHAT HAPPENS NEXT?</strong></li>
</ul>
<pre class="sourceCode r" id="cb42"><code class="sourceCode r"><div class="sourceLine" id="cb42-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>cats<span class="op">$</span>weight <span class="op">+</span><span class="st"> </span>cats<span class="op">$</span>coat</div>
<div class="sourceLine" id="cb42-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span></div>
<div class="sourceLine" id="cb42-3" data-line-number="3">Warning message<span class="op">:</span></div>
<div class="sourceLine" id="cb42-4" data-line-number="4">In <span class="kw">Ops.factor</span>(cats<span class="op">$</span>weight, cats<span class="op">$</span>coat) <span class="op">:</span><span class="st"> </span>‘<span class="op">+</span>’ not meaningful <span class="cf">for</span> factors</div></code></pre>
<ul>
<li>You probably already realised that wasn’t going to work, because adding “calico” to “2.1” is nonsense.</li>
<li><strong>THESE DATA TYPES ARE NOT COMPATIBLE</strong> for addition</li>
<li><code>R</code>’s data types reflect the ways in which data is expected to interact</li>
<li><strong>UNDERSTANDING HOW YOUR DATA MAP TO <code>R</code>’s DATA TYPES IS KEY</strong>
<ul>
<li>It’s very important to understand how <code>R</code> sees your data (you want <code>R</code> to see your data the same way you do)</li>
<li>Many problems in <code>R</code> come down to incompatibilities between data and data types.</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: What Data Types Do You Expect?</strong></p>
<ul>
<li><strong>ASK THE STUDENTS</strong>
<ul>
<li>What data types would you expect to see?</li>
<li>What data types do you think you would <strong>WANT OR NEED</strong>, from your own experience?</li>
</ul></li>
<li><strong>SPEND A COUPLE OF MINUTES ON THIS</strong>
<ul>
<li>The difference between a <em>data type</em> and a <em>data structure</em></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Data Types in <code>R</code></strong></p>
<ul>
<li><code>R</code>’s data <em>types</em> are <em>atomic</em>: they are <strong>FUNDAMENTAL AND EVERYTHING ELSE IS BUILT UP FROM THEM</strong>, like matter is built up from atoms
<ul>
<li>In particular, all the data <em>structures</em> are built up from data <em>types</em></li>
</ul></li>
<li>There are only <strong>FIVE DATA TYPES</strong> in <code>R</code> (though one is split into two…)
<ul>
<li><strong>logical</strong>: Boolean, True/False (also <code>1</code>/<code>0</code>)</li>
<li><strong>numeric</strong>: anything that’s a number on the number line; two types of number are supported: <code>integer</code> and <code>double</code> (real)</li>
<li><strong>complex</strong>: complex numbers, defined on the 2D plane</li>
<li><strong>character</strong>: text data - readable symbols</li>
<li><strong>raw</strong>: binary data (we’ll not be dealing with this)</li>
</ul></li>
<li><strong>LET’S LEARN A BIT MORE ABOUT THEM IN THE DEMO</strong></li>
<li><strong>ENTER DEFINITIONS INTO THE SCRIPT</strong>
<ul>
<li>Covering the major data types</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb43"><code class="sourceCode r"><div class="sourceLine" id="cb43-1" data-line-number="1"><span class="co"># Some variables of several data types</span></div>
<div class="sourceLine" id="cb43-2" data-line-number="2">truth &lt;-<span class="st"> </span><span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb43-3" data-line-number="3">lie &lt;-<span class="st"> </span><span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb43-4" data-line-number="4">i &lt;-<span class="st"> </span>3L</div>
<div class="sourceLine" id="cb43-5" data-line-number="5">d &lt;-<span class="st"> </span><span class="fl">3.0</span></div>
<div class="sourceLine" id="cb43-6" data-line-number="6">c &lt;-<span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span>0i</div>
<div class="sourceLine" id="cb43-7" data-line-number="7">txt &lt;-<span class="st"> &quot;TRUE&quot;</span></div></code></pre>
<ul>
<li><strong>EXECUTE THE VARIABLE DEFINITIONS</strong>
<ul>
<li>Select the definition lines</li>
<li>Click on <code>Run</code></li>
<li><strong>OBSERVE THAT THE LINES ARE RUN IN THE CONSOLE</strong></li>
<li><strong>OBSERVE THAT THE VALUES ARE DEFINED IN THE ENVIRONMENT</strong></li>
<li>Note the difference between <code>Data</code> and <code>Values</code> in the environment</li>
<li>Note that the script is updated in the <code>Git</code> tab: commit the change</li>
</ul></li>
<li><strong>USE <code>typeof()</code> TO FIND THE TYPE OF A VARIABLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb44"><code class="sourceCode r"><div class="sourceLine" id="cb44-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(i)</div>
<div class="sourceLine" id="cb44-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></div>
<div class="sourceLine" id="cb44-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(c)</div>
<div class="sourceLine" id="cb44-4" data-line-number="4">[<span class="dv">1</span>] <span class="st">&quot;complex&quot;</span></div>
<div class="sourceLine" id="cb44-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(d)</div>
<div class="sourceLine" id="cb44-6" data-line-number="6">[<span class="dv">1</span>] <span class="st">&quot;double&quot;</span></div></code></pre>
<ul>
<li><strong>TO TEST IF A DATA ITEM HAS A TYPE, USE <code>is.&lt;type&gt;()</code></strong></li>
</ul>
<pre class="sourceCode r" id="cb45"><code class="sourceCode r"><div class="sourceLine" id="cb45-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.numeric</span>(<span class="dv">3</span>)</div>
<div class="sourceLine" id="cb45-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb45-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.numeric</span>(d)</div>
<div class="sourceLine" id="cb45-4" data-line-number="4">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb45-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.double</span>(i)</div>
<div class="sourceLine" id="cb45-6" data-line-number="6">[<span class="dv">1</span>] <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb45-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.integer</span>(d)</div>
<div class="sourceLine" id="cb45-8" data-line-number="8">[<span class="dv">1</span>] <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb45-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.numeric</span>(txt)</div>
<div class="sourceLine" id="cb45-10" data-line-number="10">[<span class="dv">1</span>] <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb45-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.character</span>(txt)</div>
<div class="sourceLine" id="cb45-12" data-line-number="12">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb45-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.character</span>(truth)</div>
<div class="sourceLine" id="cb45-14" data-line-number="14">[<span class="dv">1</span>] <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb45-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.logical</span>(truth)</div>
<div class="sourceLine" id="cb45-16" data-line-number="16">[<span class="dv">1</span>] <span class="ot">TRUE</span></div></code></pre>
<ul>
<li><strong>THE INTEGER, COMPLEX, AND DOUBLE ARE EQUAL</strong> even if they’re not the same data type
<ul>
<li>numbers are comparable, regardless of data type</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb46"><code class="sourceCode r"><div class="sourceLine" id="cb46-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>i <span class="op">==</span><span class="st"> </span>c</div>
<div class="sourceLine" id="cb46-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb46-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>i <span class="op">==</span><span class="st"> </span>d</div>
<div class="sourceLine" id="cb46-4" data-line-number="4">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb46-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>d <span class="op">==</span><span class="st"> </span>c</div>
<div class="sourceLine" id="cb46-6" data-line-number="6">[<span class="dv">1</span>] <span class="ot">TRUE</span></div></code></pre>
<ul>
<li><strong>INTEGER, COMPLEX AND DOUBLE ARE NOT ALL <code>numeric</code></strong> though</li>
</ul>
<pre class="sourceCode r" id="cb47"><code class="sourceCode r"><div class="sourceLine" id="cb47-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.numeric</span>(i)</div>
<div class="sourceLine" id="cb47-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb47-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.numeric</span>(c)</div>
<div class="sourceLine" id="cb47-4" data-line-number="4">[<span class="dv">1</span>] <span class="ot">FALSE</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 06</strong></p>
<ul>
<li>Let the students work for a couple of minutes, then demonstrate.</li>
</ul>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: FIVE COMMON <code>R</code> DATA STRUCTURES</strong></p>
<ul>
<li>These are perhaps the five data types you’ll come across most often in <code>R</code></li>
<li>We’ll deal with them through examples</li>
<li><p><strong>INTERACTIVE DEMO IN SCRIPT</strong></p></li>
<li><strong>VECTORS</strong>
<ul>
<li>These are the <strong>MOST COMMON DATA STRUCTURE</strong></li>
<li>Vectors can contain <strong>ONLY A SINGLE DATA TYPE</strong> (<em>atomic vectors</em>)</li>
<li><strong>ADD CODE TO SCRIPT</strong> then use <code>Run</code> to run in console</li>
<li>To create a vector <strong>USE THE <code>c()</code> FUNCTION</strong> (<code>c()</code> is <code>combine</code>; use <code>?c</code>)</li>
<li>First we define an <strong>ATOMIC VECTOR OF NUMBERS</strong> - each element is an integer</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb48"><code class="sourceCode r"><div class="sourceLine" id="cb48-1" data-line-number="1"><span class="co"># Define an integer vector</span></div>
<div class="sourceLine" id="cb48-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">45</span>, <span class="dv">33</span>)</div></code></pre>
<ul>
<li>We can use some <code>R</code> functions to find out more about this variable
<ul>
<li><strong>RUN CODE IN CONSOLE</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb49"><code class="sourceCode r"><div class="sourceLine" id="cb49-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(x)</div>
<div class="sourceLine" id="cb49-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">4</span></div>
<div class="sourceLine" id="cb49-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(x)</div>
<div class="sourceLine" id="cb49-4" data-line-number="4">[<span class="dv">1</span>] <span class="st">&quot;double&quot;</span></div>
<div class="sourceLine" id="cb49-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(x)</div>
<div class="sourceLine" id="cb49-6" data-line-number="6"> num [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="dv">10</span> <span class="dv">12</span> <span class="dv">45</span> <span class="dv">33</span></div></code></pre>
<ul>
<li>The <code>str()</code> function <strong>REPORTS THE STRUCTURE OF A VARIABLE</strong>
<ul>
<li>Here, <code>num</code> means ‘numeric’; <code>[1:4]</code> means there are four elements; the elements are listed</li>
<li><strong>NOTE THAT THIS INFORMATION IS IN THE ENVIRONMENT TAB</strong></li>
</ul></li>
<li><strong>DEFINE A SECOND VECTOR IN THE SCRIPT</strong></li>
</ul>
<pre class="sourceCode r" id="cb50"><code class="sourceCode r"><div class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># Define a vector</span></div>
<div class="sourceLine" id="cb50-2" data-line-number="2">xx &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&#39;a&#39;</span>)</div></code></pre>
<ul>
<li>In the Environment tab, you can see <strong>THIS IS A CHARACTER VECTOR</strong></li>
</ul>
<pre class="sourceCode r" id="cb51"><code class="sourceCode r"><div class="sourceLine" id="cb51-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(xx)</div>
<div class="sourceLine" id="cb51-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">3</span></div>
<div class="sourceLine" id="cb51-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(xx)</div>
<div class="sourceLine" id="cb51-4" data-line-number="4">[<span class="dv">1</span>] <span class="st">&quot;character&quot;</span></div>
<div class="sourceLine" id="cb51-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(xx)</div>
<div class="sourceLine" id="cb51-6" data-line-number="6"> chr [<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;a&quot;</span></div></code></pre>
<ul>
<li><strong>IS THE TYPE OF THE VECTOR WHAT YOU EXPECTED?</strong>
<ul>
<li>This is one of the things that trips people up with <code>R</code> - they think their data is of one type, but <code>R</code> thinks it makes more sense to have it as another type</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Challenge 07</strong></p>
<ul>
<li>Let the students work for a couple of minutes, then demonstrate.</li>
</ul>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Coercion</strong></p>
<ul>
<li><em>Coercion</em> is what happens when you <strong>COVERT ONE DATA TYPE INTO ANOTHER</strong></li>
<li>If <code>R</code> thinks it needs to, it will <strong>COERCE DATA IMPLICITLY</strong> without telling you</li>
<li>There is a set order for coercion
<ul>
<li><code>logical</code> can be coerced to <code>integer</code>, but <code>integer</code> cannot be coerced to <code>logical</code></li>
<li>That’s because <code>integer</code> can describe all <code>logical</code> values, but not <em>vice versa</em></li>
<li>Everything can be represented as a <code>character</code>, so that’s the fallback position for <code>R</code></li>
</ul></li>
<li><strong>IF THERE’S A FORMATTING PROBLEM IN YOUR DATA, <code>R</code> MIGHT CONVERT THE TYPE TO COPE</strong>
<ul>
<li><code>R</code> will choose the simplest data type that can represent all items in the vector</li>
</ul></li>
<li><strong>INTERACTIVE DEMO IN CONSOLE</strong> More useful things to do with vectors</li>
<li>You can (usually) <strong>COERCE VECTORS MANUALLY</strong> with <code>as.&lt;type&gt;()</code></li>
</ul>
<pre class="sourceCode r" id="cb52"><code class="sourceCode r"><div class="sourceLine" id="cb52-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.character</span>(x)</div>
<div class="sourceLine" id="cb52-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">&quot;10&quot;</span> <span class="st">&quot;12&quot;</span> <span class="st">&quot;45&quot;</span> <span class="st">&quot;33&quot;</span></div>
<div class="sourceLine" id="cb52-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.complex</span>(x)</div>
<div class="sourceLine" id="cb52-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">10</span><span class="op">+</span>0i <span class="dv">12</span><span class="op">+</span>0i <span class="dv">45</span><span class="op">+</span>0i <span class="dv">33</span><span class="op">+</span>0i</div>
<div class="sourceLine" id="cb52-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.logical</span>(x)</div>
<div class="sourceLine" id="cb52-6" data-line-number="6">[<span class="dv">1</span>] <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb52-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>xx</div>
<div class="sourceLine" id="cb52-8" data-line-number="8">[<span class="dv">1</span>] <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;a&quot;</span></div>
<div class="sourceLine" id="cb52-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.numeric</span>(xx)</div>
<div class="sourceLine" id="cb52-10" data-line-number="10">[<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span> <span class="ot">NA</span></div>
<div class="sourceLine" id="cb52-11" data-line-number="11">Warning message<span class="op">:</span></div>
<div class="sourceLine" id="cb52-12" data-line-number="12">NAs introduced by coercion </div>
<div class="sourceLine" id="cb52-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.logical</span>(xx)</div>
<div class="sourceLine" id="cb52-14" data-line-number="14">[<span class="dv">1</span>] <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span></div></code></pre>
<ul>
<li>You can generate <strong>NUMBER SEQUENCES</strong> as vectors
<ul>
<li>The <code>seq()</code> function returns a vector</li>
<li>As does the <code>:</code> operator</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb53"><code class="sourceCode r"><div class="sourceLine" id="cb53-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">10</span>)</div>
<div class="sourceLine" id="cb53-2" data-line-number="2"> [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span></div>
<div class="sourceLine" id="cb53-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>)</div>
<div class="sourceLine" id="cb53-4" data-line-number="4"> [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span></div>
<div class="sourceLine" id="cb53-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">35</span>, <span class="dv">40</span>, <span class="dt">by=</span><span class="fl">0.5</span>)</div>
<div class="sourceLine" id="cb53-6" data-line-number="6"> [<span class="dv">1</span>] <span class="fl">35.0</span> <span class="fl">35.5</span> <span class="fl">36.0</span> <span class="fl">36.5</span> <span class="fl">37.0</span> <span class="fl">37.5</span> <span class="fl">38.0</span> <span class="fl">38.5</span> <span class="fl">39.0</span> <span class="fl">39.5</span> <span class="fl">40.0</span></div>
<div class="sourceLine" id="cb53-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></div>
<div class="sourceLine" id="cb53-8" data-line-number="8"> [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span></div>
<div class="sourceLine" id="cb53-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span><span class="op">:</span><span class="dv">8</span></div>
<div class="sourceLine" id="cb53-10" data-line-number="10">[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> </div></code></pre>
<ul>
<li>You can <strong>APPEND ELEMENTS TO A VECTOR WITH <code>c()</code></strong></li>
</ul>
<pre class="sourceCode r" id="cb54"><code class="sourceCode r"><div class="sourceLine" id="cb54-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb54-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">10</span> <span class="dv">12</span> <span class="dv">45</span> <span class="dv">33</span></div>
<div class="sourceLine" id="cb54-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">c</span>(x, <span class="dv">57</span>)</div>
<div class="sourceLine" id="cb54-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">10</span> <span class="dv">12</span> <span class="dv">45</span> <span class="dv">33</span> <span class="dv">57</span></div>
<div class="sourceLine" id="cb54-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb54-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">10</span> <span class="dv">12</span> <span class="dv">45</span> <span class="dv">33</span></div>
<div class="sourceLine" id="cb54-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="kw">c</span>(x, <span class="dv">57</span>)</div>
<div class="sourceLine" id="cb54-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb54-9" data-line-number="9">[<span class="dv">1</span>] <span class="dv">10</span> <span class="dv">12</span> <span class="dv">45</span> <span class="dv">33</span> <span class="dv">57</span></div></code></pre>
<ul>
<li>There are useful <strong>FUNCTIONS TO GET INFORMATION ABOUT A VECTOR</strong></li>
</ul>
<pre class="sourceCode r" id="cb55"><code class="sourceCode r"><div class="sourceLine" id="cb55-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">10</span></div>
<div class="sourceLine" id="cb55-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(x)</div>
<div class="sourceLine" id="cb55-3" data-line-number="3">[<span class="dv">1</span>]  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span></div>
<div class="sourceLine" id="cb55-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(x)</div>
<div class="sourceLine" id="cb55-5" data-line-number="5">[<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></div>
<div class="sourceLine" id="cb55-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(x, <span class="dt">n=</span><span class="dv">2</span>)</div>
<div class="sourceLine" id="cb55-7" data-line-number="7">[<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">1</span></div></code></pre>
<ul>
<li>You can <strong>GIVE VECTOR ELEMENTS NAMES</strong>
<ul>
<li>They’re then referred to as <em>named vectors</em></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb56"><code class="sourceCode r"><div class="sourceLine" id="cb56-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></div>
<div class="sourceLine" id="cb56-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(x)</div>
<div class="sourceLine" id="cb56-3" data-line-number="3"><span class="ot">NULL</span></div>
<div class="sourceLine" id="cb56-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(x)</div>
<div class="sourceLine" id="cb56-5" data-line-number="5"> int [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb56-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(x) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)</div>
<div class="sourceLine" id="cb56-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb56-8" data-line-number="8">a b c d </div>
<div class="sourceLine" id="cb56-9" data-line-number="9"><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> </div>
<div class="sourceLine" id="cb56-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(x)</div>
<div class="sourceLine" id="cb56-11" data-line-number="11"> Named int [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb56-12" data-line-number="12"> <span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">&quot;names&quot;</span>)=<span class="st"> </span>chr [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span></div></code></pre>
<hr />
<p><strong>SLIDE: Factors</strong></p>
<ul>
<li>In general <strong>DATA COMES AS ONE OF TWO TYPES</strong>
<ul>
<li><em>Quantitative data</em> represents measurable values. These are usually either <strong>CONTINUOUS</strong> (real values like a height in centimetres) or a <strong>COUNT</strong> (like number of beans in a tin).</li>
<li><em>Categorical</em> data representing <strong>DISCRETE GROUPS</strong>, which can be <strong>UNORDERED</strong> (like “types of computer”; “educational establishments”) or <strong>ORDERED</strong> (like floors of a building, or grades in school)</li>
</ul></li>
<li><strong>THIS DISTINCTION IS CRITICAL IN MANY STATISTICAL/ANALYTICAL METHODS</strong></li>
<li><p><code>R</code> <strong>WAS MADE FOR STATISTICS</strong> so has a special way of dealing with the difference</p></li>
<li><strong>FACTORS ARE SPECIAL VECTORS REPRESENTING <em>CATEGORICAL</em> DATA</strong>
<ul>
<li>Factors are stored as <strong>VECTORS OF LABELLED INTEGERS</strong></li>
<li>Factors <strong>CANNOT BE TREATED AS TEXT</strong></li>
</ul></li>
<li><strong>CREATE FACTOR IN SCRIPT</strong>
<ul>
<li>We create a <strong>FACTOR WITH THREE ELEMENTS</strong></li>
<li><code>Run</code> the line</li>
<li>Commit the change</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb57"><code class="sourceCode r"><div class="sourceLine" id="cb57-1" data-line-number="1"><span class="co"># Create a factor with three elements</span></div>
<div class="sourceLine" id="cb57-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>f &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;no&quot;</span>, <span class="st">&quot;yes&quot;</span>, <span class="st">&quot;no&quot;</span>))</div></code></pre>
<ul>
<li><strong>INSPECT THE FACTOR IN THE CONSOLE</strong>
<ul>
<li>When we look at the <em>structure</em> of the vector, it reports <strong>TWO LEVELS</strong>: <code>&quot;yes&quot;</code> and <code>&quot;no&quot;</code></li>
<li>It also reports a list of values: <code>1 2 1</code></li>
<li>There is a mapping <code>&quot;no&quot; -&gt; 1</code> and <code>&quot;yes&quot; -&gt; 2</code></li>
<li>The <strong>VECTOR STORES INTEGERS <code>1</code> and <code>2</code>, BUT THESE ARE LABELLED <code>&quot;no&quot;</code> and <code>&quot;yes&quot;</code></strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb58"><code class="sourceCode r"><div class="sourceLine" id="cb58-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(f)</div>
<div class="sourceLine" id="cb58-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">3</span></div>
<div class="sourceLine" id="cb58-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(f)</div>
<div class="sourceLine" id="cb58-4" data-line-number="4"> Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;no&quot;</span>,<span class="st">&quot;yes&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span></div>
<div class="sourceLine" id="cb58-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(f)</div>
<div class="sourceLine" id="cb58-6" data-line-number="6">[<span class="dv">1</span>] <span class="st">&quot;no&quot;</span>  <span class="st">&quot;yes&quot;</span></div>
<div class="sourceLine" id="cb58-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>f</div>
<div class="sourceLine" id="cb58-8" data-line-number="8">[<span class="dv">1</span>] no  yes no </div>
<div class="sourceLine" id="cb58-9" data-line-number="9">Levels<span class="op">:</span><span class="st"> </span>no yes</div></code></pre>
<ul>
<li><strong>IN OUR <code>cats</code> DATA THE COAT WAS STORED AS A FACTOR</strong></li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>The <code>class()</code> function <strong>IDENTIFIES DATA STRUCTURES</strong></li>
<li><strong>NOTE THAT BY DEFAULT FACTORS ARE NUMBERED IN ALPHABETICAL ORDER OF LABEL</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb59"><code class="sourceCode r"><div class="sourceLine" id="cb59-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>cats<span class="op">$</span>coat</div>
<div class="sourceLine" id="cb59-2" data-line-number="2">[<span class="dv">1</span>] calico black  tabby </div>
<div class="sourceLine" id="cb59-3" data-line-number="3">Levels<span class="op">:</span><span class="st"> </span>black calico tabby</div>
<div class="sourceLine" id="cb59-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(cats<span class="op">$</span>coat)</div>
<div class="sourceLine" id="cb59-5" data-line-number="5">[<span class="dv">1</span>] <span class="st">&quot;factor&quot;</span></div>
<div class="sourceLine" id="cb59-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(cats<span class="op">$</span>coat)</div>
<div class="sourceLine" id="cb59-7" data-line-number="7"> Factor w<span class="op">/</span><span class="st"> </span><span class="dv">3</span> levels <span class="st">&quot;black&quot;</span>,<span class="st">&quot;calico&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 08</strong></p>
<pre class="sourceCode r" id="cb60"><code class="sourceCode r"><div class="sourceLine" id="cb60-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>f &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;case&quot;</span>, <span class="st">&quot;control&quot;</span>, <span class="st">&quot;case&quot;</span>, <span class="st">&quot;control&quot;</span>, <span class="st">&quot;case&quot;</span>))</div>
<div class="sourceLine" id="cb60-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(f)</div>
<div class="sourceLine" id="cb60-3" data-line-number="3"> Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;case&quot;</span>,<span class="st">&quot;control&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span></div>
<div class="sourceLine" id="cb60-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>f &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;case&quot;</span>, <span class="st">&quot;control&quot;</span>, <span class="st">&quot;case&quot;</span>, <span class="st">&quot;control&quot;</span>, <span class="st">&quot;case&quot;</span>), <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;control&quot;</span>, <span class="st">&quot;case&quot;</span>))</div>
<div class="sourceLine" id="cb60-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(f)</div>
<div class="sourceLine" id="cb60-6" data-line-number="6"> Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;control&quot;</span>,<span class="st">&quot;case&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Matrices</strong></p>
<ul>
<li><em>Matrices</em> may be the <strong>MOST IMPORTANT DATA STRUCTURE IN NUMERICAL ANALYSIS</strong>, central to pretty much any statistical operation</li>
<li><strong>THEY GET THEIR OWN SPECIAL DATA STRUCTURE IN <code>R</code></strong></li>
<li><p>They are 2D <code>vector</code>s (so contain atomic values)</p></li>
<li><strong>CREATE MATRICES IN SCRIPT</strong>
<ul>
<li><code>Run</code> the lines when done</li>
<li>Commit the changes</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb61"><code class="sourceCode r"><div class="sourceLine" id="cb61-1" data-line-number="1"><span class="co"># Create matrix of zeroes</span></div>
<div class="sourceLine" id="cb61-2" data-line-number="2">m1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dt">ncol =</span> <span class="dv">6</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</div>
<div class="sourceLine" id="cb61-3" data-line-number="3"></div>
<div class="sourceLine" id="cb61-4" data-line-number="4"><span class="co"># Create matrix of numbers 1 and 2</span></div>
<div class="sourceLine" id="cb61-5" data-line-number="5">m2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">nrow =</span> <span class="dv">4</span>)</div></code></pre>
<ul>
<li><strong>INSPECT THE RESULTS IN THE CONSOLE</strong>
<ul>
<li><code>ncol</code> and <code>nrow</code> define the size of the matrix</li>
<li>providing a single value as the first argument fills the matrix with that value</li>
<li>The <code>length()</code> of a matrix <strong>IS THE TOTAL NUMBER OF ELEMENTS</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb62"><code class="sourceCode r"><div class="sourceLine" id="cb62-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(m1)</div>
<div class="sourceLine" id="cb62-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">&quot;matrix&quot;</span></div>
<div class="sourceLine" id="cb62-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>m1</div>
<div class="sourceLine" id="cb62-4" data-line-number="4">     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>]</div>
<div class="sourceLine" id="cb62-5" data-line-number="5">[<span class="dv">1</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb62-6" data-line-number="6">[<span class="dv">2</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb62-7" data-line-number="7">[<span class="dv">3</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb62-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(m1)</div>
<div class="sourceLine" id="cb62-9" data-line-number="9"> num [<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>] <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> ...</div>
<div class="sourceLine" id="cb62-10" data-line-number="10"> <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(m1)</div>
<div class="sourceLine" id="cb62-11" data-line-number="11">[<span class="dv">1</span>] <span class="dv">18</span></div></code></pre>
<ul>
<li><strong>PROVIDING TWO VALUES TO THE FIRST ARGUMENT</strong> fills the matrix, too
<ul>
<li>So long as the <strong>LENGTH OF THE MATRIX IS A MULTIPLE OF THE INPUT LENGTH</strong></li>
<li>We can <strong>INDEX AND SLICE</strong> just like before</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb63"><code class="sourceCode r"><div class="sourceLine" id="cb63-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>m2</div>
<div class="sourceLine" id="cb63-2" data-line-number="2">     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>]</div>
<div class="sourceLine" id="cb63-3" data-line-number="3">[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">1</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb63-4" data-line-number="4">[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb63-5" data-line-number="5">[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">1</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb63-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>m2[<span class="dv">1</span>, ]</div>
<div class="sourceLine" id="cb63-7" data-line-number="7">[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span></div>
<div class="sourceLine" id="cb63-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span>m2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span><span class="op">:</span><span class="dv">4</span>]</div>
<div class="sourceLine" id="cb63-9" data-line-number="9">     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</div>
<div class="sourceLine" id="cb63-10" data-line-number="10">[<span class="dv">1</span>,]    <span class="dv">2</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb63-11" data-line-number="11">[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 09 (5min)</strong></p>
<pre class="sourceCode r" id="cb64"><code class="sourceCode r"><div class="sourceLine" id="cb64-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">10</span>)</div>
<div class="sourceLine" id="cb64-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>m</div>
<div class="sourceLine" id="cb64-3" data-line-number="3">     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>]</div>
<div class="sourceLine" id="cb64-4" data-line-number="4">[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">6</span>   <span class="dv">11</span>   <span class="dv">16</span>   <span class="dv">21</span>   <span class="dv">26</span>   <span class="dv">31</span>   <span class="dv">36</span>   <span class="dv">41</span>    <span class="dv">46</span></div>
<div class="sourceLine" id="cb64-5" data-line-number="5">[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">7</span>   <span class="dv">12</span>   <span class="dv">17</span>   <span class="dv">22</span>   <span class="dv">27</span>   <span class="dv">32</span>   <span class="dv">37</span>   <span class="dv">42</span>    <span class="dv">47</span></div>
<div class="sourceLine" id="cb64-6" data-line-number="6">[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">8</span>   <span class="dv">13</span>   <span class="dv">18</span>   <span class="dv">23</span>   <span class="dv">28</span>   <span class="dv">33</span>   <span class="dv">38</span>   <span class="dv">43</span>    <span class="dv">48</span></div>
<div class="sourceLine" id="cb64-7" data-line-number="7">[<span class="dv">4</span>,]    <span class="dv">4</span>    <span class="dv">9</span>   <span class="dv">14</span>   <span class="dv">19</span>   <span class="dv">24</span>   <span class="dv">29</span>   <span class="dv">34</span>   <span class="dv">39</span>   <span class="dv">44</span>    <span class="dv">49</span></div>
<div class="sourceLine" id="cb64-8" data-line-number="8">[<span class="dv">5</span>,]    <span class="dv">5</span>   <span class="dv">10</span>   <span class="dv">15</span>   <span class="dv">20</span>   <span class="dv">25</span>   <span class="dv">30</span>   <span class="dv">35</span>   <span class="dv">40</span>   <span class="dv">45</span>    <span class="dv">50</span></div>
<div class="sourceLine" id="cb64-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>?matrix</div>
<div class="sourceLine" id="cb64-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">10</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb64-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>m</div>
<div class="sourceLine" id="cb64-12" data-line-number="12">     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>]</div>
<div class="sourceLine" id="cb64-13" data-line-number="13">[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>    <span class="dv">10</span></div>
<div class="sourceLine" id="cb64-14" data-line-number="14">[<span class="dv">2</span>,]   <span class="dv">11</span>   <span class="dv">12</span>   <span class="dv">13</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">16</span>   <span class="dv">17</span>   <span class="dv">18</span>   <span class="dv">19</span>    <span class="dv">20</span></div>
<div class="sourceLine" id="cb64-15" data-line-number="15">[<span class="dv">3</span>,]   <span class="dv">21</span>   <span class="dv">22</span>   <span class="dv">23</span>   <span class="dv">24</span>   <span class="dv">25</span>   <span class="dv">26</span>   <span class="dv">27</span>   <span class="dv">28</span>   <span class="dv">29</span>    <span class="dv">30</span></div>
<div class="sourceLine" id="cb64-16" data-line-number="16">[<span class="dv">4</span>,]   <span class="dv">31</span>   <span class="dv">32</span>   <span class="dv">33</span>   <span class="dv">34</span>   <span class="dv">35</span>   <span class="dv">36</span>   <span class="dv">37</span>   <span class="dv">38</span>   <span class="dv">39</span>    <span class="dv">40</span></div>
<div class="sourceLine" id="cb64-17" data-line-number="17">[<span class="dv">5</span>,]   <span class="dv">41</span>   <span class="dv">42</span>   <span class="dv">43</span>   <span class="dv">44</span>   <span class="dv">45</span>   <span class="dv">46</span>   <span class="dv">47</span>   <span class="dv">48</span>   <span class="dv">49</span>    <span class="dv">50</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Lists</strong></p>
<ul>
<li><p><code>list</code>s are like <em>vectors</em>, <strong>EXCEPT THEY CAN HOLD ANY DATA TYPE</strong></p></li>
<li><strong>CREATE NEW LIST IN SCRIPT</strong>
<ul>
<li><code>Run</code> from script</li>
<li>Commit to repo</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb65"><code class="sourceCode r"><div class="sourceLine" id="cb65-1" data-line-number="1"><span class="co"># Create a list</span></div>
<div class="sourceLine" id="cb65-2" data-line-number="2">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="st">&#39;a&#39;</span>, <span class="ot">TRUE</span>, <span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>), f)</div>
<div class="sourceLine" id="cb65-3" data-line-number="3"></div>
<div class="sourceLine" id="cb65-4" data-line-number="4"><span class="co"># Create a named list</span></div>
<div class="sourceLine" id="cb65-5" data-line-number="5">l_named &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="st">&quot;SWC&quot;</span>, <span class="dt">b =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</div></code></pre>
<ul>
<li><strong>INSPECT THE LISTS IN THE CONSOLE</strong>
<ul>
<li>The elements are identified with <strong>DOUBLE SQUARE BRACKETS</strong> <code>[[n]]</code></li>
<li>We use this <strong>LIKE ANY OTHER INDEX</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb66"><code class="sourceCode r"><div class="sourceLine" id="cb66-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(l)</div>
<div class="sourceLine" id="cb66-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">&quot;list&quot;</span></div>
<div class="sourceLine" id="cb66-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(l_named)</div>
<div class="sourceLine" id="cb66-4" data-line-number="4">[<span class="dv">1</span>] <span class="st">&quot;list&quot;</span></div>
<div class="sourceLine" id="cb66-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(l)</div>
<div class="sourceLine" id="cb66-6" data-line-number="6">List of <span class="dv">5</span></div>
<div class="sourceLine" id="cb66-7" data-line-number="7"> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="dv">1</span></div>
<div class="sourceLine" id="cb66-8" data-line-number="8"> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>chr <span class="st">&quot;a&quot;</span></div>
<div class="sourceLine" id="cb66-9" data-line-number="9"> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>logi <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb66-10" data-line-number="10"> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num [<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span></div>
<div class="sourceLine" id="cb66-11" data-line-number="11"> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;no&quot;</span>,<span class="st">&quot;yes&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span></div>
<div class="sourceLine" id="cb66-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(l_named)</div>
<div class="sourceLine" id="cb66-13" data-line-number="13">List of <span class="dv">2</span></div>
<div class="sourceLine" id="cb66-14" data-line-number="14"> <span class="op">$</span><span class="st"> </span>a<span class="op">:</span><span class="st"> </span>chr <span class="st">&quot;SWC&quot;</span></div>
<div class="sourceLine" id="cb66-15" data-line-number="15"> <span class="op">$</span><span class="st"> </span>b<span class="op">:</span><span class="st"> </span>int [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb66-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span>l</div>
<div class="sourceLine" id="cb66-17" data-line-number="17">[[<span class="dv">1</span>]]</div>
<div class="sourceLine" id="cb66-18" data-line-number="18">[<span class="dv">1</span>] <span class="dv">1</span></div>
<div class="sourceLine" id="cb66-19" data-line-number="19"></div>
<div class="sourceLine" id="cb66-20" data-line-number="20">[[<span class="dv">2</span>]]</div>
<div class="sourceLine" id="cb66-21" data-line-number="21">[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span></div>
<div class="sourceLine" id="cb66-22" data-line-number="22"></div>
<div class="sourceLine" id="cb66-23" data-line-number="23">[[<span class="dv">3</span>]]</div>
<div class="sourceLine" id="cb66-24" data-line-number="24">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb66-25" data-line-number="25"></div>
<div class="sourceLine" id="cb66-26" data-line-number="26">[[<span class="dv">4</span>]]</div>
<div class="sourceLine" id="cb66-27" data-line-number="27">     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</div>
<div class="sourceLine" id="cb66-28" data-line-number="28">[<span class="dv">1</span>,]    <span class="dv">0</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb66-29" data-line-number="29">[<span class="dv">2</span>,]    <span class="dv">0</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb66-30" data-line-number="30"></div>
<div class="sourceLine" id="cb66-31" data-line-number="31">[[<span class="dv">5</span>]]</div>
<div class="sourceLine" id="cb66-32" data-line-number="32">[<span class="dv">1</span>] no  yes no </div>
<div class="sourceLine" id="cb66-33" data-line-number="33">Levels<span class="op">:</span><span class="st"> </span>no yes</div>
<div class="sourceLine" id="cb66-34" data-line-number="34"><span class="op">&gt;</span><span class="st"> </span>l[[<span class="dv">4</span>]][<span class="dv">1</span>,<span class="dv">1</span>]</div>
<div class="sourceLine" id="cb66-35" data-line-number="35">[<span class="dv">1</span>] <span class="dv">0</span></div></code></pre>
<ul>
<li><strong>THE NAMED LIST IS SLIGHTLY DIFFERENT</strong>
<ul>
<li><strong>CAN STILL INDEX</strong></li>
<li>But can also <strong>NOW USE NAMES</strong> with <code>$</code></li>
<li><strong>INDICES CAN CHANGE IF DATA IS MODIFIED - NAMES ARE MORE ROBUST</strong></li>
<li><strong>NAMES CAN ALSO BE MORE DESCRIPTIVE (HELPS UNDERSTANDING)</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb67"><code class="sourceCode r"><div class="sourceLine" id="cb67-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>l_named</div>
<div class="sourceLine" id="cb67-2" data-line-number="2"><span class="op">$</span>a</div>
<div class="sourceLine" id="cb67-3" data-line-number="3">[<span class="dv">1</span>] <span class="st">&quot;SWC&quot;</span></div>
<div class="sourceLine" id="cb67-4" data-line-number="4"></div>
<div class="sourceLine" id="cb67-5" data-line-number="5"><span class="op">$</span>b</div>
<div class="sourceLine" id="cb67-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb67-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>l_named[[<span class="dv">1</span>]]</div>
<div class="sourceLine" id="cb67-8" data-line-number="8">[<span class="dv">1</span>] <span class="st">&quot;SWC&quot;</span></div>
<div class="sourceLine" id="cb67-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>l_named[[<span class="dv">2</span>]]</div>
<div class="sourceLine" id="cb67-10" data-line-number="10">[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb67-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>l_named<span class="op">$</span>a</div>
<div class="sourceLine" id="cb67-12" data-line-number="12">[<span class="dv">1</span>] <span class="st">&quot;SWC&quot;</span></div>
<div class="sourceLine" id="cb67-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span>l_named<span class="op">$</span>b</div>
<div class="sourceLine" id="cb67-14" data-line-number="14">[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb67-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(l_named)</div>
<div class="sourceLine" id="cb67-16" data-line-number="16">[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span></div></code></pre>
<hr />
<p><strong>SLIDE: Logical Indexing</strong></p>
<ul>
<li>We’ve seen <strong>INDEXING</strong> and <strong>NAMES</strong> as ways to get elements from variables <strong>SO LONG AS WE KNOW WHICH ELEMENTS WE WANT</strong></li>
<li><strong>LOGICAL INDEXING</strong> allows us to <strong>SPECIFY CONDITIONS FOR THE DATA WE WANT TO RECOVER</strong>
<ul>
<li>For instance, we might want <strong>ALL VALUES OVER A THRESHOLD</strong> or <strong>ALL NAMES STARTING WITH ‘S’</strong></li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong> (<code>data_structures.R</code>)
<ul>
<li>We create a vector of values as an example</li>
<li>We make a <strong>MASK OF TRUE/FALSE (i.e. logical)</strong> values</li>
<li><code>Run</code> the lines</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb68"><code class="sourceCode r"><div class="sourceLine" id="cb68-1" data-line-number="1"><span class="co"># Create a vector for logical indexing</span></div>
<div class="sourceLine" id="cb68-2" data-line-number="2">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span>)</div>
<div class="sourceLine" id="cb68-3" data-line-number="3">mask &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
<li>Now, when we <strong>USE THE MASK AS AN INDEX</strong> we only get <strong>THE ELEMENTS WHERE THE MASK IS TRUE</strong></li>
</ul>
<pre class="sourceCode r" id="cb69"><code class="sourceCode r"><div class="sourceLine" id="cb69-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>v</div>
<div class="sourceLine" id="cb69-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">5.4</span> <span class="fl">6.2</span> <span class="fl">7.1</span> <span class="fl">4.8</span> <span class="fl">7.5</span></div>
<div class="sourceLine" id="cb69-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>v[mask]</div>
<div class="sourceLine" id="cb69-4" data-line-number="4">[<span class="dv">1</span>] <span class="fl">5.4</span> <span class="fl">7.1</span> <span class="fl">7.5</span></div></code></pre>
<ul>
<li><strong>COMPARATORS IN <code>R</code> RETURN VECTORS OF TRUE/FALSE VALUES</strong>
<ul>
<li>These can be <strong>USED AS LOGICAL MASKS fOR DATA</strong></li>
<li>Comparators <strong>CAN BE COMBINED</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb70"><code class="sourceCode r"><div class="sourceLine" id="cb70-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>v</div>
<div class="sourceLine" id="cb70-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">5.4</span> <span class="fl">6.2</span> <span class="fl">7.1</span> <span class="fl">4.8</span> <span class="fl">7.5</span></div>
<div class="sourceLine" id="cb70-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span></div>
<div class="sourceLine" id="cb70-4" data-line-number="4">[<span class="dv">1</span>]  <span class="ot">TRUE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb70-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>v[v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>]</div>
<div class="sourceLine" id="cb70-6" data-line-number="6">[<span class="dv">1</span>] <span class="fl">5.4</span> <span class="fl">6.2</span> <span class="fl">4.8</span></div>
<div class="sourceLine" id="cb70-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span></div>
<div class="sourceLine" id="cb70-8" data-line-number="8">[<span class="dv">1</span>]  <span class="ot">TRUE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb70-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>v <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span></div>
<div class="sourceLine" id="cb70-10" data-line-number="10">[<span class="dv">1</span>]  <span class="ot">TRUE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb70-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>v[v <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>]</div>
<div class="sourceLine" id="cb70-12" data-line-number="12">[<span class="dv">1</span>] <span class="fl">5.4</span> <span class="fl">6.2</span></div>
<div class="sourceLine" id="cb70-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span>v <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">|</span><span class="st"> </span>v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span></div>
<div class="sourceLine" id="cb70-14" data-line-number="14">[<span class="dv">1</span>] <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb70-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span>v[v <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">|</span><span class="st"> </span>v <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>]</div>
<div class="sourceLine" id="cb70-16" data-line-number="16">[<span class="dv">1</span>] <span class="fl">5.4</span> <span class="fl">6.2</span> <span class="fl">7.1</span> <span class="fl">4.8</span> <span class="fl">7.5</span></div></code></pre>
<ul>
<li><strong>COMMIT CHANGES</strong></li>
</ul>
<hr />
<p><strong>SLIDE: 05. Dataframes</strong></p>
<ul>
<li>Dataframes are probably the most important thing you will ever learn about, in <code>R</code>.</li>
<li>Almost everything in <code>R</code>, on a practical day-to-day basis, involves dataframes</li>
</ul>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>After this section <strong>YOU WILL UNDERSTAND WHAT A DATAFRAME IS AND HOW IT IS BUILT UP FROM <code>R</code> DATA STRUCTURES YOU ALREADY KNOW</strong></li>
<li>You’ll also know <strong>HOW TO ACCESS ANY PART OF A DATA FRAME, INCLUDING CONDITIONAL ACCESS</strong></li>
<li>We’ll also see how to read data in to, and write it out from, a data frame.</li>
</ul>
<hr />
<p><strong>SLIDE: Let’s look at a <code>data.frame</code></strong></p>
<ul>
<li>The <code>cats</code> data is a small <code>data.frame</code></li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li><strong>NOTE: TABULAR</strong></li>
<li><strong>NOTE: 9 elements but length 3?</strong></li>
<li>Try list indexes… <strong>IT’S A LIST</strong></li>
<li>Try <code>names()</code>… <strong>IT’S A NAMED LIST</strong></li>
<li>What are the classes of each list element? <strong>THEY’RE VECTORS</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb71"><code class="sourceCode r"><div class="sourceLine" id="cb71-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(cats)</div>
<div class="sourceLine" id="cb71-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></div>
<div class="sourceLine" id="cb71-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>cats</div>
<div class="sourceLine" id="cb71-4" data-line-number="4">    coat weight likes_string</div>
<div class="sourceLine" id="cb71-5" data-line-number="5"><span class="dv">1</span> calico    <span class="fl">2.1</span>            <span class="dv">1</span></div>
<div class="sourceLine" id="cb71-6" data-line-number="6"><span class="dv">2</span>  black    <span class="fl">5.0</span>            <span class="dv">0</span></div>
<div class="sourceLine" id="cb71-7" data-line-number="7"><span class="dv">3</span>  tabby    <span class="fl">3.2</span>            <span class="dv">1</span></div>
<div class="sourceLine" id="cb71-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(cats)</div>
<div class="sourceLine" id="cb71-9" data-line-number="9">[<span class="dv">1</span>] <span class="dv">3</span></div>
<div class="sourceLine" id="cb71-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>cats[[<span class="dv">1</span>]]</div>
<div class="sourceLine" id="cb71-11" data-line-number="11">[<span class="dv">1</span>] calico black  tabby </div>
<div class="sourceLine" id="cb71-12" data-line-number="12">Levels<span class="op">:</span><span class="st"> </span>black calico tabby</div>
<div class="sourceLine" id="cb71-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(cats)</div>
<div class="sourceLine" id="cb71-14" data-line-number="14">[<span class="dv">1</span>] <span class="st">&quot;list&quot;</span></div>
<div class="sourceLine" id="cb71-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(cats)</div>
<div class="sourceLine" id="cb71-16" data-line-number="16">[<span class="dv">1</span>] <span class="st">&quot;coat&quot;</span>         <span class="st">&quot;weight&quot;</span>       <span class="st">&quot;likes_string&quot;</span></div>
<div class="sourceLine" id="cb71-17" data-line-number="17"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(cats<span class="op">$</span>coat)</div>
<div class="sourceLine" id="cb71-18" data-line-number="18">[<span class="dv">1</span>] <span class="st">&quot;factor&quot;</span></div>
<div class="sourceLine" id="cb71-19" data-line-number="19"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(cats<span class="op">$</span>weight)</div>
<div class="sourceLine" id="cb71-20" data-line-number="20">[<span class="dv">1</span>] <span class="st">&quot;numeric&quot;</span></div>
<div class="sourceLine" id="cb71-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(cats<span class="op">$</span>likes_string)</div>
<div class="sourceLine" id="cb71-22" data-line-number="22">[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></div></code></pre>
<hr />
<p><strong>SLIDE: What is a <code>data.frame</code></strong></p>
<ul>
<li>This structure is <strong>THE MOST IMPORTANT THING IN <code>R</code></strong>
<ul>
<li>It’s the standard structure for storing any king of tabular, ‘rectangular’ data</li>
</ul></li>
<li>We’ve seen that it’s a <strong>NAMED LIST</strong> where each element is a <strong>VECTOR</strong>
<ul>
<li>All the vectors have the same length</li>
</ul></li>
<li>This is <strong>VERY SIMILAR TO A SPREADSHEET</strong>, but it’s more finicky:
<ul>
<li>We require every element in a column to be the same data type</li>
<li>We need all the columns to be the same length</li>
<li><strong>In spreadsheets, neither of these conditions are enforced</strong></li>
<li><strong>This makes <code>R</code> a bit more data-safe</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Creating a <code>data.frame</code></strong></p>
<ul>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li><code>Run</code> when done</li>
<li>Commit to repo</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb72"><code class="sourceCode r"><div class="sourceLine" id="cb72-1" data-line-number="1"><span class="co"># Create a data frame</span></div>
<div class="sourceLine" id="cb72-2" data-line-number="2">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">b=</span><span class="kw">c</span>(<span class="st">&#39;eeny&#39;</span>, <span class="st">&#39;meeny&#39;</span>, <span class="st">&#39;miney&#39;</span>),</div>
<div class="sourceLine" id="cb72-3" data-line-number="3">                 <span class="dt">c=</span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>))</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li><strong>!!!!STRINGS ARE INTERPRETED AS FACTORS!!!!</strong></li>
<li>The <code>summary()</code> function <strong>SUMMARISES PROPERTIES OF EACH COLUMN</strong></li>
<li>The <strong>summary depends on the column type</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb73"><code class="sourceCode r"><div class="sourceLine" id="cb73-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(df)</div>
<div class="sourceLine" id="cb73-2" data-line-number="2"><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">3</span> obs. of  <span class="dv">3</span> variables<span class="op">:</span></div>
<div class="sourceLine" id="cb73-3" data-line-number="3"><span class="st"> </span><span class="er">$</span><span class="st"> </span>a<span class="op">:</span><span class="st"> </span>num  <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></div>
<div class="sourceLine" id="cb73-4" data-line-number="4"> <span class="op">$</span><span class="st"> </span>b<span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">3</span> levels <span class="st">&quot;eeny&quot;</span>,<span class="st">&quot;meeny&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></div>
<div class="sourceLine" id="cb73-5" data-line-number="5"> <span class="op">$</span><span class="st"> </span>c<span class="op">:</span><span class="st"> </span>logi  <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb73-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>c</div>
<div class="sourceLine" id="cb73-7" data-line-number="7">[<span class="dv">1</span>]  <span class="ot">TRUE</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb73-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(df)</div>
<div class="sourceLine" id="cb73-9" data-line-number="9">[<span class="dv">1</span>] <span class="dv">3</span></div>
<div class="sourceLine" id="cb73-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(df)</div>
<div class="sourceLine" id="cb73-11" data-line-number="11">[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">3</span></div>
<div class="sourceLine" id="cb73-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(df)</div>
<div class="sourceLine" id="cb73-13" data-line-number="13">       a           b         c          </div>
<div class="sourceLine" id="cb73-14" data-line-number="14"> Min.   <span class="op">:</span><span class="fl">1.0</span>   eeny <span class="op">:</span><span class="dv">1</span>   Mode <span class="op">:</span>logical  </div>
<div class="sourceLine" id="cb73-15" data-line-number="15"> 1st Qu.<span class="op">:</span><span class="fl">1.5</span>   meeny<span class="op">:</span><span class="dv">1</span>   <span class="ot">FALSE</span><span class="op">:</span><span class="dv">1</span>        </div>
<div class="sourceLine" id="cb73-16" data-line-number="16"> Median <span class="op">:</span><span class="fl">2.0</span>   miney<span class="op">:</span><span class="dv">1</span>   <span class="ot">TRUE</span> <span class="op">:</span><span class="dv">2</span>        </div>
<div class="sourceLine" id="cb73-17" data-line-number="17"> Mean   <span class="op">:</span><span class="fl">2.0</span>                            </div>
<div class="sourceLine" id="cb73-18" data-line-number="18"> 3rd Qu.<span class="op">:</span><span class="fl">2.5</span>                            </div>
<div class="sourceLine" id="cb73-19" data-line-number="19"> Max.   <span class="op">:</span><span class="fl">3.0</span>  </div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 10</strong></p>
<pre class="sourceCode r" id="cb74"><code class="sourceCode r"><div class="sourceLine" id="cb74-1" data-line-number="1">author_book &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">author_first =</span> <span class="kw">c</span>(<span class="st">&#39;Charles&#39;</span>, <span class="st">&#39;Ernst&#39;</span>, <span class="st">&quot;Theodosius&quot;</span>),</div>
<div class="sourceLine" id="cb74-2" data-line-number="2">                          <span class="dt">author_last =</span> <span class="kw">c</span>(<span class="st">&quot;Darwin&quot;</span>, <span class="st">&quot;Mayr&quot;</span>, <span class="st">&quot;Dobzhansky&quot;</span>),</div>
<div class="sourceLine" id="cb74-3" data-line-number="3">                          <span class="dt">year =</span> <span class="kw">c</span>(<span class="dv">1859</span>, <span class="dv">1942</span>, <span class="dv">1970</span>))</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Challenge 11</strong></p>
<pre class="sourceCode r" id="cb75"><code class="sourceCode r"><div class="sourceLine" id="cb75-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>country_climate &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">country=</span><span class="kw">c</span>(<span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;Panama&quot;</span>, </div>
<div class="sourceLine" id="cb75-2" data-line-number="2"><span class="op">+</span><span class="st">                                         &quot;South Africa&quot;</span>, <span class="st">&quot;Australia&quot;</span>),</div>
<div class="sourceLine" id="cb75-3" data-line-number="3"><span class="op">+</span><span class="st">                               </span><span class="dt">climate=</span><span class="kw">c</span>(<span class="st">&quot;cold&quot;</span>, <span class="st">&quot;hot&quot;</span>, </div>
<div class="sourceLine" id="cb75-4" data-line-number="4"><span class="op">+</span><span class="st">                                         &quot;temperate&quot;</span>, <span class="st">&quot;hot/temperate&quot;</span>),</div>
<div class="sourceLine" id="cb75-5" data-line-number="5"><span class="op">+</span><span class="st">                               </span><span class="dt">temperature=</span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">18</span>, <span class="st">&quot;15&quot;</span>),</div>
<div class="sourceLine" id="cb75-6" data-line-number="6"><span class="op">+</span><span class="st">                               </span><span class="dt">northern_hemisphere=</span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, </div>
<div class="sourceLine" id="cb75-7" data-line-number="7"><span class="op">+</span><span class="st">                                                     </span><span class="ot">FALSE</span>, <span class="st">&quot;FALSE&quot;</span>),</div>
<div class="sourceLine" id="cb75-8" data-line-number="8"><span class="op">+</span><span class="st">                               </span><span class="dt">has_kangaroo=</span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>, </div>
<div class="sourceLine" id="cb75-9" data-line-number="9"><span class="op">+</span><span class="st">                                              </span><span class="ot">FALSE</span>, <span class="dv">1</span>))</div>
<div class="sourceLine" id="cb75-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(country_climate)</div>
<div class="sourceLine" id="cb75-11" data-line-number="11"><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">4</span> obs. of  <span class="dv">5</span> variables<span class="op">:</span></div>
<div class="sourceLine" id="cb75-12" data-line-number="12"><span class="st"> </span><span class="er">$</span><span class="st"> </span>country            <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">4</span> levels <span class="st">&quot;Australia&quot;</span>,<span class="st">&quot;Canada&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">1</span></div>
<div class="sourceLine" id="cb75-13" data-line-number="13"> <span class="op">$</span><span class="st"> </span>climate            <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">4</span> levels <span class="st">&quot;cold&quot;</span>,<span class="st">&quot;hot&quot;</span>,<span class="st">&quot;hot/temperate&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">3</span></div>
<div class="sourceLine" id="cb75-14" data-line-number="14"> <span class="op">$</span><span class="st"> </span>temperature        <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">4</span> levels <span class="st">&quot;10&quot;</span>,<span class="st">&quot;15&quot;</span>,<span class="st">&quot;18&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">4</span> <span class="dv">3</span> <span class="dv">2</span></div>
<div class="sourceLine" id="cb75-15" data-line-number="15"> <span class="op">$</span><span class="st"> </span>northern_hemisphere<span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;FALSE&quot;</span>,<span class="st">&quot;TRUE&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span></div>
<div class="sourceLine" id="cb75-16" data-line-number="16"> <span class="op">$</span><span class="st"> </span>has_kangaroo       <span class="op">:</span><span class="st"> </span>num  <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Challenge 12</strong></p>
<pre class="sourceCode r" id="cb76"><code class="sourceCode r"><div class="sourceLine" id="cb76-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">b=</span><span class="kw">c</span>(<span class="st">&#39;eeny&#39;</span>, <span class="st">&#39;meeny&#39;</span>, <span class="st">&#39;miney&#39;</span>),</div>
<div class="sourceLine" id="cb76-2" data-line-number="2"><span class="op">+</span><span class="st">                  </span><span class="dt">c=</span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</div>
<div class="sourceLine" id="cb76-3" data-line-number="3"><span class="op">+</span><span class="st">                  </span><span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb76-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(df)</div>
<div class="sourceLine" id="cb76-5" data-line-number="5"><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">3</span> obs. of  <span class="dv">3</span> variables<span class="op">:</span></div>
<div class="sourceLine" id="cb76-6" data-line-number="6"><span class="st"> </span><span class="er">$</span><span class="st"> </span>a<span class="op">:</span><span class="st"> </span>num  <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></div>
<div class="sourceLine" id="cb76-7" data-line-number="7"> <span class="op">$</span><span class="st"> </span>b<span class="op">:</span><span class="st"> </span>chr  <span class="st">&quot;eeny&quot;</span> <span class="st">&quot;meeny&quot;</span> <span class="st">&quot;miney&quot;</span></div>
<div class="sourceLine" id="cb76-8" data-line-number="8"> <span class="op">$</span><span class="st"> </span>c<span class="op">:</span><span class="st"> </span>logi  <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">TRUE</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Adding rows and columns</strong></p>
<ul>
<li>To add a row or column, we <strong>BIND A VECTOR OR LIST</strong> to the dataframe</li>
<li><strong>DEMO IN THE CONSOLE</strong>
<ul>
<li><strong>CHECK THE STRUCTURE FIRST</strong></li>
<li>If you try to <strong>BIND A LIST WITH THE WRONG TYPES</strong> you’ll get an error <strong>BUT THE ROW WILL BE BOUND ANYWAY!</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb77"><code class="sourceCode r"><div class="sourceLine" id="cb77-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>df</div>
<div class="sourceLine" id="cb77-2" data-line-number="2">  a     b     c</div>
<div class="sourceLine" id="cb77-3" data-line-number="3"><span class="dv">1</span> <span class="dv">1</span>  eeny  <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb77-4" data-line-number="4"><span class="dv">2</span> <span class="dv">2</span> meeny <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb77-5" data-line-number="5"><span class="dv">3</span> <span class="dv">3</span> miney  <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb77-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">cbind</span>(df, <span class="dt">vals =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>)</div>
<div class="sourceLine" id="cb77-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>df</div>
<div class="sourceLine" id="cb77-8" data-line-number="8">  a     b     c vals</div>
<div class="sourceLine" id="cb77-9" data-line-number="9"><span class="dv">1</span> <span class="dv">1</span>  eeny  <span class="ot">TRUE</span>    <span class="dv">3</span></div>
<div class="sourceLine" id="cb77-10" data-line-number="10"><span class="dv">2</span> <span class="dv">2</span> meeny <span class="ot">FALSE</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb77-11" data-line-number="11"><span class="dv">3</span> <span class="dv">3</span> miney  <span class="ot">TRUE</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb77-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">rbind</span>(df, <span class="kw">list</span>(<span class="dv">4</span>, <span class="st">&#39;mo&#39;</span>, <span class="ot">FALSE</span>, <span class="dv">0</span>))</div>
<div class="sourceLine" id="cb77-13" data-line-number="13">Warning message<span class="op">:</span></div>
<div class="sourceLine" id="cb77-14" data-line-number="14">In <span class="st">`</span><span class="dt">[&lt;-.factor</span><span class="st">`</span>(<span class="st">`</span><span class="dt">*tmp*</span><span class="st">`</span>, ri, <span class="dt">value =</span> <span class="st">&quot;mo&quot;</span>) <span class="op">:</span></div>
<div class="sourceLine" id="cb77-15" data-line-number="15"><span class="st">  </span>invalid factor level, <span class="ot">NA</span> generated</div>
<div class="sourceLine" id="cb77-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(df<span class="op">$</span>b) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;eeny&#39;</span>, <span class="st">&#39;meeny&#39;</span>, <span class="st">&#39;miney&#39;</span>, <span class="st">&#39;mo&#39;</span>)</div>
<div class="sourceLine" id="cb77-17" data-line-number="17"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">rbind</span>(df, <span class="kw">list</span>(<span class="dv">4</span>, <span class="st">&#39;mo&#39;</span>, <span class="ot">FALSE</span>, <span class="dv">0</span>))</div>
<div class="sourceLine" id="cb77-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span><span class="er">&gt;</span><span class="st"> </span>df</div>
<div class="sourceLine" id="cb77-19" data-line-number="19">  a     b     c vals</div>
<div class="sourceLine" id="cb77-20" data-line-number="20"><span class="dv">1</span> <span class="dv">1</span>  eeny  <span class="ot">TRUE</span>    <span class="dv">3</span></div>
<div class="sourceLine" id="cb77-21" data-line-number="21"><span class="dv">2</span> <span class="dv">2</span> meeny <span class="ot">FALSE</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb77-22" data-line-number="22"><span class="dv">3</span> <span class="dv">3</span> miney  <span class="ot">TRUE</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb77-23" data-line-number="23"><span class="dv">4</span> <span class="dv">4</span>  <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span><span class="ot">FALSE</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb77-24" data-line-number="24"><span class="dv">5</span> <span class="dv">4</span>    mo <span class="ot">FALSE</span>    <span class="dv">0</span></div></code></pre>
<ul>
<li><strong>NOW WE HAVE A GARBAGE ROW!!</strong></li>
<li>We can <strong>REMOVE THE ROW IN SEVERAL WAYS</strong>
<ul>
<li>Use the <code>-</code> syntax</li>
<li>Remove all rows with <code>NA</code> values</li>
</ul></li>
<li>We reassign <code>df</code> with one of these</li>
</ul>
<pre class="sourceCode r" id="cb78"><code class="sourceCode r"><div class="sourceLine" id="cb78-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>df[<span class="op">-</span><span class="dv">4</span>,]</div>
<div class="sourceLine" id="cb78-2" data-line-number="2">  a     b     c vals</div>
<div class="sourceLine" id="cb78-3" data-line-number="3"><span class="dv">1</span> <span class="dv">1</span>  eeny  <span class="ot">TRUE</span>    <span class="dv">3</span></div>
<div class="sourceLine" id="cb78-4" data-line-number="4"><span class="dv">2</span> <span class="dv">2</span> meeny <span class="ot">FALSE</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb78-5" data-line-number="5"><span class="dv">3</span> <span class="dv">3</span> miney  <span class="ot">TRUE</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb78-6" data-line-number="6"><span class="dv">5</span> <span class="dv">4</span>    mo <span class="ot">FALSE</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb78-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">na.omit</span>(df)</div>
<div class="sourceLine" id="cb78-8" data-line-number="8">  a     b     c vals</div>
<div class="sourceLine" id="cb78-9" data-line-number="9"><span class="dv">1</span> <span class="dv">1</span>  eeny  <span class="ot">TRUE</span>    <span class="dv">3</span></div>
<div class="sourceLine" id="cb78-10" data-line-number="10"><span class="dv">2</span> <span class="dv">2</span> meeny <span class="ot">FALSE</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb78-11" data-line-number="11"><span class="dv">3</span> <span class="dv">3</span> miney  <span class="ot">TRUE</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb78-12" data-line-number="12"><span class="dv">5</span> <span class="dv">4</span>    mo <span class="ot">FALSE</span>    <span class="dv">0</span></div>
<div class="sourceLine" id="cb78-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">na.omit</span>(df)</div>
<div class="sourceLine" id="cb78-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span>df</div>
<div class="sourceLine" id="cb78-15" data-line-number="15">  a     b     c vals</div>
<div class="sourceLine" id="cb78-16" data-line-number="16"><span class="dv">1</span> <span class="dv">1</span>  eeny  <span class="ot">TRUE</span>    <span class="dv">3</span></div>
<div class="sourceLine" id="cb78-17" data-line-number="17"><span class="dv">2</span> <span class="dv">2</span> meeny <span class="ot">FALSE</span>    <span class="dv">2</span></div>
<div class="sourceLine" id="cb78-18" data-line-number="18"><span class="dv">3</span> <span class="dv">3</span> miney  <span class="ot">TRUE</span>    <span class="dv">1</span></div>
<div class="sourceLine" id="cb78-19" data-line-number="19"><span class="dv">5</span> <span class="dv">4</span>    mo <span class="ot">FALSE</span>    <span class="dv">0</span></div></code></pre>
<hr />
<p><strong>SLIDE: Writing <code>data.frame</code> to file</strong></p>
<ul>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>The <code>write.table()</code> function <strong>WRITES A DATAFRAME TO A FILE</strong></li>
<li>We pass: the dataframe, the filename, the column separator, and whether the header should be written</li>
<li><strong><code>\t</code> means ‘tab’ - it puts a gap between columns</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb79"><code class="sourceCode r"><div class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">write.table</span>(df, <span class="st">&quot;data/df_example.tab&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)</div></code></pre>
<ul>
<li><strong>INSPECT THE FILE</strong>
<ul>
<li>Navigate there in the <code>Files</code> tab</li>
<li>View the file in <code>RStudio</code></li>
<li><strong>NOTE:</strong> row and column names are written automatically</li>
<li>Using <code>\t</code> has given spaces as column separators</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Reading into a <code>data.frame</code></strong></p>
<ul>
<li><strong>DEMO IN SCRIPT</strong></li>
<li><strong>DOWNLOAD DATA</strong>
<ul>
<li>Use the link from the Etherpad document</li>
<li>Place the file in <code>data/</code></li>
</ul></li>
<li><strong>CREATE A NEW SCRIPT</strong>
<ul>
<li>Call it <code>gapminder</code></li>
<li>Add the code</li>
<li>We need to provide a data source (<strong>here, a file</strong>), the separator character, and whether there’s a header row</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb80"><code class="sourceCode r"><div class="sourceLine" id="cb80-1" data-line-number="1"><span class="co"># Load gapminder data from a URL</span></div>
<div class="sourceLine" id="cb80-2" data-line-number="2">gapminder &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/gapminder-FiveYearData.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>)</div></code></pre>
<ul>
<li><strong>ADD AND COMMIT TO REPO</strong></li>
<li><strong>CHECK THE DATA IN THE <code>Environment</code> TAB</strong>
<ul>
<li>Click on <code>gapminder</code> in <code>Evironment</code> tab.</li>
<li><strong>NOTE COLUMNS</strong></li>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Investigating <code>gapminder</code></strong></p>
<ul>
<li>Now we’ve loaded our data, let’s take a look at it</li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>1704 rows, 6 columns</li>
<li>Investigate types of columns</li>
<li><strong>POINT OUT THAT THE TYPE OF A COLUMN IS INTEGER IF IT’S A FACTOR</strong></li>
<li><strong>LENGTH OF A DATAFRAME IS THE NUMBER OF COLUMNS</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb81"><code class="sourceCode r"><div class="sourceLine" id="cb81-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(gapminder)</div>
<div class="sourceLine" id="cb81-2" data-line-number="2"><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">1704</span> obs. of  <span class="dv">6</span> variables<span class="op">:</span></div>
<div class="sourceLine" id="cb81-3" data-line-number="3"><span class="st"> </span><span class="er">$</span><span class="st"> </span>country  <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">142</span> levels <span class="st">&quot;Afghanistan&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</div>
<div class="sourceLine" id="cb81-4" data-line-number="4"> <span class="op">$</span><span class="st"> </span>year     <span class="op">:</span><span class="st"> </span>int  <span class="dv">1952</span> <span class="dv">1957</span> <span class="dv">1962</span> <span class="dv">1967</span> <span class="dv">1972</span> <span class="dv">1977</span> <span class="dv">1982</span> <span class="dv">1987</span> <span class="dv">1992</span> <span class="dv">1997</span> ...</div>
<div class="sourceLine" id="cb81-5" data-line-number="5"> <span class="op">$</span><span class="st"> </span>pop      <span class="op">:</span><span class="st"> </span>num  <span class="dv">8425333</span> <span class="dv">9240934</span> <span class="dv">10267083</span> <span class="dv">11537966</span> <span class="dv">13079460</span> ...</div>
<div class="sourceLine" id="cb81-6" data-line-number="6"> <span class="op">$</span><span class="st"> </span>continent<span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">5</span> levels <span class="st">&quot;Africa&quot;</span>,<span class="st">&quot;Americas&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> ...</div>
<div class="sourceLine" id="cb81-7" data-line-number="7"> <span class="op">$</span><span class="st"> </span>lifeExp  <span class="op">:</span><span class="st"> </span>num  <span class="fl">28.8</span> <span class="fl">30.3</span> <span class="dv">32</span> <span class="dv">34</span> <span class="fl">36.1</span> ...</div>
<div class="sourceLine" id="cb81-8" data-line-number="8"> <span class="op">$</span><span class="st"> </span>gdpPercap<span class="op">:</span><span class="st"> </span>num  <span class="dv">779</span> <span class="dv">821</span> <span class="dv">853</span> <span class="dv">836</span> <span class="dv">740</span> ...</div>
<div class="sourceLine" id="cb81-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(gapminder<span class="op">$</span>year)</div>
<div class="sourceLine" id="cb81-10" data-line-number="10">[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></div>
<div class="sourceLine" id="cb81-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(gapminder<span class="op">$</span>country)</div>
<div class="sourceLine" id="cb81-12" data-line-number="12">[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></div>
<div class="sourceLine" id="cb81-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(gapminder<span class="op">$</span>country)</div>
<div class="sourceLine" id="cb81-14" data-line-number="14"> Factor w<span class="op">/</span><span class="st"> </span><span class="dv">142</span> levels <span class="st">&quot;Afghanistan&quot;</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</div>
<div class="sourceLine" id="cb81-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(gapminder)</div>
<div class="sourceLine" id="cb81-16" data-line-number="16">[<span class="dv">1</span>] <span class="dv">6</span></div>
<div class="sourceLine" id="cb81-17" data-line-number="17"><span class="op">&gt;</span><span class="st"> </span><span class="kw">nrow</span>(gapminder)</div>
<div class="sourceLine" id="cb81-18" data-line-number="18">[<span class="dv">1</span>] <span class="dv">1704</span></div>
<div class="sourceLine" id="cb81-19" data-line-number="19"><span class="op">&gt;</span><span class="st"> </span><span class="kw">ncol</span>(gapminder)</div>
<div class="sourceLine" id="cb81-20" data-line-number="20">[<span class="dv">1</span>] <span class="dv">6</span></div>
<div class="sourceLine" id="cb81-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(gapminder)</div>
<div class="sourceLine" id="cb81-22" data-line-number="22">[<span class="dv">1</span>] <span class="dv">1704</span>    <span class="dv">6</span></div>
<div class="sourceLine" id="cb81-23" data-line-number="23"><span class="op">&gt;</span><span class="st"> </span><span class="kw">colnames</span>(gapminder)</div>
<div class="sourceLine" id="cb81-24" data-line-number="24">[<span class="dv">1</span>] <span class="st">&quot;country&quot;</span>   <span class="st">&quot;year&quot;</span>      <span class="st">&quot;pop&quot;</span>       <span class="st">&quot;continent&quot;</span> <span class="st">&quot;lifeExp&quot;</span>   <span class="st">&quot;gdpPercap&quot;</span></div>
<div class="sourceLine" id="cb81-25" data-line-number="25"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder)</div>
<div class="sourceLine" id="cb81-26" data-line-number="26">      country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb81-27" data-line-number="27"><span class="dv">1</span> Afghanistan <span class="dv">1952</span>  <span class="dv">8425333</span>      Asia  <span class="fl">28.801</span>  <span class="fl">779.4453</span></div>
<div class="sourceLine" id="cb81-28" data-line-number="28"><span class="dv">2</span> Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>  <span class="fl">820.8530</span></div>
<div class="sourceLine" id="cb81-29" data-line-number="29"><span class="dv">3</span> Afghanistan <span class="dv">1962</span> <span class="dv">10267083</span>      Asia  <span class="fl">31.997</span>  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb81-30" data-line-number="30"><span class="dv">4</span> Afghanistan <span class="dv">1967</span> <span class="dv">11537966</span>      Asia  <span class="fl">34.020</span>  <span class="fl">836.1971</span></div>
<div class="sourceLine" id="cb81-31" data-line-number="31"><span class="dv">5</span> Afghanistan <span class="dv">1972</span> <span class="dv">13079460</span>      Asia  <span class="fl">36.088</span>  <span class="fl">739.9811</span></div>
<div class="sourceLine" id="cb81-32" data-line-number="32"><span class="dv">6</span> Afghanistan <span class="dv">1977</span> <span class="dv">14880372</span>      Asia  <span class="fl">38.438</span>  <span class="fl">786.1134</span></div>
<div class="sourceLine" id="cb81-33" data-line-number="33"><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(gapminder)</div>
<div class="sourceLine" id="cb81-34" data-line-number="34">        country          year           pop               continent      lifeExp     </div>
<div class="sourceLine" id="cb81-35" data-line-number="35"> Afghanistan<span class="op">:</span><span class="st">  </span><span class="dv">12</span>   Min.   <span class="op">:</span><span class="dv">1952</span>   Min.   <span class="op">:</span><span class="fl">6.001e+04</span>   Africa  <span class="op">:</span><span class="dv">624</span>   Min.   <span class="op">:</span><span class="fl">23.60</span>  </div>
<div class="sourceLine" id="cb81-36" data-line-number="36"> Albania    <span class="op">:</span><span class="st">  </span><span class="dv">12</span>   1st Qu.<span class="op">:</span><span class="dv">1966</span>   1st Qu.<span class="op">:</span><span class="fl">2.794e+06</span>   Americas<span class="op">:</span><span class="dv">300</span>   1st Qu.<span class="op">:</span><span class="fl">48.20</span>  </div>
<div class="sourceLine" id="cb81-37" data-line-number="37"> Algeria    <span class="op">:</span><span class="st">  </span><span class="dv">12</span>   Median <span class="op">:</span><span class="dv">1980</span>   Median <span class="op">:</span><span class="fl">7.024e+06</span>   Asia    <span class="op">:</span><span class="dv">396</span>   Median <span class="op">:</span><span class="fl">60.71</span>  </div>
<div class="sourceLine" id="cb81-38" data-line-number="38"> Angola     <span class="op">:</span><span class="st">  </span><span class="dv">12</span>   Mean   <span class="op">:</span><span class="dv">1980</span>   Mean   <span class="op">:</span><span class="fl">2.960e+07</span>   Europe  <span class="op">:</span><span class="dv">360</span>   Mean   <span class="op">:</span><span class="fl">59.47</span>  </div>
<div class="sourceLine" id="cb81-39" data-line-number="39"> Argentina  <span class="op">:</span><span class="st">  </span><span class="dv">12</span>   3rd Qu.<span class="op">:</span><span class="dv">1993</span>   3rd Qu.<span class="op">:</span><span class="fl">1.959e+07</span>   Oceania <span class="op">:</span><span class="st"> </span><span class="dv">24</span>   3rd Qu.<span class="op">:</span><span class="fl">70.85</span>  </div>
<div class="sourceLine" id="cb81-40" data-line-number="40"> Australia  <span class="op">:</span><span class="st">  </span><span class="dv">12</span>   Max.   <span class="op">:</span><span class="dv">2007</span>   Max.   <span class="op">:</span><span class="fl">1.319e+09</span>                  Max.   <span class="op">:</span><span class="fl">82.60</span>  </div>
<div class="sourceLine" id="cb81-41" data-line-number="41"> (Other)    <span class="op">:</span><span class="dv">1632</span>                                                                    </div>
<div class="sourceLine" id="cb81-42" data-line-number="42">   gdpPercap       </div>
<div class="sourceLine" id="cb81-43" data-line-number="43"> Min.   <span class="op">:</span><span class="st">   </span><span class="fl">241.2</span>  </div>
<div class="sourceLine" id="cb81-44" data-line-number="44"> 1st Qu.<span class="op">:</span><span class="st">  </span><span class="fl">1202.1</span>  </div>
<div class="sourceLine" id="cb81-45" data-line-number="45"> Median <span class="op">:</span><span class="st">  </span><span class="fl">3531.8</span>  </div>
<div class="sourceLine" id="cb81-46" data-line-number="46"> Mean   <span class="op">:</span><span class="st">  </span><span class="fl">7215.3</span>  </div>
<div class="sourceLine" id="cb81-47" data-line-number="47"> 3rd Qu.<span class="op">:</span><span class="st">  </span><span class="fl">9325.5</span>  </div>
<div class="sourceLine" id="cb81-48" data-line-number="48"> Max.   <span class="op">:</span><span class="fl">113523.1</span></div></code></pre>
<hr />
<p><strong>SLIDE: Subsets of <code>data.frame</code>s</strong></p>
<ul>
<li><strong>DATAFRAMES ARE LISTS</strong> so subset like lists</li>
<li><strong>DATAFRAMES ARE ALSO 2D DATA</strong> so subset like matrices</li>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb82"><code class="sourceCode r"><div class="sourceLine" id="cb82-1" data-line-number="1"><span class="co"># Extract a single column, get a dataframe</span></div>
<div class="sourceLine" id="cb82-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[<span class="dv">3</span>])</div>
<div class="sourceLine" id="cb82-3" data-line-number="3">       pop</div>
<div class="sourceLine" id="cb82-4" data-line-number="4"><span class="dv">1</span>  <span class="dv">8425333</span></div>
<div class="sourceLine" id="cb82-5" data-line-number="5"><span class="dv">2</span>  <span class="dv">9240934</span></div>
<div class="sourceLine" id="cb82-6" data-line-number="6"><span class="dv">3</span> <span class="dv">10267083</span></div>
<div class="sourceLine" id="cb82-7" data-line-number="7"><span class="dv">4</span> <span class="dv">11537966</span></div>
<div class="sourceLine" id="cb82-8" data-line-number="8"><span class="dv">5</span> <span class="dv">13079460</span></div>
<div class="sourceLine" id="cb82-9" data-line-number="9"><span class="dv">6</span> <span class="dv">14880372</span></div>
<div class="sourceLine" id="cb82-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(<span class="kw">head</span>(gapminder[<span class="dv">3</span>]))</div>
<div class="sourceLine" id="cb82-11" data-line-number="11">[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></div>
<div class="sourceLine" id="cb82-12" data-line-number="12"></div>
<div class="sourceLine" id="cb82-13" data-line-number="13"><span class="co"># Extract a single named column, get a vector/factor</span></div>
<div class="sourceLine" id="cb82-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[[<span class="st">&quot;lifeExp&quot;</span>]])</div>
<div class="sourceLine" id="cb82-15" data-line-number="15">[<span class="dv">1</span>] <span class="fl">28.801</span> <span class="fl">30.332</span> <span class="fl">31.997</span> <span class="fl">34.020</span> <span class="fl">36.088</span> <span class="fl">38.438</span></div>
<div class="sourceLine" id="cb82-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(<span class="kw">head</span>(gapminder[[<span class="st">&quot;lifeExp&quot;</span>]]))</div>
<div class="sourceLine" id="cb82-17" data-line-number="17">[<span class="dv">1</span>] <span class="st">&quot;numeric&quot;</span></div>
<div class="sourceLine" id="cb82-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder<span class="op">$</span>year)</div>
<div class="sourceLine" id="cb82-19" data-line-number="19">[<span class="dv">1</span>] <span class="dv">1952</span> <span class="dv">1957</span> <span class="dv">1962</span> <span class="dv">1967</span> <span class="dv">1972</span> <span class="dv">1977</span></div>
<div class="sourceLine" id="cb82-20" data-line-number="20"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(<span class="kw">head</span>(gapminder<span class="op">$</span>year))</div>
<div class="sourceLine" id="cb82-21" data-line-number="21">[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></div>
<div class="sourceLine" id="cb82-22" data-line-number="22"></div>
<div class="sourceLine" id="cb82-23" data-line-number="23"><span class="co"># Slice rows like a matrix, get a dataframe</span></div>
<div class="sourceLine" id="cb82-24" data-line-number="24"><span class="op">&gt;</span><span class="st"> </span>gapminder[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]</div>
<div class="sourceLine" id="cb82-25" data-line-number="25">      country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb82-26" data-line-number="26"><span class="dv">1</span> Afghanistan <span class="dv">1952</span>  <span class="dv">8425333</span>      Asia  <span class="fl">28.801</span>  <span class="fl">779.4453</span></div>
<div class="sourceLine" id="cb82-27" data-line-number="27"><span class="dv">2</span> Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>  <span class="fl">820.8530</span></div>
<div class="sourceLine" id="cb82-28" data-line-number="28"><span class="dv">3</span> Afghanistan <span class="dv">1962</span> <span class="dv">10267083</span>      Asia  <span class="fl">31.997</span>  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb82-29" data-line-number="29"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(gapminder[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,])</div>
<div class="sourceLine" id="cb82-30" data-line-number="30">[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></div>
<div class="sourceLine" id="cb82-31" data-line-number="31"><span class="op">&gt;</span><span class="st"> </span>gapminder[<span class="dv">3</span>,]</div>
<div class="sourceLine" id="cb82-32" data-line-number="32">      country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb82-33" data-line-number="33"><span class="dv">3</span> Afghanistan <span class="dv">1962</span> <span class="dv">10267083</span>      Asia  <span class="fl">31.997</span>  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb82-34" data-line-number="34"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(gapminder[<span class="dv">3</span>, ])</div>
<div class="sourceLine" id="cb82-35" data-line-number="35">[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></div>
<div class="sourceLine" id="cb82-36" data-line-number="36"></div>
<div class="sourceLine" id="cb82-37" data-line-number="37"><span class="co"># Slice columns like a matrix, get vector/factor</span></div>
<div class="sourceLine" id="cb82-38" data-line-number="38"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[, <span class="dv">3</span>])</div>
<div class="sourceLine" id="cb82-39" data-line-number="39">[<span class="dv">1</span>]  <span class="dv">8425333</span>  <span class="dv">9240934</span> <span class="dv">10267083</span> <span class="dv">11537966</span> <span class="dv">13079460</span> <span class="dv">14880372</span></div>
<div class="sourceLine" id="cb82-40" data-line-number="40"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(<span class="kw">head</span>(gapminder[, <span class="dv">3</span>]))</div>
<div class="sourceLine" id="cb82-41" data-line-number="41">[<span class="dv">1</span>] <span class="st">&quot;numeric&quot;</span></div>
<div class="sourceLine" id="cb82-42" data-line-number="42"></div>
<div class="sourceLine" id="cb82-43" data-line-number="43"><span class="co"># Slice columns like a matrix get dataframe</span></div>
<div class="sourceLine" id="cb82-44" data-line-number="44"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[, <span class="dv">3</span>, <span class="dt">drop=</span><span class="ot">FALSE</span>])</div>
<div class="sourceLine" id="cb82-45" data-line-number="45">       pop</div>
<div class="sourceLine" id="cb82-46" data-line-number="46"><span class="dv">1</span>  <span class="dv">8425333</span></div>
<div class="sourceLine" id="cb82-47" data-line-number="47"><span class="dv">2</span>  <span class="dv">9240934</span></div>
<div class="sourceLine" id="cb82-48" data-line-number="48"><span class="dv">3</span> <span class="dv">10267083</span></div>
<div class="sourceLine" id="cb82-49" data-line-number="49"><span class="dv">4</span> <span class="dv">11537966</span></div>
<div class="sourceLine" id="cb82-50" data-line-number="50"><span class="dv">5</span> <span class="dv">13079460</span></div>
<div class="sourceLine" id="cb82-51" data-line-number="51"><span class="dv">6</span> <span class="dv">14880372</span></div>
<div class="sourceLine" id="cb82-52" data-line-number="52"><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(<span class="kw">head</span>(gapminder[, <span class="dv">3</span>, <span class="dt">drop=</span><span class="ot">FALSE</span>]))</div>
<div class="sourceLine" id="cb82-53" data-line-number="53">[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 13</strong></p>
<pre class="sourceCode r" id="cb83"><code class="sourceCode r"><div class="sourceLine" id="cb83-1" data-line-number="1"><span class="co"># Extract observations collected for the year 1957</span></div>
<div class="sourceLine" id="cb83-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[gapminder<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">1957</span>,])</div>
<div class="sourceLine" id="cb83-3" data-line-number="3">       country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb83-4" data-line-number="4"><span class="dv">2</span>  Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>   <span class="fl">820.853</span></div>
<div class="sourceLine" id="cb83-5" data-line-number="5"><span class="dv">14</span>     Albania <span class="dv">1957</span>  <span class="dv">1476505</span>    Europe  <span class="fl">59.280</span>  <span class="fl">1942.284</span></div>
<div class="sourceLine" id="cb83-6" data-line-number="6"><span class="dv">26</span>     Algeria <span class="dv">1957</span> <span class="dv">10270856</span>    Africa  <span class="fl">45.685</span>  <span class="fl">3013.976</span></div>
<div class="sourceLine" id="cb83-7" data-line-number="7"><span class="dv">38</span>      Angola <span class="dv">1957</span>  <span class="dv">4561361</span>    Africa  <span class="fl">31.999</span>  <span class="fl">3827.940</span></div>
<div class="sourceLine" id="cb83-8" data-line-number="8"><span class="dv">50</span>   Argentina <span class="dv">1957</span> <span class="dv">19610538</span>  Americas  <span class="fl">64.399</span>  <span class="fl">6856.856</span></div>
<div class="sourceLine" id="cb83-9" data-line-number="9"><span class="dv">62</span>   Australia <span class="dv">1957</span>  <span class="dv">9712569</span>   Oceania  <span class="fl">70.330</span> <span class="fl">10949.650</span></div>
<div class="sourceLine" id="cb83-10" data-line-number="10"></div>
<div class="sourceLine" id="cb83-11" data-line-number="11"><span class="co"># Extract all columns except 1 through 4</span></div>
<div class="sourceLine" id="cb83-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[, <span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)])</div>
<div class="sourceLine" id="cb83-13" data-line-number="13">  lifeExp gdpPercap</div>
<div class="sourceLine" id="cb83-14" data-line-number="14"><span class="dv">1</span>  <span class="fl">28.801</span>  <span class="fl">779.4453</span></div>
<div class="sourceLine" id="cb83-15" data-line-number="15"><span class="dv">2</span>  <span class="fl">30.332</span>  <span class="fl">820.8530</span></div>
<div class="sourceLine" id="cb83-16" data-line-number="16"><span class="dv">3</span>  <span class="fl">31.997</span>  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb83-17" data-line-number="17"><span class="dv">4</span>  <span class="fl">34.020</span>  <span class="fl">836.1971</span></div>
<div class="sourceLine" id="cb83-18" data-line-number="18"><span class="dv">5</span>  <span class="fl">36.088</span>  <span class="fl">739.9811</span></div>
<div class="sourceLine" id="cb83-19" data-line-number="19"><span class="dv">6</span>  <span class="fl">38.438</span>  <span class="fl">786.1134</span></div>
<div class="sourceLine" id="cb83-20" data-line-number="20"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[, <span class="dv">-1</span><span class="op">:-</span><span class="dv">4</span>])</div>
<div class="sourceLine" id="cb83-21" data-line-number="21">  lifeExp gdpPercap</div>
<div class="sourceLine" id="cb83-22" data-line-number="22"><span class="dv">1</span>  <span class="fl">28.801</span>  <span class="fl">779.4453</span></div>
<div class="sourceLine" id="cb83-23" data-line-number="23"><span class="dv">2</span>  <span class="fl">30.332</span>  <span class="fl">820.8530</span></div>
<div class="sourceLine" id="cb83-24" data-line-number="24"><span class="dv">3</span>  <span class="fl">31.997</span>  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb83-25" data-line-number="25"><span class="dv">4</span>  <span class="fl">34.020</span>  <span class="fl">836.1971</span></div>
<div class="sourceLine" id="cb83-26" data-line-number="26"><span class="dv">5</span>  <span class="fl">36.088</span>  <span class="fl">739.9811</span></div>
<div class="sourceLine" id="cb83-27" data-line-number="27"><span class="dv">6</span>  <span class="fl">38.438</span>  <span class="fl">786.1134</span></div>
<div class="sourceLine" id="cb83-28" data-line-number="28"></div>
<div class="sourceLine" id="cb83-29" data-line-number="29"><span class="co"># Extract all rows where life expectancy is greater than 80 years</span></div>
<div class="sourceLine" id="cb83-30" data-line-number="30"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[gapminder<span class="op">$</span>lifeExp <span class="op">&gt;</span><span class="st"> </span><span class="dv">80</span>,])</div>
<div class="sourceLine" id="cb83-31" data-line-number="31">            country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb83-32" data-line-number="32"><span class="dv">71</span>        Australia <span class="dv">2002</span> <span class="dv">19546792</span>   Oceania  <span class="fl">80.370</span>  <span class="fl">30687.75</span></div>
<div class="sourceLine" id="cb83-33" data-line-number="33"><span class="dv">72</span>        Australia <span class="dv">2007</span> <span class="dv">20434176</span>   Oceania  <span class="fl">81.235</span>  <span class="fl">34435.37</span></div>
<div class="sourceLine" id="cb83-34" data-line-number="34"><span class="dv">252</span>          Canada <span class="dv">2007</span> <span class="dv">33390141</span>  Americas  <span class="fl">80.653</span>  <span class="fl">36319.24</span></div>
<div class="sourceLine" id="cb83-35" data-line-number="35"><span class="dv">540</span>          France <span class="dv">2007</span> <span class="dv">61083916</span>    Europe  <span class="fl">80.657</span>  <span class="fl">30470.02</span></div>
<div class="sourceLine" id="cb83-36" data-line-number="36"><span class="dv">671</span> Hong Kong China <span class="dv">2002</span>  <span class="dv">6762476</span>      Asia  <span class="fl">81.495</span>  <span class="fl">30209.02</span></div>
<div class="sourceLine" id="cb83-37" data-line-number="37"><span class="dv">672</span> Hong Kong China <span class="dv">2007</span>  <span class="dv">6980412</span>      Asia  <span class="fl">82.208</span>  <span class="fl">39724.98</span></div>
<div class="sourceLine" id="cb83-38" data-line-number="38"></div>
<div class="sourceLine" id="cb83-39" data-line-number="39"><span class="co"># ADVANCED: Extract rows for years 2002 and 2007</span></div>
<div class="sourceLine" id="cb83-40" data-line-number="40"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[gapminder<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">2002</span> <span class="op">|</span><span class="st"> </span>gapminder<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>,])</div>
<div class="sourceLine" id="cb83-41" data-line-number="41">       country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb83-42" data-line-number="42"><span class="dv">11</span> Afghanistan <span class="dv">2002</span> <span class="dv">25268405</span>      Asia  <span class="fl">42.129</span>  <span class="fl">726.7341</span></div>
<div class="sourceLine" id="cb83-43" data-line-number="43"><span class="dv">12</span> Afghanistan <span class="dv">2007</span> <span class="dv">31889923</span>      Asia  <span class="fl">43.828</span>  <span class="fl">974.5803</span></div>
<div class="sourceLine" id="cb83-44" data-line-number="44"><span class="dv">23</span>     Albania <span class="dv">2002</span>  <span class="dv">3508512</span>    Europe  <span class="fl">75.651</span> <span class="fl">4604.2117</span></div>
<div class="sourceLine" id="cb83-45" data-line-number="45"><span class="dv">24</span>     Albania <span class="dv">2007</span>  <span class="dv">3600523</span>    Europe  <span class="fl">76.423</span> <span class="fl">5937.0295</span></div>
<div class="sourceLine" id="cb83-46" data-line-number="46"><span class="dv">35</span>     Algeria <span class="dv">2002</span> <span class="dv">31287142</span>    Africa  <span class="fl">70.994</span> <span class="fl">5288.0404</span></div>
<div class="sourceLine" id="cb83-47" data-line-number="47"><span class="dv">36</span>     Algeria <span class="dv">2007</span> <span class="dv">33333216</span>    Africa  <span class="fl">72.301</span> <span class="fl">6223.3675</span></div>
<div class="sourceLine" id="cb83-48" data-line-number="48"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder[gapminder<span class="op">$</span>year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2002</span>, <span class="dv">2007</span>),])</div>
<div class="sourceLine" id="cb83-49" data-line-number="49">       country year      pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb83-50" data-line-number="50"><span class="dv">11</span> Afghanistan <span class="dv">2002</span> <span class="dv">25268405</span>      Asia  <span class="fl">42.129</span>  <span class="fl">726.7341</span></div>
<div class="sourceLine" id="cb83-51" data-line-number="51"><span class="dv">12</span> Afghanistan <span class="dv">2007</span> <span class="dv">31889923</span>      Asia  <span class="fl">43.828</span>  <span class="fl">974.5803</span></div>
<div class="sourceLine" id="cb83-52" data-line-number="52"><span class="dv">23</span>     Albania <span class="dv">2002</span>  <span class="dv">3508512</span>    Europe  <span class="fl">75.651</span> <span class="fl">4604.2117</span></div>
<div class="sourceLine" id="cb83-53" data-line-number="53"><span class="dv">24</span>     Albania <span class="dv">2007</span>  <span class="dv">3600523</span>    Europe  <span class="fl">76.423</span> <span class="fl">5937.0295</span></div>
<div class="sourceLine" id="cb83-54" data-line-number="54"><span class="dv">35</span>     Algeria <span class="dv">2002</span> <span class="dv">31287142</span>    Africa  <span class="fl">70.994</span> <span class="fl">5288.0404</span></div>
<div class="sourceLine" id="cb83-55" data-line-number="55"><span class="dv">36</span>     Algeria <span class="dv">2007</span> <span class="dv">33333216</span>    Africa  <span class="fl">72.301</span> <span class="fl">6223.3675</span></div>
<div class="sourceLine" id="cb83-56" data-line-number="56"></div>
<div class="sourceLine" id="cb83-57" data-line-number="57"><span class="co"># The %in% operator</span></div>
<div class="sourceLine" id="cb83-58" data-line-number="58"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb83-59" data-line-number="59">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb83-60" data-line-number="60"><span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb83-61" data-line-number="61">[<span class="dv">1</span>] <span class="ot">FALSE</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: 06. Packages</strong></p>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>In this short section, we’ll learn
<ul>
<li><strong>what packages are</strong></li>
<li><strong>how to install them</strong></li>
<li><strong>how to use them in your code</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Packages</strong></p>
<ul>
<li>Packages are <strong>THE FUNDAMENTAL UNIT OF REUSABLE CODE IN <code>R</code></strong></li>
<li>People write code, and <strong>DISTRIBUTE IT IN PACKAGES</strong></li>
<li>Packages exist for many <strong>SPECIALIST AND USEFUL TOOLS</strong></li>
<li>Over 10,000 packages can be found at CRAN - the Comprehensive R Archive Network</li>
<li><p>When you write your own code, you can distribute it as a package</p></li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>You can <strong>SEE INSTALLED PACKAGES</strong> with the function <code>installed.packages()</code></li>
<li>To install a new package, use <code>install.packages(&quot;packagename&quot;)</code> as a string <strong>EXPLAIN DEPENDENCIES</strong></li>
<li><strong>DEMO INSTALLATION IN <code>RStudio</code>: <code>Tools</code> <span class="math inline">→</span> <code>Install packages...</code></strong></li>
<li><strong>DEMO PACKAGE UPDATES IN <code>RStudio</code></strong></li>
<li>You can update your installed packages to the newest version in the console with <code>update.packages()</code> <strong>DON’T DO THIS - CAN TAKE TIME!</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb84"><code class="sourceCode r"><div class="sourceLine" id="cb84-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">installed.packages</span>()</div>
<div class="sourceLine" id="cb84-2" data-line-number="2">                  Package            </div>
<div class="sourceLine" id="cb84-3" data-line-number="3">BiocInstaller     <span class="st">&quot;BiocInstaller&quot;</span>    </div>
<div class="sourceLine" id="cb84-4" data-line-number="4">bit               <span class="st">&quot;bit&quot;</span>              </div>
<div class="sourceLine" id="cb84-5" data-line-number="5">bit64             <span class="st">&quot;bit64&quot;</span>            </div>
<div class="sourceLine" id="cb84-6" data-line-number="6">data.table        <span class="st">&quot;data.table&quot;</span>  </div>
<div class="sourceLine" id="cb84-7" data-line-number="7">[...]</div>
<div class="sourceLine" id="cb84-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="kw">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</div>
<div class="sourceLine" id="cb84-9" data-line-number="9">Installing package into ‘<span class="op">/</span>Users<span class="op">/</span>lpritc<span class="op">/</span>Library<span class="op">/</span>R<span class="op">/</span><span class="fl">3.4</span><span class="op">/</span>library’</div>
<div class="sourceLine" id="cb84-10" data-line-number="10">(as ‘lib’ is unspecified)</div>
<div class="sourceLine" id="cb84-11" data-line-number="11">also installing the dependencies ‘bindrcpp’, ‘glue’, ‘rlang’</div>
<div class="sourceLine" id="cb84-12" data-line-number="12">[...]</div>
<div class="sourceLine" id="cb84-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">update.packages</span>(<span class="dt">ask=</span><span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb84-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(dplyr)</div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 14</strong></p>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<h1 id="creating-publication-quality-graphics">07. Creating Publication-Quality Graphics</h1>
<hr />
<p><strong>SLIDE: Visualisation is Critical</strong></p>
<ul>
<li>Visualisation <strong>HELPS US UNDERSTAND OUR DATA</strong></li>
<li>But <strong>IT’S NOT FOOLPROOF</strong> - people can interpret the same visualisation differently</li>
<li>Good visualisation is <strong>MORE THAN JUST USING A PLOTTING TOOL</strong></li>
</ul>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>After this section, you should <strong>understand the Grammar of Graphics</strong>
<ul>
<li>You’ll be able to produce <strong>INFORMATIVE, BEAUTIFUL GRAPHS THAT EXPLAIN YOUR DATA</strong></li>
</ul></li>
<li>You’ll also be able to use <code>ggplot2</code> to generate those plots</li>
</ul>
<hr />
<p><strong>SLIDE: The Grammar of Graphics</strong></p>
<ul>
<li>We’ll be using the <code>ggplot2</code> package, which is part of the <strong>TIDYVERSE</strong>, created initially by Hadley Wickham.
<ul>
<li>The Tidyverse provides <strong>OTHER USEFUL PACKAGES</strong> but you can use <code>ggplot2</code> on its own</li>
</ul></li>
<li><code>ggplot2</code> implements <strong>A SET OF CONCEPTS CALLED THE GRAMMAR OF GRAPHICS</strong>
<ul>
<li>This <strong>SEPARATES DATA FROM THE WAY IT’S REPRESENTED</strong> and we’ll discuss it in detail</li>
<li>It’s not the usual way you might have seen to create plots, but it’s <strong>highly effective for generating powerful visualisations</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: A Basic Scatterplot</strong></p>
<ul>
<li>You can use <code>ggplot2</code> in the <strong>SAME WAY YOU’D USE BASE GRAPHICS</strong>
<ul>
<li>This is not the best way to use all the power of the package</li>
</ul></li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li><strong>IMPORT LIBRARY</strong></li>
<li><code>ggplot2</code> has <strong><code>qplot()</code> - the equivalent to <code>plot()</code> in base graphics</strong></li>
<li><code>plot()</code> takes <code>x</code> and <code>y</code> values, and will assign colours to <code>factor</code> columns</li>
<li><code>qplot()</code> takes the name of <code>x</code> and <code>y</code> columns, plus the name of the source <code>data.frame</code>, and will assign colours to <code>factor</code> columns</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb85"><code class="sourceCode r"><div class="sourceLine" id="cb85-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(ggplot2)</div>
<div class="sourceLine" id="cb85-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">plot</span>(gapminder<span class="op">$</span>lifeExp, gapminder<span class="op">$</span>gdpPercap, <span class="dt">col=</span>gapminder<span class="op">$</span>continent)</div>
<div class="sourceLine" id="cb85-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">qplot</span>(lifeExp, gdpPercap, <span class="dt">data=</span>gapminder, <span class="dt">colour=</span>continent)</div></code></pre>
<ul>
<li><strong>COMPARE THE GRAPHS</strong>
<ul>
<li>Clearly, both graphs <strong>show the same data</strong></li>
<li>The <strong>FORMATTING IS QUITE DIFFERENT</strong></li>
<li>Your preference is your preference - <strong>both methods can be heavily restyled</strong></li>
<li>My view is that <strong><code>ggplot2</code> has nicer default styles</strong></li>
<li><strong><code>ggplot2</code> provides gridlines and legends by default, and the labelling is clearer</strong> (no <code>gapminder$</code> prefix)</li>
</ul></li>
<li><strong>THIS ISN’T WHAT’S POWERFUL ABOUT <code>ggplot2</code>!</strong></li>
</ul>
<hr />
<p><strong>SLIDE: What is a Plot? <em>aesthetics</em> </strong></p>
<ul>
<li><strong>TALK THROUGH THE POINTS</strong></li>
<li>Each observation in the data is a <em>point</em></li>
<li>The <em>aesthetics</em> of a point determine how it is rendered in the plot
<ul>
<li>co-ordinates (x, y values) <strong>ON THE IMAGE</strong></li>
<li>size</li>
<li>shape</li>
<li>colour</li>
<li>transparency</li>
</ul></li>
<li><em>aesthetics</em> can be
<ul>
<li><em>constant</em> (e.g. all points the same colour)</li>
<li><em>mapped to variables</em> (e.g. colour mapped to continent)</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: What is a Plot? <em>aesthetics</em> </strong></p>
<ul>
<li>The <em>aesthetics</em> of a plot <strong>define a new dataset</strong> for each point</li>
<li><strong>THIS SHOULD REMIND YOU STRONGLY OF A <code>data.frame</code></strong></li>
</ul>
<hr />
<p><strong>SLIDE: What is a Plot? <code>geom</code>s</strong></p>
<ul>
<li>So far <strong>we’ve only defined the data and aesthetics</strong>
<ul>
<li><strong>THIS ONLY TELLS US HOW DATA POINTS ARE REPRESENTED, NOT THE TYPE OF PLOT</strong></li>
</ul></li>
<li><code>geom</code>s (short for <em>geometries</em>) <strong>DEFINE THE KIND OF PLOT WE PRODUCE</strong>
<ul>
<li>Showing the data <strong>as points</strong> is a <em>scatterplot</em></li>
<li>Showing the data <strong>as lines</strong> is a <em>line plot</em></li>
<li>Showing the data <strong>as bars</strong> is a <em>barchart</em></li>
</ul></li>
<li>We can use <strong>different <code>geom</code>s with the <em>same data and aesthetics</em> </strong></li>
</ul>
<hr />
<p><strong>SLIDE: What is a Plot? <code>geom</code>s</strong></p>
<ul>
<li><strong>DEMO IN SCRIPT</strong> (<code>gapminder.R</code>)
<ul>
<li>We <strong>create a plot with the <code>ggplot()</code> function</strong>.</li>
<li>We define the <em>data</em> as <code>data</code>, and <em>aesthetics</em> with <code>aes</code></li>
<li><strong>WE PUT THE RESULT IN A VARIABLE FOR CONVENIENCE</strong></li>
<li><em>Data</em> and <em>aesthetics</em> aren’t enough to define a plot. <strong>WE NEED A <code>geom</code></strong></li>
<li>Use <code>geom_point()</code></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb86"><code class="sourceCode r"><div class="sourceLine" id="cb86-1" data-line-number="1"><span class="co"># Generate plot of GDP per capita against life Expectancy</span></div>
<div class="sourceLine" id="cb86-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap, <span class="dt">color=</span>continent))</div>
<div class="sourceLine" id="cb86-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</div></code></pre>
<ul>
<li><strong>WE’VE RECREATED THE SCATTERPLOT WE SAW EARLIER</strong></li>
<li><p><strong>COMMIT CHANGES TO SCRIPT</strong></p></li>
<li><strong>What happens if we change the <code>geom</code>?</strong></li>
<li><p><strong>DEMO IN THE SCRIPT</strong></p></li>
</ul>
<pre class="sourceCode r" id="cb87"><code class="sourceCode r"><div class="sourceLine" id="cb87-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</div></code></pre>
<ul>
<li>This looks terrible. <strong>CHANGE IT BACK</strong></li>
</ul>
<hr />
<p><strong>SLIDE: Challenge 15</strong></p>
<pre class="sourceCode r" id="cb88"><code class="sourceCode r"><div class="sourceLine" id="cb88-1" data-line-number="1"><span class="co"># Plot life expectancy against time</span></div>
<div class="sourceLine" id="cb88-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>lifeExp, <span class="dt">colour=</span>continent))</div>
<div class="sourceLine" id="cb88-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: What is a Plot? <em>layers</em> </strong></p>
<ul>
<li>Without knowing it, <strong>WE’VE JUST BEEN USING THE LAYERS CONCEPT</strong>
<ul>
<li><strong>all <code>ggplot2</code> plots are built as layers</strong></li>
</ul></li>
<li><strong>ALL LAYERS HAVE TWO COMPONENTS</strong>
<ul>
<li><em>data</em> to be shown, and <em>aesthetics</em> for showing them</li>
<li>a <code>geom</code> defining the type of plot</li>
</ul></li>
<li><strong>The <code>ggplot</code> object describes a <em>base</em> layer, and can contain <em>data</em> and <em>aesthetics</em> </strong>
<ul>
<li><strong>THESE ARE INHERITED BY THE OTHER LAYERS IN THE PLOT</strong></li>
<li><strong>The values can also be overridden in specified layers</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: What is a Plot? <em>layers</em> </strong></p>
<ul>
<li>In our first plot we defined a <em>base</em> with:
<ul>
<li><em>data</em> from <code>gapminder</code></li>
<li><em>aesthetics</em> with <em>x</em> and <em>y</em> coordinates, and colouring by continent</li>
</ul></li>
<li>We defined a layer that:
<ul>
<li>had a <code>geom_point</code> <code>geom</code></li>
<li>inherited <em>data</em> and <em>aesthetics</em> from the <em>base</em></li>
</ul></li>
</ul>
<p><strong>LAYERS ARE ADDED WITH THE <code>+</code> OPERATOR</strong></p>
<hr />
<p><strong>SLIDE: What is a Plot? <em>layers</em> </strong></p>
<ul>
<li>Now we will <strong>override the base layer <em>aesthetics</em> </strong></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>We’ll <strong>change the <code>geom</code></strong> to <code>geom_line</code></li>
<li>We’ll extend the <em>aesthetics</em> to <strong>group datapoints by country</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb89"><code class="sourceCode r"><div class="sourceLine" id="cb89-1" data-line-number="1"><span class="co"># Generate plot of GDP per capita against life expectancy</span></div>
<div class="sourceLine" id="cb89-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap, <span class="dt">color=</span>continent))</div>
<div class="sourceLine" id="cb89-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group=</span>country))</div></code></pre>
<ul>
<li><strong>RENDER THE PLOT</strong></li>
</ul>
<hr />
<p><strong>SLIDE: What is a Plot? <em>layers</em> </strong></p>
<ul>
<li>We can <strong>BUILD UP LAYERS OF <code>geom</code>S</strong> to produce a more complex plot</li>
<li>We <strong>ADD A NEW <code>geom_point()</code> LAYER WITH <code>+</code></strong>
<ul>
<li>We use the layer’s <code>alpha</code> argument to control transparency</li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong></li>
</ul>
<pre class="sourceCode r" id="cb90"><code class="sourceCode r"><div class="sourceLine" id="cb90-1" data-line-number="1"><span class="co"># Generate plot of GDP per capita against life expectancy</span></div>
<div class="sourceLine" id="cb90-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap, <span class="dt">color=</span>continent))</div>
<div class="sourceLine" id="cb90-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group=</span>country)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.4</span>)</div></code></pre>
<ul>
<li><strong>RENDER THE PLOT</strong></li>
<li><strong>COMMIT THE CHANGES</strong></li>
</ul>
<hr />
<p><strong>SLIDE: Challenge 16</strong></p>
<pre class="sourceCode r" id="cb91"><code class="sourceCode r"><div class="sourceLine" id="cb91-1" data-line-number="1"><span class="co"># Generate plot of life expectancy against time</span></div>
<div class="sourceLine" id="cb91-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>lifeExp, <span class="dt">color=</span>continent))</div>
<div class="sourceLine" id="cb91-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group=</span>country)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.35</span>)</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Transformations and <code>scale</code>s</strong></p>
<ul>
<li>Another kind of layer is a <em>transformation</em> - handled with <code>scale</code> layers</li>
<li>These map <em>data</em> to new aesthetics on the plot
<ul>
<li>new axis scales, e.g. log scale, reverse scale, time scale</li>
<li>colour scaling (changing palettes)</li>
<li>shape and size scaling</li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong> (<code>gapminder.R</code>)
<ul>
<li>Rescale the plot first</li>
<li>Then change the colours</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb92"><code class="sourceCode r"><div class="sourceLine" id="cb92-1" data-line-number="1"><span class="co"># Generate plot of GDP per capita against life expectancy</span></div>
<div class="sourceLine" id="cb92-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap, <span class="dt">color=</span>continent))</div>
<div class="sourceLine" id="cb92-3" data-line-number="3">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group=</span>country)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.4</span>)</div>
<div class="sourceLine" id="cb92-4" data-line-number="4">p <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_grey</span>()</div></code></pre>
<hr />
<p><strong>SLIDE: Statistics layers</strong></p>
<ul>
<li>Some <code>geom</code> layers transform the dataset
<ul>
<li>Usually this is a data summary (e.g. smoothing or binning)</li>
<li>The layer <strong>may provide a new summary visual object</strong></li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>This is working towards an informative figure</li>
<li><strong>Start with a new basic scatterplot</strong></li>
<li><strong>NOTE:</strong> setting opacity helps see density in the data - <strong>looks like two main points of density</strong></li>
<li><strong>NOTE:</strong> looks like a general trend of GDP and life expectancy correlating</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb93"><code class="sourceCode r"><div class="sourceLine" id="cb93-1" data-line-number="1"><span class="co"># Generate summary plot of GDP per capita against life expectancy</span></div>
<div class="sourceLine" id="cb93-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap))</div>
<div class="sourceLine" id="cb93-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>()</div></code></pre>
<ul>
<li><strong>ADD A SMOOTHED FIT</strong>
<ul>
<li><strong>NOTE:</strong> The correlation is made quite clear</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb94"><code class="sourceCode r"><div class="sourceLine" id="cb94-1" data-line-number="1"><span class="co"># Generate summary plot of GDP per capita against life expectancy</span></div>
<div class="sourceLine" id="cb94-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap))</div>
<div class="sourceLine" id="cb94-3" data-line-number="3">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>()</div>
<div class="sourceLine" id="cb94-4" data-line-number="4">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>()</div></code></pre>
<ul>
<li><strong>ADD A CONTOUR PLOT OF DENSITY</strong>
<ul>
<li><strong>NOTE:</strong> Two populations are clear</li>
<li><strong>We might speculate that there is a difference in wealth/life expectancy across continents</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb95"><code class="sourceCode r"><div class="sourceLine" id="cb95-1" data-line-number="1"><span class="co"># Generate summary plot of GDP per capita against life expectancy</span></div>
<div class="sourceLine" id="cb95-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap))</div>
<div class="sourceLine" id="cb95-3" data-line-number="3">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>()</div>
<div class="sourceLine" id="cb95-4" data-line-number="4">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_2d</span>(<span class="dt">color=</span><span class="st">&quot;purple&quot;</span>)</div></code></pre>
<ul>
<li><strong>ADD CONTINENT COLOURING</strong>
<ul>
<li><strong>NOTE:</strong> It’s now clear that the two populations are centred on Europe (wealthy, long-lived) and Africa (poor, short-lived), respectively.</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb96"><code class="sourceCode r"><div class="sourceLine" id="cb96-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>lifeExp, <span class="dt">y=</span>gdpPercap))</div>
<div class="sourceLine" id="cb96-2" data-line-number="2">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.4</span>, <span class="kw">aes</span>(<span class="dt">color=</span>continent)) <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>()</div>
<div class="sourceLine" id="cb96-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_2d</span>(<span class="dt">color=</span><span class="st">&quot;purple&quot;</span>)</div></code></pre>
<ul>
<li><strong>COMMIT CHANGES</strong></li>
</ul>
<hr />
<p><strong>SLIDE: Multi-panel figures</strong></p>
<ul>
<li>All our plots so far have been single figures, but <strong>multi-panel plots can give clearer comparisons</strong></li>
<li>The <strong><code>facet_wrap()</code> layer allows us to make grids of plots, SPLIT BY A FACTOR</strong></li>
<li><strong>DEMO IN THE SCRIPT</strong>
<ul>
<li>We set a <strong>default aesthetic grouping by country</strong></li>
<li>We generate a line plot, with log y axis</li>
<li><strong>The result is a bit messy.</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb97"><code class="sourceCode r"><div class="sourceLine" id="cb97-1" data-line-number="1"><span class="co"># Compare life expectancy over time by country</span></div>
<div class="sourceLine" id="cb97-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>lifeExp, <span class="dt">colour=</span>continent, <span class="dt">group=</span>country))</div>
<div class="sourceLine" id="cb97-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>()</div></code></pre>
<ul>
<li><strong>using <code>facet_wrap()</code> to split by continent is clearer</strong>
<ul>
<li><strong>NOTE:</strong> the axes are consistent across facets</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb98"><code class="sourceCode r"><div class="sourceLine" id="cb98-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>lifeExp, <span class="dt">colour=</span>continent, <span class="dt">group=</span>country))</div>
<div class="sourceLine" id="cb98-2" data-line-number="2">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>()</div>
<div class="sourceLine" id="cb98-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>continent)</div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 17 (10min)</strong></p>
<pre class="sourceCode r" id="cb99"><code class="sourceCode r"><div class="sourceLine" id="cb99-1" data-line-number="1"><span class="co"># Contrast GDP per capita against population</span></div>
<div class="sourceLine" id="cb99-2" data-line-number="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>gapminder, <span class="kw">aes</span>(<span class="dt">x=</span>pop, <span class="dt">y=</span>gdpPercap))</div>
<div class="sourceLine" id="cb99-3" data-line-number="3">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.8</span>, <span class="kw">aes</span>(<span class="dt">color=</span>continent))</div>
<div class="sourceLine" id="cb99-4" data-line-number="4">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_log10</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_log10</span>()</div>
<div class="sourceLine" id="cb99-5" data-line-number="5">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_2d</span>(<span class="dt">alpha=</span><span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>year)</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<h1 id="working-with-data.frames-in-dplyr">08. Working with <code>data.frame</code>s in <code>dplyr</code></h1>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li><p>You’re going to <strong>learn to manipulate <code>data.frame</code>s with the six <em>verbs</em> of <code>dplyr</code></strong></p></li>
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>group_by()</code></li>
<li><code>summarize()</code></li>
<li><code>mutate()</code></li>
<li><p><code>%&gt;%</code> (pipe)</p></li>
</ul>
<hr />
<p><strong>SLIDE: What and Why is <code>dplyr</code>?</strong></p>
<ul>
<li><code>dplyr</code> is a package in the <strong>TIDYVERSE</strong>; it exists to enable <strong>rapid analysis of data by groups</strong>
<ul>
<li>For example, if we wanted numerical (rather than graphical) analysis of the <code>gapminder</code> data by continent, we’d use <code>dplyr</code></li>
</ul></li>
<li>So far, we know how to <strong>subset, but repetitive application is tedious</strong>
<ul>
<li><strong>WE MIGHT MANAGE TO REPEAT BY CONTINENT, LIKE HERE - BUT <em>BY COUNTRY</em>?</strong></li>
</ul></li>
<li><strong>AVOIDING REPETITION IMPROVES YOUR CODE</strong>
<ul>
<li>More <strong>robust</strong></li>
<li>More <strong>readable</strong></li>
<li>More <strong>reproducible</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Split-Apply-Combine</strong></p>
<ul>
<li><p>The <strong>general principle</strong> <code>dplyr</code> supports is <strong>SPLIT-APPLY-COMBINE</strong></p></li>
<li>We have a <strong>dataset with several groups</strong> (column <code>x</code>)</li>
<li>We <strong>want to perform the same operation on each group, independently</strong> - take a mean of <code>y</code> for each group, for example
<ul>
<li>So we <strong>SPLIT</strong> the data into groups, on <code>x</code></li>
<li>Then we <strong>APPLY</strong> the operation (take the mean for each group)</li>
<li>Then we <strong>COMBINE</strong> the results into a new table</li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: <code>select()</code> - Interactive Demo</strong></p>
<ul>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>Import <code>dplyr</code></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb100"><code class="sourceCode r"><div class="sourceLine" id="cb100-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(dplyr)</div></code></pre>
<ul>
<li>The <code>select()</code> <em>verb</em> <strong>SELECTS COLUMNS</strong>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
<li>If we wanted to select only year, country and GDP data from <code>gapminder</code></li>
<li>Specify: <strong>data, then columns</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb101"><code class="sourceCode r"><div class="sourceLine" id="cb101-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">select</span>(gapminder, year, country, gdpPercap))</div>
<div class="sourceLine" id="cb101-2" data-line-number="2">  year     country gdpPercap</div>
<div class="sourceLine" id="cb101-3" data-line-number="3"><span class="dv">1</span> <span class="dv">1952</span> Afghanistan  <span class="fl">779.4453</span></div>
<div class="sourceLine" id="cb101-4" data-line-number="4"><span class="dv">2</span> <span class="dv">1957</span> Afghanistan  <span class="fl">820.8530</span></div>
<div class="sourceLine" id="cb101-5" data-line-number="5"><span class="dv">3</span> <span class="dv">1962</span> Afghanistan  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb101-6" data-line-number="6"><span class="dv">4</span> <span class="dv">1967</span> Afghanistan  <span class="fl">836.1971</span></div>
<div class="sourceLine" id="cb101-7" data-line-number="7"><span class="dv">5</span> <span class="dv">1972</span> Afghanistan  <span class="fl">739.9811</span></div>
<div class="sourceLine" id="cb101-8" data-line-number="8"><span class="dv">6</span> <span class="dv">1977</span> Afghanistan  <span class="fl">786.1134</span></div></code></pre>
<ul>
<li>Here, we <strong>applied a function</strong>, but we can also <strong>‘PIPE’ DATA FROM ONE VERB TO ANOTHER</strong>
<ul>
<li>These work <strong>like pipes in the shell</strong></li>
<li><strong>SPECIAL PIPE SYMBOL: <code>%&gt;%</code></strong></li>
<li>Specify <strong>only columns</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb102"><code class="sourceCode r"><div class="sourceLine" id="cb102-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(year, country, gdpPercap))</div>
<div class="sourceLine" id="cb102-2" data-line-number="2">  year     country gdpPercap</div>
<div class="sourceLine" id="cb102-3" data-line-number="3"><span class="dv">1</span> <span class="dv">1952</span> Afghanistan  <span class="fl">779.4453</span></div>
<div class="sourceLine" id="cb102-4" data-line-number="4"><span class="dv">2</span> <span class="dv">1957</span> Afghanistan  <span class="fl">820.8530</span></div>
<div class="sourceLine" id="cb102-5" data-line-number="5"><span class="dv">3</span> <span class="dv">1962</span> Afghanistan  <span class="fl">853.1007</span></div>
<div class="sourceLine" id="cb102-6" data-line-number="6"><span class="dv">4</span> <span class="dv">1967</span> Afghanistan  <span class="fl">836.1971</span></div>
<div class="sourceLine" id="cb102-7" data-line-number="7"><span class="dv">5</span> <span class="dv">1972</span> Afghanistan  <span class="fl">739.9811</span></div>
<div class="sourceLine" id="cb102-8" data-line-number="8"><span class="dv">6</span> <span class="dv">1977</span> Afghanistan  <span class="fl">786.1134</span></div></code></pre>
<hr />
<p><strong>SLIDE: <code>filter()</code></strong></p>
<ul>
<li><code>filter()</code> selects rows on the basis of some condition, or combination of conditions
<ul>
<li>We can <strong>use it as a function, with <em>pipes</em> </strong></li>
</ul></li>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb103"><code class="sourceCode r"><div class="sourceLine" id="cb103-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">filter</span>(gapminder, continent<span class="op">==</span><span class="st">&quot;Europe&quot;</span>))</div>
<div class="sourceLine" id="cb103-2" data-line-number="2">  country year     pop continent lifeExp gdpPercap</div>
<div class="sourceLine" id="cb103-3" data-line-number="3"><span class="dv">1</span> Albania <span class="dv">1952</span> <span class="dv">1282697</span>    Europe   <span class="fl">55.23</span>  <span class="fl">1601.056</span></div>
<div class="sourceLine" id="cb103-4" data-line-number="4"><span class="dv">2</span> Albania <span class="dv">1957</span> <span class="dv">1476505</span>    Europe   <span class="fl">59.28</span>  <span class="fl">1942.284</span></div>
<div class="sourceLine" id="cb103-5" data-line-number="5"><span class="dv">3</span> Albania <span class="dv">1962</span> <span class="dv">1728137</span>    Europe   <span class="fl">64.82</span>  <span class="fl">2312.889</span></div>
<div class="sourceLine" id="cb103-6" data-line-number="6"><span class="dv">4</span> Albania <span class="dv">1967</span> <span class="dv">1984060</span>    Europe   <span class="fl">66.22</span>  <span class="fl">2760.197</span></div>
<div class="sourceLine" id="cb103-7" data-line-number="7"><span class="dv">5</span> Albania <span class="dv">1972</span> <span class="dv">2263554</span>    Europe   <span class="fl">67.69</span>  <span class="fl">3313.422</span></div>
<div class="sourceLine" id="cb103-8" data-line-number="8"><span class="dv">6</span> Albania <span class="dv">1977</span> <span class="dv">2509048</span>    Europe   <span class="fl">68.93</span>  <span class="fl">3533.004</span></div></code></pre>
<ul>
<li><strong>DEMO IN SCRIPT</strong> (<code>gapminder.R</code>)
<ul>
<li>One <strong>advantage of pipes</strong> is that they make chaining <em>verbs</em> together <strong>MORE READABLE</strong></li>
<li><strong>END THE LINES WITH THE PIPE SYMBOL</strong> so <code>R</code> knows that there’s a continuation</li>
<li><code>Run</code> the lines and <strong>check the output</strong> in <code>Environment</code></li>
<li><code>Commit</code> the changes</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb104"><code class="sourceCode r"><div class="sourceLine" id="cb104-1" data-line-number="1"><span class="co"># Select gdpPercap by country and year, only for Europe</span></div>
<div class="sourceLine" id="cb104-2" data-line-number="2">eurodata &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb104-3" data-line-number="3"><span class="st">              </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>) <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb104-4" data-line-number="4"><span class="st">              </span><span class="kw">select</span>(year, country, gdpPercap)</div></code></pre>
<hr />
<p>**SLIDE: Challenge 18</p>
<pre class="sourceCode r" id="cb105"><code class="sourceCode r"><div class="sourceLine" id="cb105-1" data-line-number="1"><span class="co"># Select life expectancy by country and year, only for Africa</span></div>
<div class="sourceLine" id="cb105-2" data-line-number="2">afrodata &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb105-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>) <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb105-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(year, country, lifeExp)</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: <code>group_by()</code></strong></p>
<ul>
<li>The <code>group_by()</code> <em>verb</em> <strong>SPLITS <code>data.frame</code>s INTO GROUPS ON A COLUMN PROPERTY</strong></li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>It returns a <strong><code>tibble</code></strong> - a table with extra metadata describing the groups in the table</li>
</ul></li>
</ul>
<pre><code>&gt; group_by(gapminder, continent)
# A tibble: 1,704 x 6
# Groups:   continent [5]
       country  year      pop continent lifeExp gdpPercap
        &lt;fctr&gt; &lt;int&gt;    &lt;dbl&gt;    &lt;fctr&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1952  8425333      Asia  28.801  779.4453
 2 Afghanistan  1957  9240934      Asia  30.332  820.8530
 3 Afghanistan  1962 10267083      Asia  31.997  853.1007
 4 Afghanistan  1967 11537966      Asia  34.020  836.1971
 5 Afghanistan  1972 13079460      Asia  36.088  739.9811
 6 Afghanistan  1977 14880372      Asia  38.438  786.1134
 7 Afghanistan  1982 12881816      Asia  39.854  978.0114
 8 Afghanistan  1987 13867957      Asia  40.822  852.3959
 9 Afghanistan  1992 16317921      Asia  41.674  649.3414
10 Afghanistan  1997 22227415      Asia  41.763  635.3414
# ... with 1,694 more rows</code></pre>
<hr />
<p>**SLIDE: <code>summarize()</code></p>
<ul>
<li>The <strong>combination of <code>group_by()</code> and <code>summarize()</code> is very powerful</strong>
<ul>
<li>We can <strong>CREATE NEW VARIABLES</strong> using functions that repeat for each group</li>
</ul></li>
<li><p>Here, we’ve split the original table into three groups, and now <strong>CREATE A NEW VARIABLE <code>mean_b</code> THAT IS FILLED BY CALCULATING THE MEAN OF <code>b</code></strong></p></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>We use the same principle to <strong>calculate mean GDP per continent</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb107"><code class="sourceCode r"><div class="sourceLine" id="cb107-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Produce table of mean GDP by continent</span></div>
<div class="sourceLine" id="cb107-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>gapminder <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb107-3" data-line-number="3"><span class="op">+</span><span class="st">     </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb107-4" data-line-number="4"><span class="op">+</span><span class="st">     </span><span class="kw">summarize</span>(<span class="dt">meangdpPercap=</span><span class="kw">mean</span>(gdpPercap))</div>
<div class="sourceLine" id="cb107-5" data-line-number="5"><span class="co"># A tibble: 5 x 2</span></div>
<div class="sourceLine" id="cb107-6" data-line-number="6">  continent meangdpPercap</div>
<div class="sourceLine" id="cb107-7" data-line-number="7">     <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></div>
<div class="sourceLine" id="cb107-8" data-line-number="8"><span class="dv">1</span>    Africa      <span class="fl">2193.755</span></div>
<div class="sourceLine" id="cb107-9" data-line-number="9"><span class="dv">2</span>  Americas      <span class="fl">7136.110</span></div>
<div class="sourceLine" id="cb107-10" data-line-number="10"><span class="dv">3</span>      Asia      <span class="fl">7902.150</span></div>
<div class="sourceLine" id="cb107-11" data-line-number="11"><span class="dv">4</span>    Europe     <span class="fl">14469.476</span></div>
<div class="sourceLine" id="cb107-12" data-line-number="12"><span class="dv">5</span>   Oceania     <span class="fl">18621.609</span></div></code></pre>
<hr />
<p><strong>SLIDE: challenge 19</strong></p>
<ul>
<li><strong>IN THE SCRIPT</strong></li>
</ul>
<pre class="sourceCode r" id="cb108"><code class="sourceCode r"><div class="sourceLine" id="cb108-1" data-line-number="1"><span class="co"># Find average life expectancy by nation</span></div>
<div class="sourceLine" id="cb108-2" data-line-number="2">avg_lifexp_country &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb108-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb108-4" data-line-number="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">meanlifeExp=</span><span class="kw">mean</span>(lifeExp))</div></code></pre>
<ul>
<li><strong>IN THE CONSOLE</strong></li>
</ul>
<pre><code>&gt; avg_lifexp_country[avg_lifexp_country$meanlifeExp == max(avg_lifexp_country$meanlifeExp),]
# A tibble: 1 x 2
  country meanlifeExp
   &lt;fctr&gt;       &lt;dbl&gt;
1 Iceland    76.51142
&gt; avg_lifexp_country[avg_lifexp_country$meanlifeExp == min(avg_lifexp_country$meanlifeExp),]
# A tibble: 1 x 2
       country meanlifeExp
        &lt;fctr&gt;       &lt;dbl&gt;
1 Sierra Leone    36.76917 </code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: <code>count()</code> and <code>n()</code></strong></p>
<ul>
<li>Two other useful functions are related to <code>summarize()</code>
<ul>
<li><strong><code>count()</code> reports a new table of counts by group</strong></li>
<li><strong><code>n()</code> is used to represent the count of rows, when calculating new values in <code>summarize()</code></strong></li>
</ul></li>
</ul>
<p><strong>DEMO IN CONSOLE</strong> * <strong>NOTE:</strong> standard error is (std dev)/sqrt(n)</p>
<pre class="sourceCode r" id="cb110"><code class="sourceCode r"><div class="sourceLine" id="cb110-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2002</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(continent, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb110-2" data-line-number="2"><span class="co"># A tibble: 5 x 2</span></div>
<div class="sourceLine" id="cb110-3" data-line-number="3">  continent     n</div>
<div class="sourceLine" id="cb110-4" data-line-number="4">     <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span></div>
<div class="sourceLine" id="cb110-5" data-line-number="5"><span class="dv">1</span>    Africa    <span class="dv">52</span></div>
<div class="sourceLine" id="cb110-6" data-line-number="6"><span class="dv">2</span>      Asia    <span class="dv">33</span></div>
<div class="sourceLine" id="cb110-7" data-line-number="7"><span class="dv">3</span>    Europe    <span class="dv">30</span></div>
<div class="sourceLine" id="cb110-8" data-line-number="8"><span class="dv">4</span>  Americas    <span class="dv">25</span></div>
<div class="sourceLine" id="cb110-9" data-line-number="9"><span class="dv">5</span>   Oceania     <span class="dv">2</span></div>
<div class="sourceLine" id="cb110-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">se_lifeExp =</span> <span class="kw">sd</span>(lifeExp)<span class="op">/</span><span class="kw">sqrt</span>(<span class="kw">n</span>()))</div>
<div class="sourceLine" id="cb110-11" data-line-number="11"><span class="co"># A tibble: 5 x 2</span></div>
<div class="sourceLine" id="cb110-12" data-line-number="12">  continent se_lifeExp</div>
<div class="sourceLine" id="cb110-13" data-line-number="13">     <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></div>
<div class="sourceLine" id="cb110-14" data-line-number="14"><span class="dv">1</span>    Africa  <span class="fl">0.3663016</span></div>
<div class="sourceLine" id="cb110-15" data-line-number="15"><span class="dv">2</span>  Americas  <span class="fl">0.5395389</span></div>
<div class="sourceLine" id="cb110-16" data-line-number="16"><span class="dv">3</span>      Asia  <span class="fl">0.5962151</span></div>
<div class="sourceLine" id="cb110-17" data-line-number="17"><span class="dv">4</span>    Europe  <span class="fl">0.2863536</span></div>
<div class="sourceLine" id="cb110-18" data-line-number="18"><span class="dv">5</span>   Oceania  <span class="fl">0.7747759</span></div></code></pre>
<hr />
<p><strong>SLIDE: <code>mutate()</code></strong></p>
<ul>
<li><strong><code>mutate()</code> CALCULATES NEW VARIABLES (COLUMNS) ON THE BASIS OF EXISTING COLUMNS</strong></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>Say we want to calculate the <strong>total GDP of each nation, each year, in $bn</strong></li>
<li>We’d multiply the GDP per capita by the total population, and divide by 1bn</li>
</ul></li>
<li><strong>INSPECT THE OUTPUT</strong>
<ul>
<li>We have a new data table, which is the <code>gapminder</code> data, plus an extra column</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb111"><code class="sourceCode r"><div class="sourceLine" id="cb111-1" data-line-number="1"><span class="co"># Calculate GDP in $billion</span></div>
<div class="sourceLine" id="cb111-2" data-line-number="2">gdp_bill &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb111-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp_billion =</span> gdpPercap <span class="op">*</span><span class="st"> </span>pop <span class="op">/</span><span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">9</span>)</div></code></pre>
<ul>
<li><strong>WE CAN CHAIN ALL THESE OPERATIONS TOGETHER WITH PIPES</strong></li>
<li><strong>We can calculate several summaries in a single <code>summarize()</code> command</strong></li>
<li>We can use the output of <code>mutate()</code> in the <code>summarize()</code> command</li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>We’re going to calculate the <strong>total (and standard deviation) of GDP per continent, per year</strong></li>
<li>Calculate total GDP first</li>
<li>Group by continent and year</li>
<li>Summarise mean and sd of GDP per capita, and total GDP</li>
</ul></li>
<li><strong>INSPECT THE OUTPUT</strong></li>
<li><code>Commit</code> the changes</li>
</ul>
<pre class="sourceCode r" id="cb112"><code class="sourceCode r"><div class="sourceLine" id="cb112-1" data-line-number="1"><span class="co"># Calculate total/sd of GDP by continent and year</span></div>
<div class="sourceLine" id="cb112-2" data-line-number="2">gdp_bycontinents_byyear &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb112-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp_billion=</span>gdpPercap<span class="op">*</span>pop<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">9</span>) <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb112-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(continent,year) <span class="op">%&gt;%</span></div>
<div class="sourceLine" id="cb112-5" data-line-number="5"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_gdpPercap=</span><span class="kw">mean</span>(gdpPercap),</div>
<div class="sourceLine" id="cb112-6" data-line-number="6">            <span class="dt">sd_gdpPercap=</span><span class="kw">sd</span>(gdpPercap),</div>
<div class="sourceLine" id="cb112-7" data-line-number="7">            <span class="dt">mean_gdp_billion=</span><span class="kw">mean</span>(gdp_billion),</div>
<div class="sourceLine" id="cb112-8" data-line-number="8">            <span class="dt">sd_gdp_billion=</span><span class="kw">sd</span>(gdp_billion))</div></code></pre>
<hr />
<h1 id="program-flow-control">09. Program Flow Control</h1>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>In this short section, you’ll learn how to <strong>perform actions depending on values of data</strong> in <code>R</code></li>
<li>You’ll also learn how to <strong>repeat operations, using <code>for()</code> loops</strong></li>
<li><strong>These are very important general concepts, that recur in many programming languages</strong></li>
<li>Much of the time, you can avoid using them in <code>R</code> data analyses, because <code>dplyr</code> exists, and because <code>R</code> is <strong>vectorised</strong></li>
</ul>
<hr />
<p><strong>SLIDE: <code>if()</code> … <code>else</code></strong></p>
<ul>
<li>We <strong>often want to run a piece of code, or take an action, dependent on whether some data has a particular value (is true or false, say</strong></li>
<li><p>When this is the case, we can use the general <code>if()</code> … <code>else</code> structure, which is common to most programming languages</p></li>
<li><strong>DEMO IN SCRIPT</strong></li>
<li><strong>CREATE NEW SCRIPT</strong> (<code>flow_control.R</code>)
<ul>
<li>Let’s say that we want to print a message if some value is greater than 10</li>
<li><strong>NOTE AUTOCOMPLETION/BRACKETS ETC.</strong></li>
<li><strong>THE CODE TO BE RUN GOES IN CURLY BRACES</strong></li>
<li><code>Source</code> the file</li>
<li><strong>NOTHING HAPPENS</strong> (<code>x &gt; 10</code> is <code>FALSE</code>)</li>
<li>The <code>if()</code> block executes <strong>if the value in the parentheses evaluates to <code>TRUE</code></strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb113"><code class="sourceCode r"><div class="sourceLine" id="cb113-1" data-line-number="1"><span class="co"># A data point</span></div>
<div class="sourceLine" id="cb113-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">8</span></div>
<div class="sourceLine" id="cb113-3" data-line-number="3"></div>
<div class="sourceLine" id="cb113-4" data-line-number="4"><span class="co"># Example if statement</span></div>
<div class="sourceLine" id="cb113-5" data-line-number="5"><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) {</div>
<div class="sourceLine" id="cb113-6" data-line-number="6">  <span class="kw">print</span>(<span class="st">&quot;x is greater than 10&quot;</span>)</div>
<div class="sourceLine" id="cb113-7" data-line-number="7">}</div></code></pre>
<ul>
<li><strong>MODIFY THE SCRIPT</strong>
<ul>
<li>Add the <code>else</code> block</li>
<li><code>Source</code> the code: <strong>we get a message</strong></li>
<li><strong>BUT IS THE MESSAGE TRUE?</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb114"><code class="sourceCode r"><div class="sourceLine" id="cb114-1" data-line-number="1"><span class="co"># Example if statement</span></div>
<div class="sourceLine" id="cb114-2" data-line-number="2"><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) {</div>
<div class="sourceLine" id="cb114-3" data-line-number="3">  <span class="kw">print</span>(<span class="st">&quot;x is greater than 10&quot;</span>)</div>
<div class="sourceLine" id="cb114-4" data-line-number="4">} <span class="cf">else</span> {</div>
<div class="sourceLine" id="cb114-5" data-line-number="5">  <span class="kw">print</span>(<span class="st">&quot;x is less than 10&quot;</span>)</div>
<div class="sourceLine" id="cb114-6" data-line-number="6">}</div></code></pre>
<ul>
<li><strong>SET <code>x &lt;- 10</code> AND TRY AGAIN</strong></li>
<li><strong>MODIFY THE SCRIPT WITH <code>else if()</code> STATEMENT</strong>
<ul>
<li><code>Source</code> the script: <strong>NO OUTPUT</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb115"><code class="sourceCode r"><div class="sourceLine" id="cb115-1" data-line-number="1"><span class="co"># A data point</span></div>
<div class="sourceLine" id="cb115-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">10</span></div>
<div class="sourceLine" id="cb115-3" data-line-number="3"></div>
<div class="sourceLine" id="cb115-4" data-line-number="4"><span class="co"># Example if statement</span></div>
<div class="sourceLine" id="cb115-5" data-line-number="5"><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) {</div>
<div class="sourceLine" id="cb115-6" data-line-number="6">  <span class="kw">print</span>(<span class="st">&quot;x is greater than 10&quot;</span>)</div>
<div class="sourceLine" id="cb115-7" data-line-number="7">} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) {</div>
<div class="sourceLine" id="cb115-8" data-line-number="8">  <span class="kw">print</span>(<span class="st">&quot;x is less than 10&quot;</span>)</div>
<div class="sourceLine" id="cb115-9" data-line-number="9">}</div></code></pre>
<ul>
<li><strong>MODIFY THE SCRIPT WITH A FINAL <code>else</code> STATEMENT</strong>
<ul>
<li><code>Source</code> the script: <strong>EQUALS</strong> output</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb116"><code class="sourceCode r"><div class="sourceLine" id="cb116-1" data-line-number="1"><span class="co"># A data point</span></div>
<div class="sourceLine" id="cb116-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">9</span></div>
<div class="sourceLine" id="cb116-3" data-line-number="3"></div>
<div class="sourceLine" id="cb116-4" data-line-number="4"><span class="co"># Example if statement</span></div>
<div class="sourceLine" id="cb116-5" data-line-number="5"><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) {</div>
<div class="sourceLine" id="cb116-6" data-line-number="6">  <span class="kw">print</span>(<span class="st">&quot;x is greater than 10&quot;</span>)</div>
<div class="sourceLine" id="cb116-7" data-line-number="7">} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) {</div>
<div class="sourceLine" id="cb116-8" data-line-number="8">  <span class="kw">print</span>(<span class="st">&quot;x is less than 10&quot;</span>)</div>
<div class="sourceLine" id="cb116-9" data-line-number="9">} <span class="cf">else</span> {</div>
<div class="sourceLine" id="cb116-10" data-line-number="10">  <span class="kw">print</span>(<span class="st">&quot;x is equal to 10&quot;</span>)</div>
<div class="sourceLine" id="cb116-11" data-line-number="11">}</div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 20</strong></p>
<pre class="sourceCode r" id="cb117"><code class="sourceCode r"><div class="sourceLine" id="cb117-1" data-line-number="1"><span class="co"># Are there any records for a year</span></div>
<div class="sourceLine" id="cb117-2" data-line-number="2">year &lt;-<span class="st"> </span><span class="dv">2002</span></div>
<div class="sourceLine" id="cb117-3" data-line-number="3"><span class="cf">if</span>(<span class="kw">any</span>(gapminder<span class="op">$</span>year <span class="op">==</span><span class="st"> </span>year)){</div>
<div class="sourceLine" id="cb117-4" data-line-number="4">   <span class="kw">print</span>(<span class="st">&quot;Record(s) for this year found.&quot;</span>)</div>
<div class="sourceLine" id="cb117-5" data-line-number="5">}</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: <code>for()</code> loops</strong></p>
<ul>
<li>If you want to iterate over a set of values, then <code>for()</code> loops can be used</li>
<li><code>for()</code> loops are <strong>a very common programming construct</strong></li>
<li><p>They express the idea: <strong>FOR EACH ITEM IN A GROUP, DO SOMETHING (WITH THAT ITEM)</strong></p></li>
<li><strong>DEMO IN SCRIPT</strong> (<code>flow_control.R</code>)
<ul>
<li>Say we have a <em>vector</em> <code>c(1,2,3)</code>, and we want to print each item</li>
<li>We can <strong>loop over all the items</strong> and print them</li>
</ul></li>
<li><strong>The loop structure is</strong>
<ul>
<li><code>for()</code>, where the argument names a variable (<code>i</code>) - the <em>iterator</em>, and a set of values: <strong><code>for(i in c('a', 'b', 'c'))</code></strong></li>
<li>A <strong>CODE BLOCK</strong> defined by curly braces (**note automated completion)</li>
<li>The <strong>contents of the code block are executed for each value of the iterator</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb118"><code class="sourceCode r"><div class="sourceLine" id="cb118-1" data-line-number="1"><span class="co"># Basic for loop</span></div>
<div class="sourceLine" id="cb118-2" data-line-number="2"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>)){</div>
<div class="sourceLine" id="cb118-3" data-line-number="3">  <span class="kw">print</span>(i)</div>
<div class="sourceLine" id="cb118-4" data-line-number="4">}</div></code></pre>
<ul>
<li><strong>Loops can (but shouldn’t always) be nested</strong></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>The outer loop is executed and, <strong>for each value in the outer loop, the inner loop is executed to completion</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb119"><code class="sourceCode r"><div class="sourceLine" id="cb119-1" data-line-number="1"><span class="co"># Nested loop example</span></div>
<div class="sourceLine" id="cb119-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</div>
<div class="sourceLine" id="cb119-3" data-line-number="3">  <span class="cf">for</span> (j <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>)) {</div>
<div class="sourceLine" id="cb119-4" data-line-number="4">    <span class="kw">print</span>(<span class="kw">paste</span>(i, j))</div>
<div class="sourceLine" id="cb119-5" data-line-number="5">  }</div>
<div class="sourceLine" id="cb119-6" data-line-number="6">}</div></code></pre>
<ul>
<li>The simplest way to capture output is to add a new item to a vector each iteration of the loop</li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li><strong>REMIND:</strong> using <code>c()</code> to append to a vector</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb120"><code class="sourceCode r"><div class="sourceLine" id="cb120-1" data-line-number="1"><span class="co"># Capture loop output</span></div>
<div class="sourceLine" id="cb120-2" data-line-number="2">output &lt;-<span class="st"> </span><span class="kw">c</span>()</div>
<div class="sourceLine" id="cb120-3" data-line-number="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</div>
<div class="sourceLine" id="cb120-4" data-line-number="4">  <span class="cf">for</span> (j <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>)) {</div>
<div class="sourceLine" id="cb120-5" data-line-number="5">    output &lt;-<span class="st"> </span><span class="kw">c</span>(output, <span class="kw">paste</span>(i, j))</div>
<div class="sourceLine" id="cb120-6" data-line-number="6">  }</div>
<div class="sourceLine" id="cb120-7" data-line-number="7">}</div>
<div class="sourceLine" id="cb120-8" data-line-number="8">(output)</div></code></pre>
<ul>
<li><strong>GROWING OUTPUT FROM LOOPS IS COMPUTATIONALLY VERY EXPENSIVE</strong>
<ul>
<li>Better to define the empty output container first (<strong>if you know the dimensions</strong>)</li>
</ul></li>
<li><strong>MODIFY IN SCRIPT</strong></li>
</ul>
<pre class="sourceCode r" id="cb121"><code class="sourceCode r"><div class="sourceLine" id="cb121-1" data-line-number="1"><span class="co"># Capture loop output</span></div>
<div class="sourceLine" id="cb121-2" data-line-number="2">output_matrix &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">5</span>)</div>
<div class="sourceLine" id="cb121-3" data-line-number="3">j_letters &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>)</div>
<div class="sourceLine" id="cb121-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</div>
<div class="sourceLine" id="cb121-5" data-line-number="5">  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</div>
<div class="sourceLine" id="cb121-6" data-line-number="6">    output_matrix[i, j] &lt;-<span class="kw">paste</span>(i, j_letters[j])</div>
<div class="sourceLine" id="cb121-7" data-line-number="7">  }</div>
<div class="sourceLine" id="cb121-8" data-line-number="8">}</div>
<div class="sourceLine" id="cb121-9" data-line-number="9">(output_matrix)</div></code></pre>
<hr />
<p><strong>SLIDE: <code>while()</code> loops</strong></p>
<ul>
<li>Sometimes you need to perform some action <strong>WHILE A CONDITION IS TRUE</strong>
<ul>
<li>This isn’t as common as a <code>for()</code> loop</li>
<li>It’s a <strong>general programming construct</strong></li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>We’ll <strong>generate random numbers until one falls below a threshold</strong></li>
<li><code>runif()</code> generates random numbers from a uniform distribution</li>
<li>We print random numbers until one is less than 0.1</li>
</ul></li>
<li><strong>run a couple of times to show the output is random</strong></li>
</ul>
<pre class="sourceCode r" id="cb122"><code class="sourceCode r"><div class="sourceLine" id="cb122-1" data-line-number="1"><span class="co"># Example while loop</span></div>
<div class="sourceLine" id="cb122-2" data-line-number="2">z &lt;-<span class="st"> </span><span class="dv">1</span></div>
<div class="sourceLine" id="cb122-3" data-line-number="3"><span class="cf">while</span>(z <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.1</span>){</div>
<div class="sourceLine" id="cb122-4" data-line-number="4">  z &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>)</div>
<div class="sourceLine" id="cb122-5" data-line-number="5">  <span class="kw">print</span>(z)</div>
<div class="sourceLine" id="cb122-6" data-line-number="6">}</div></code></pre>
<ul>
<li><strong>COMMIT THE SCRIPT</strong></li>
</ul>
<hr />
<p><strong>SLIDE: Challenge 21</strong></p>
<pre class="sourceCode r" id="cb123"><code class="sourceCode r"><div class="sourceLine" id="cb123-1" data-line-number="1"><span class="co"># Challenge solution</span></div>
<div class="sourceLine" id="cb123-2" data-line-number="2"><span class="cf">for</span> (l <span class="cf">in</span> letters) {</div>
<div class="sourceLine" id="cb123-3" data-line-number="3">  <span class="cf">if</span> (l <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;i&#39;</span>, <span class="st">&#39;o&#39;</span>, <span class="st">&#39;u&#39;</span>)) {</div>
<div class="sourceLine" id="cb123-4" data-line-number="4">    value &lt;-<span class="st"> </span><span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb123-5" data-line-number="5">  } <span class="cf">else</span> {</div>
<div class="sourceLine" id="cb123-6" data-line-number="6">    value &lt;-<span class="st"> </span><span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb123-7" data-line-number="7">  }</div>
<div class="sourceLine" id="cb123-8" data-line-number="8">  <span class="kw">print</span>(<span class="kw">paste</span>(l, value))</div>
<div class="sourceLine" id="cb123-9" data-line-number="9">}</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<p><strong>SLIDE: Vectorisation</strong></p>
<ul>
<li>Although <code>for()</code> and <code>while()</code> loops can be useful, they are <strong>rarely the most efficient way to work in <code>R</code></strong></li>
<li><strong>MOST FUNCTIONS IN <code>R</code> ARE VECTORISED</strong>
<ul>
<li><strong>When applied to a vector, they work on all elements in the vector</strong></li>
<li>So no need to use a loop.</li>
</ul></li>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li><strong>Operators</strong> are vectorised</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb124"><code class="sourceCode r"><div class="sourceLine" id="cb124-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></div>
<div class="sourceLine" id="cb124-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>x</div>
<div class="sourceLine" id="cb124-3" data-line-number="3">[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></div>
<div class="sourceLine" id="cb124-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb124-5" data-line-number="5">[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">8</span></div></code></pre>
<ul>
<li><strong>You can operate on vectors together</strong></li>
</ul>
<pre class="sourceCode r" id="cb125"><code class="sourceCode r"><div class="sourceLine" id="cb125-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="dv">6</span><span class="op">:</span><span class="dv">9</span></div>
<div class="sourceLine" id="cb125-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>y</div>
<div class="sourceLine" id="cb125-3" data-line-number="3">[<span class="dv">1</span>] <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span></div>
<div class="sourceLine" id="cb125-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</div>
<div class="sourceLine" id="cb125-5" data-line-number="5">[<span class="dv">1</span>]  <span class="dv">7</span>  <span class="dv">9</span> <span class="dv">11</span> <span class="dv">13</span></div>
<div class="sourceLine" id="cb125-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>x <span class="op">*</span><span class="st"> </span>y</div>
<div class="sourceLine" id="cb125-7" data-line-number="7">[<span class="dv">1</span>]  <span class="dv">6</span> <span class="dv">14</span> <span class="dv">24</span> <span class="dv">36</span></div></code></pre>
<ul>
<li><strong>Comparison operators are vectorised</strong></li>
</ul>
<pre class="sourceCode r" id="cb126"><code class="sourceCode r"><div class="sourceLine" id="cb126-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></div>
<div class="sourceLine" id="cb126-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">FALSE</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span>  <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb126-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span></div>
<div class="sourceLine" id="cb126-4" data-line-number="4">[<span class="dv">1</span>]  <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span></div>
<div class="sourceLine" id="cb126-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">any</span>(y <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>)</div>
<div class="sourceLine" id="cb126-6" data-line-number="6">[<span class="dv">1</span>] <span class="ot">TRUE</span></div>
<div class="sourceLine" id="cb126-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">all</span>(y <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>)</div>
<div class="sourceLine" id="cb126-8" data-line-number="8">[<span class="dv">1</span>] <span class="ot">FALSE</span></div></code></pre>
<ul>
<li><strong>Functions working on vectors</strong></li>
</ul>
<pre class="sourceCode r" id="cb127"><code class="sourceCode r"><div class="sourceLine" id="cb127-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">log</span>(x)</div>
<div class="sourceLine" id="cb127-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">0.0000000</span> <span class="fl">0.6931472</span> <span class="fl">1.0986123</span> <span class="fl">1.3862944</span></div>
<div class="sourceLine" id="cb127-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>x<span class="op">^</span><span class="dv">2</span></div>
<div class="sourceLine" id="cb127-4" data-line-number="4">[<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">4</span>  <span class="dv">9</span> <span class="dv">16</span></div>
<div class="sourceLine" id="cb127-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">sin</span>(x)</div>
<div class="sourceLine" id="cb127-6" data-line-number="6">[<span class="dv">1</span>]  <span class="fl">0.8414710</span>  <span class="fl">0.9092974</span>  <span class="fl">0.1411200</span> <span class="fl">-0.7568025</span></div></code></pre>
<ul>
<li><strong>MATRICES</strong>
<ul>
<li>The <code>*</code> multiplication operator is a vectorised/elementwise multiplication</li>
<li><strong>To perform the matrix multiplication you might expect, use the <code>%*%</code> operator</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb128"><code class="sourceCode r"><div class="sourceLine" id="cb128-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</div>
<div class="sourceLine" id="cb128-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>m</div>
<div class="sourceLine" id="cb128-3" data-line-number="3">     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</div>
<div class="sourceLine" id="cb128-4" data-line-number="4">[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span></div>
<div class="sourceLine" id="cb128-5" data-line-number="5">[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span></div>
<div class="sourceLine" id="cb128-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>m <span class="op">*</span><span class="st"> </span>m</div>
<div class="sourceLine" id="cb128-7" data-line-number="7">     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</div>
<div class="sourceLine" id="cb128-8" data-line-number="8">[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">9</span></div>
<div class="sourceLine" id="cb128-9" data-line-number="9">[<span class="dv">2</span>,]    <span class="dv">4</span>   <span class="dv">16</span></div>
<div class="sourceLine" id="cb128-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>m <span class="op">%*%</span><span class="st"> </span>m</div>
<div class="sourceLine" id="cb128-11" data-line-number="11">     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</div>
<div class="sourceLine" id="cb128-12" data-line-number="12">[<span class="dv">1</span>,]    <span class="dv">7</span>   <span class="dv">15</span></div>
<div class="sourceLine" id="cb128-13" data-line-number="13">[<span class="dv">2</span>,]   <span class="dv">10</span>   <span class="dv">22</span></div></code></pre>
<hr />
<p><strong>SLIDE: Challenge 21</strong></p>
<pre class="sourceCode r" id="cb129"><code class="sourceCode r"><div class="sourceLine" id="cb129-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>v =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10000</span></div>
<div class="sourceLine" id="cb129-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>v &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span>(v<span class="op">^</span><span class="dv">2</span>)</div>
<div class="sourceLine" id="cb129-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(v)</div>
<div class="sourceLine" id="cb129-4" data-line-number="4">[<span class="dv">1</span>] <span class="fl">1.644834</span></div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<h1 id="functions">10. Functions</h1>
<hr />
<ul>
<li><p><strong>SLIDE: Learning objectives</strong></p></li>
<li><strong>YOU’VE ALREADY BEEN USING FUNCTIONS (e.g. <code>log()</code>)</strong> and, I hope, have found them useful</li>
<li>Functions let us run a complex series of commands in one go
<ul>
<li><strong>You wouldn’t want to have to repeat the calculations for <code>log()</code> each time</strong></li>
<li>They keep the operation under a memorable or descriptive name, <strong>which makes the code readable and understandable</strong>, and they are invoked with that name</li>
<li>There are a <strong>defined set of inputs and outputs</strong> for a function, so <strong>WE KNOW WHAT BEHAVIOUR TO EXPECT</strong></li>
</ul></li>
</ul>
<hr />
<ul>
<li><p><strong>SLIDE: Why Functions?</strong></p></li>
<li>Functions let us <strong>run a complex series of logically- or functionally-RELATED commands in one go</strong></li>
<li>It helps when functions have <strong>descriptive and memorable names</strong>, as this makes code <strong>READABLE AND UNDERSTANDABLE</strong></li>
<li>We invoke functions with their name</li>
<li><p>We <strong>expect functions to have A DEFINED SET OF INPUTS AND OUTPUTS</strong> - aids clarity and understanding</p></li>
<li><p><strong>FUNCTIONS ARE THE BUILDING BLOCKS OF PROGRAMMING</strong></p></li>
<li>As a <strong>rule of thumb</strong> it is good to write small functions with one obvious, clearly-defined task.
<ul>
<li>As you will see <strong>we can chain smaller functions together to manage complexity</strong></li>
</ul></li>
</ul>
<hr />
<ul>
<li><p><strong>SLIDE: Defining a Function</strong></p></li>
<li>Functions have a <strong>STANDARD FORM</strong>
<ul>
<li>We <strong>declare a <code>&lt;function_name&gt;</code></strong></li>
<li>We use the <code>function</code> <em>function</em>/keyword to assign the function to <code>&lt;function_name&gt;</code></li>
<li>Inputs (<em>arguments</em>) to a function are defined in parentheses: <strong>These are defined as variables for use within the function AND DO NOT EXIST OUTSIDE THE FUNCTION</strong></li>
<li>The code block (<strong>curly braces</strong>) encloses the function code, the <em>function body</em>.</li>
<li><strong>NOTE THE INDENTATION</strong> - <em>Easier to read, but does not affect execution</em></li>
<li>The code <code>&lt;does_something&gt;</code></li>
<li>The <code>return()</code> function returns the value, when the function is called</li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li><strong>Create new script <code>functions.R</code></strong></li>
<li>Write and <code>Source</code></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb130"><code class="sourceCode r"><div class="sourceLine" id="cb130-1" data-line-number="1"><span class="co"># Example function</span></div>
<div class="sourceLine" id="cb130-2" data-line-number="2">my_sum &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</div>
<div class="sourceLine" id="cb130-3" data-line-number="3">  the_sum &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span>b</div>
<div class="sourceLine" id="cb130-4" data-line-number="4">  <span class="kw">return</span>(the_sum)</div>
<div class="sourceLine" id="cb130-5" data-line-number="5">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb131"><code class="sourceCode r"><div class="sourceLine" id="cb131-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">my_sum</span>(<span class="dv">3</span>, <span class="dv">7</span>)</div>
<div class="sourceLine" id="cb131-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">10</span></div>
<div class="sourceLine" id="cb131-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>a</div>
<div class="sourceLine" id="cb131-4" data-line-number="4">Error<span class="op">:</span><span class="st"> </span>object <span class="st">&#39;a&#39;</span> not found</div>
<div class="sourceLine" id="cb131-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>b</div>
<div class="sourceLine" id="cb131-6" data-line-number="6">Error<span class="op">:</span><span class="st"> </span>object <span class="st">&#39;b&#39;</span> not found</div></code></pre>
<ul>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>Let’s define another function: convert temperature from fahrenheit to Kelvin</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb132"><code class="sourceCode r"><div class="sourceLine" id="cb132-1" data-line-number="1"><span class="co"># Fahrenheit to Kelvin</span></div>
<div class="sourceLine" id="cb132-2" data-line-number="2">fahr_to_kelvin &lt;-<span class="st"> </span><span class="cf">function</span>(temp) {</div>
<div class="sourceLine" id="cb132-3" data-line-number="3">  kelvin &lt;-<span class="st"> </span>((temp <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">5</span> <span class="op">/</span><span class="st"> </span><span class="dv">9</span>)) <span class="op">+</span><span class="st"> </span><span class="fl">273.15</span></div>
<div class="sourceLine" id="cb132-4" data-line-number="4">  <span class="kw">return</span>(kelvin)</div>
<div class="sourceLine" id="cb132-5" data-line-number="5">}</div></code></pre>
<ul>
<li><strong>DEMO IN SCRIPT</strong></li>
</ul>
<pre class="sourceCode r" id="cb133"><code class="sourceCode r"><div class="sourceLine" id="cb133-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_kelvin</span>(<span class="dv">32</span>)</div>
<div class="sourceLine" id="cb133-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">273.15</span></div>
<div class="sourceLine" id="cb133-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_kelvin</span>(<span class="op">-</span><span class="dv">40</span>)</div>
<div class="sourceLine" id="cb133-4" data-line-number="4">[<span class="dv">1</span>] <span class="fl">233.15</span></div>
<div class="sourceLine" id="cb133-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_kelvin</span>(<span class="dv">212</span>)</div>
<div class="sourceLine" id="cb133-6" data-line-number="6">[<span class="dv">1</span>] <span class="fl">373.15</span></div>
<div class="sourceLine" id="cb133-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>temp</div>
<div class="sourceLine" id="cb133-8" data-line-number="8">Error<span class="op">:</span><span class="st"> </span>object <span class="st">&#39;temp&#39;</span> not found</div></code></pre>
<ul>
<li><strong>LET’S MAKE ANOTHER FUNCTION CONVERTING KELVIN TO CELSIUS</strong></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li><code>Source</code> the script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb134"><code class="sourceCode r"><div class="sourceLine" id="cb134-1" data-line-number="1"><span class="co"># Kelvin to Celsius</span></div>
<div class="sourceLine" id="cb134-2" data-line-number="2">kelvin_to_celsius &lt;-<span class="st"> </span><span class="cf">function</span>(temp) {</div>
<div class="sourceLine" id="cb134-3" data-line-number="3">  celsius &lt;-<span class="st"> </span>temp <span class="op">-</span><span class="st"> </span><span class="fl">273.15</span></div>
<div class="sourceLine" id="cb134-4" data-line-number="4">  <span class="kw">return</span>(celsius)</div>
<div class="sourceLine" id="cb134-5" data-line-number="5">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb135"><code class="sourceCode r"><div class="sourceLine" id="cb135-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="fl">273.15</span>)</div>
<div class="sourceLine" id="cb135-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">0</span></div>
<div class="sourceLine" id="cb135-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="fl">233.15</span>)</div>
<div class="sourceLine" id="cb135-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">-40</span></div>
<div class="sourceLine" id="cb135-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="fl">373.15</span>)</div>
<div class="sourceLine" id="cb135-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">100</span></div></code></pre>
<ul>
<li><strong>WE COULD DEFINE A NEW FUNCTION TO CONVERT FAHRENHEIT TO CELSIUS</strong>
<ul>
<li><strong>But it’s easier to combine the two functions we’ve already written</strong></li>
</ul></li>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb136"><code class="sourceCode r"><div class="sourceLine" id="cb136-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_kelvin</span>(<span class="dv">212</span>)</div>
<div class="sourceLine" id="cb136-2" data-line-number="2">[<span class="dv">1</span>] <span class="fl">373.15</span></div>
<div class="sourceLine" id="cb136-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="kw">fahr_to_kelvin</span>(<span class="dv">212</span>))</div>
<div class="sourceLine" id="cb136-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">100</span></div></code></pre>
<ul>
<li><strong>DEMO IN SCRIPT</strong></li>
</ul>
<pre class="sourceCode r" id="cb137"><code class="sourceCode r"><div class="sourceLine" id="cb137-1" data-line-number="1"><span class="co"># Fahrenheit to Celsius</span></div>
<div class="sourceLine" id="cb137-2" data-line-number="2">fahr_to_celsius &lt;-<span class="st"> </span><span class="cf">function</span>(temp) {</div>
<div class="sourceLine" id="cb137-3" data-line-number="3">  celsius &lt;-<span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="kw">fahr_to_kelvin</span>(temp))</div>
<div class="sourceLine" id="cb137-4" data-line-number="4">  <span class="kw">return</span>(celsius)</div>
<div class="sourceLine" id="cb137-5" data-line-number="5">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li><strong>NOTE: AUTOMATICALLY TAKES ADVANTAGE OF <code>R</code>’s VECTORISATION</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb138"><code class="sourceCode r"><div class="sourceLine" id="cb138-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_celsius</span>(<span class="dv">212</span>)</div>
<div class="sourceLine" id="cb138-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">100</span></div>
<div class="sourceLine" id="cb138-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_celsius</span>(<span class="dv">32</span>)</div>
<div class="sourceLine" id="cb138-4" data-line-number="4">[<span class="dv">1</span>] <span class="dv">0</span></div>
<div class="sourceLine" id="cb138-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_celsius</span>(<span class="op">-</span><span class="dv">40</span>)</div>
<div class="sourceLine" id="cb138-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">-40</span></div>
<div class="sourceLine" id="cb138-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="kw">fahr_to_celsius</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">40</span>, <span class="dv">32</span>, <span class="dv">212</span>))</div>
<div class="sourceLine" id="cb138-8" data-line-number="8">[<span class="dv">1</span>] <span class="dv">-40</span>   <span class="dv">0</span> <span class="dv">100</span></div></code></pre>
<hr />
<p><strong>SLIDE: Documentation</strong></p>
<ul>
<li>It’s important to have well-named functions (this is itself a form of documentation)</li>
<li><p>But it’s <strong>not a detailed explanation</strong></p></li>
<li>You’ve found <code>R</code>’s help useful, but it doesn’t exist for your functions until you write it</li>
<li><p><strong>YOUR FUTURE SELF WILL THANK YOU FOR DOING IT!</strong></p></li>
<li><strong>SOME GOOD PRINCIPLES TO FOLLOW WHEN WRITING DOCUMENTATION ARE:</strong>
<ul>
<li>Say what the code does (and why) - <em>more important than <strong>how</strong> </em></li>
<li>Define your inputs and outputs</li>
<li>Provide an example</li>
</ul></li>
<li><p><strong>DEMO IN CONSOLE</strong></p></li>
</ul>
<pre class="sourceCode r" id="cb139"><code class="sourceCode r"><div class="sourceLine" id="cb139-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>?fahr_to_celsius</div>
<div class="sourceLine" id="cb139-2" data-line-number="2">No documentation <span class="cf">for</span> ‘fahr_to_celsius’ <span class="cf">in</span> specified packages and libraries<span class="op">:</span></div>
<div class="sourceLine" id="cb139-3" data-line-number="3">you could try ‘??fahr_to_celsius’</div>
<div class="sourceLine" id="cb139-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>??fahr_to_celsius</div></code></pre>
<ul>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li>We add documentation as comment strings in the function</li>
<li><strong>SOURCE</strong> the script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb140"><code class="sourceCode r"><div class="sourceLine" id="cb140-1" data-line-number="1"><span class="co"># Fahrenheit to Celsius</span></div>
<div class="sourceLine" id="cb140-2" data-line-number="2">fahr_to_celsius &lt;-<span class="st"> </span><span class="cf">function</span>(temp) {</div>
<div class="sourceLine" id="cb140-3" data-line-number="3">  <span class="co"># Convert input temperature from fahrenheit to celsius scale</span></div>
<div class="sourceLine" id="cb140-4" data-line-number="4">  <span class="co">#</span></div>
<div class="sourceLine" id="cb140-5" data-line-number="5">  <span class="co"># temp        - numeric </span></div>
<div class="sourceLine" id="cb140-6" data-line-number="6">  <span class="co">#</span></div>
<div class="sourceLine" id="cb140-7" data-line-number="7">  <span class="co"># Example:</span></div>
<div class="sourceLine" id="cb140-8" data-line-number="8">  <span class="co"># &gt; fahr_to_celsius(c(-40, 32, 212))</span></div>
<div class="sourceLine" id="cb140-9" data-line-number="9">  <span class="co"># [1] -40   0 100</span></div>
<div class="sourceLine" id="cb140-10" data-line-number="10">  celsius &lt;-<span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="kw">fahr_to_kelvin</span>(temp))</div>
<div class="sourceLine" id="cb140-11" data-line-number="11">  <span class="kw">return</span>(celsius)</div>
<div class="sourceLine" id="cb140-12" data-line-number="12">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>We read the documentation by providing the function name <strong>only</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb141"><code class="sourceCode r"><div class="sourceLine" id="cb141-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>fahr_to_celsius</div>
<div class="sourceLine" id="cb141-2" data-line-number="2"><span class="cf">function</span>(temp) {</div>
<div class="sourceLine" id="cb141-3" data-line-number="3">  <span class="co"># Convert input temperature from fahrenheit to celsius scale</span></div>
<div class="sourceLine" id="cb141-4" data-line-number="4">  <span class="co">#</span></div>
<div class="sourceLine" id="cb141-5" data-line-number="5">  <span class="co"># temp        - numeric </span></div>
<div class="sourceLine" id="cb141-6" data-line-number="6">  <span class="co">#</span></div>
<div class="sourceLine" id="cb141-7" data-line-number="7">  <span class="co"># Example:</span></div>
<div class="sourceLine" id="cb141-8" data-line-number="8">  <span class="co"># &gt; fahr_to_celsius(c(-40, 32, 212))</span></div>
<div class="sourceLine" id="cb141-9" data-line-number="9">  <span class="co"># [1] -40   0 100</span></div>
<div class="sourceLine" id="cb141-10" data-line-number="10">  celsius &lt;-<span class="st"> </span><span class="kw">kelvin_to_celsius</span>(<span class="kw">fahr_to_kelvin</span>(temp))</div>
<div class="sourceLine" id="cb141-11" data-line-number="11">  <span class="kw">return</span>(celsius)</div>
<div class="sourceLine" id="cb141-12" data-line-number="12">}</div></code></pre>
<hr />
<ul>
<li><p><strong>SLIDE: Function Arguments</strong></p></li>
<li><strong>DEMO IN SCRIPT</strong> (<code>functions.R</code>)
<ul>
<li><code>Source</code> script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb142"><code class="sourceCode r"><div class="sourceLine" id="cb142-1" data-line-number="1"><span class="co"># Calculate total GDP in gapminder data</span></div>
<div class="sourceLine" id="cb142-2" data-line-number="2">calcGDP &lt;-<span class="st"> </span><span class="cf">function</span>(data) {</div>
<div class="sourceLine" id="cb142-3" data-line-number="3">  <span class="co"># Returns the gapminder data with additional column of total GDP</span></div>
<div class="sourceLine" id="cb142-4" data-line-number="4">  <span class="co">#</span></div>
<div class="sourceLine" id="cb142-5" data-line-number="5">  <span class="co"># data            - gapminder dataframe</span></div>
<div class="sourceLine" id="cb142-6" data-line-number="6">  <span class="co">#</span></div>
<div class="sourceLine" id="cb142-7" data-line-number="7">  <span class="co"># Example:</span></div>
<div class="sourceLine" id="cb142-8" data-line-number="8">  <span class="co"># gapminderGDP &lt;- calcGDP(gapminder)</span></div>
<div class="sourceLine" id="cb142-9" data-line-number="9">  gdp &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">gdp=</span>pop <span class="op">*</span><span class="st"> </span>gdpPercap)</div>
<div class="sourceLine" id="cb142-10" data-line-number="10">  <span class="kw">return</span>(gdp)</div>
<div class="sourceLine" id="cb142-11" data-line-number="11">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb143"><code class="sourceCode r"><div class="sourceLine" id="cb143-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">calcGDP</span>(gapminder)</div>
<div class="sourceLine" id="cb143-2" data-line-number="2">Error <span class="cf">in</span> gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> pop <span class="op">*</span><span class="st"> </span>gdpPercap) <span class="op">:</span><span class="st"> </span></div>
<div class="sourceLine" id="cb143-3" data-line-number="3"><span class="st">  </span>could not find <span class="cf">function</span> <span class="st">&quot;%&gt;%&quot;</span></div></code></pre>
<ul>
<li><strong>WHAT HAPPENED?</strong>
<ul>
<li><strong>The code in the <code>functions.R</code> file doesn’t know about <code>dplyr</code></strong></li>
<li>We need to <strong>import the module in our script</strong></li>
<li>Use the <code>require()</code> function</li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong> (<code>functions.R</code>)
<ul>
<li>Place <code>require()</code> calls at the top of your script</li>
<li><code>Source</code> script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb144"><code class="sourceCode r"><div class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">require</span>(dplyr)</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong>
<ul>
<li>The new column has been added</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb145"><code class="sourceCode r"><div class="sourceLine" id="cb145-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder))</div>
<div class="sourceLine" id="cb145-2" data-line-number="2">      country year      pop continent lifeExp gdpPercap         gdp</div>
<div class="sourceLine" id="cb145-3" data-line-number="3"><span class="dv">1</span> Afghanistan <span class="dv">1952</span>  <span class="dv">8425333</span>      Asia  <span class="fl">28.801</span>  <span class="fl">779.4453</span>  <span class="dv">6567086330</span></div>
<div class="sourceLine" id="cb145-4" data-line-number="4"><span class="dv">2</span> Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>  <span class="fl">820.8530</span>  <span class="dv">7585448670</span></div>
<div class="sourceLine" id="cb145-5" data-line-number="5"><span class="dv">3</span> Afghanistan <span class="dv">1962</span> <span class="dv">10267083</span>      Asia  <span class="fl">31.997</span>  <span class="fl">853.1007</span>  <span class="dv">8758855797</span></div>
<div class="sourceLine" id="cb145-6" data-line-number="6"><span class="dv">4</span> Afghanistan <span class="dv">1967</span> <span class="dv">11537966</span>      Asia  <span class="fl">34.020</span>  <span class="fl">836.1971</span>  <span class="dv">9648014150</span></div>
<div class="sourceLine" id="cb145-7" data-line-number="7"><span class="dv">5</span> Afghanistan <span class="dv">1972</span> <span class="dv">13079460</span>      Asia  <span class="fl">36.088</span>  <span class="fl">739.9811</span>  <span class="dv">9678553274</span></div>
<div class="sourceLine" id="cb145-8" data-line-number="8"><span class="dv">6</span> Afghanistan <span class="dv">1977</span> <span class="dv">14880372</span>      Asia  <span class="fl">38.438</span>  <span class="fl">786.1134</span> <span class="dv">11697659231</span></div></code></pre>
<ul>
<li><strong>So, that’s <em>all</em> the <code>gapminder</code> data - but what if we want to get the data by year?</strong></li>
<li><strong>DEMO IN SCRIPT</strong> (<code>functions.R</code>)
<ul>
<li><code>Source</code> script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb146"><code class="sourceCode r"><div class="sourceLine" id="cb146-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">source</span>(<span class="st">&#39;~/Desktop/swc-r-lesson/scripts/functions.R&#39;</span>)</div>
<div class="sourceLine" id="cb146-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="dv">2002</span>))</div>
<div class="sourceLine" id="cb146-3" data-line-number="3">      country year      pop continent lifeExp  gdpPercap          gdp</div>
<div class="sourceLine" id="cb146-4" data-line-number="4"><span class="dv">1</span> Afghanistan <span class="dv">2002</span> <span class="dv">25268405</span>      Asia  <span class="fl">42.129</span>   <span class="fl">726.7341</span>  <span class="dv">18363410424</span></div>
<div class="sourceLine" id="cb146-5" data-line-number="5"><span class="dv">2</span>     Albania <span class="dv">2002</span>  <span class="dv">3508512</span>    Europe  <span class="fl">75.651</span>  <span class="fl">4604.2117</span>  <span class="dv">16153932130</span></div>
<div class="sourceLine" id="cb146-6" data-line-number="6"><span class="dv">3</span>     Algeria <span class="dv">2002</span> <span class="dv">31287142</span>    Africa  <span class="fl">70.994</span>  <span class="fl">5288.0404</span> <span class="dv">165447670333</span></div>
<div class="sourceLine" id="cb146-7" data-line-number="7"><span class="dv">4</span>      Angola <span class="dv">2002</span> <span class="dv">10866106</span>    Africa  <span class="fl">41.003</span>  <span class="fl">2773.2873</span>  <span class="dv">30134833901</span></div>
<div class="sourceLine" id="cb146-8" data-line-number="8"><span class="dv">5</span>   Argentina <span class="dv">2002</span> <span class="dv">38331121</span>  Americas  <span class="fl">74.340</span>  <span class="fl">8797.6407</span> <span class="dv">337223430800</span></div>
<div class="sourceLine" id="cb146-9" data-line-number="9"><span class="dv">6</span>   Australia <span class="dv">2002</span> <span class="dv">19546792</span>   Oceania  <span class="fl">80.370</span> <span class="fl">30687.7547</span> <span class="dv">599847158654</span></div>
<div class="sourceLine" id="cb146-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="kw">c</span>(<span class="dv">1997</span>, <span class="dv">2002</span>)))</div>
<div class="sourceLine" id="cb146-11" data-line-number="11">      country year      pop continent lifeExp gdpPercap          gdp</div>
<div class="sourceLine" id="cb146-12" data-line-number="12"><span class="dv">1</span> Afghanistan <span class="dv">1997</span> <span class="dv">22227415</span>      Asia  <span class="fl">41.763</span>  <span class="fl">635.3414</span>  <span class="dv">14121995875</span></div>
<div class="sourceLine" id="cb146-13" data-line-number="13"><span class="dv">2</span> Afghanistan <span class="dv">2002</span> <span class="dv">25268405</span>      Asia  <span class="fl">42.129</span>  <span class="fl">726.7341</span>  <span class="dv">18363410424</span></div>
<div class="sourceLine" id="cb146-14" data-line-number="14"><span class="dv">3</span>     Albania <span class="dv">1997</span>  <span class="dv">3428038</span>    Europe  <span class="fl">72.950</span> <span class="fl">3193.0546</span>  <span class="dv">10945912519</span></div>
<div class="sourceLine" id="cb146-15" data-line-number="15"><span class="dv">4</span>     Albania <span class="dv">2002</span>  <span class="dv">3508512</span>    Europe  <span class="fl">75.651</span> <span class="fl">4604.2117</span>  <span class="dv">16153932130</span></div>
<div class="sourceLine" id="cb146-16" data-line-number="16"><span class="dv">5</span>     Algeria <span class="dv">1997</span> <span class="dv">29072015</span>    Africa  <span class="fl">69.152</span> <span class="fl">4797.2951</span> <span class="dv">139467033682</span></div>
<div class="sourceLine" id="cb146-17" data-line-number="17"><span class="dv">6</span>     Algeria <span class="dv">2002</span> <span class="dv">31287142</span>    Africa  <span class="fl">70.994</span> <span class="fl">5288.0404</span> <span class="dv">165447670333</span></div>
<div class="sourceLine" id="cb146-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder))</div>
<div class="sourceLine" id="cb146-19" data-line-number="19"> Show Traceback</div>
<div class="sourceLine" id="cb146-20" data-line-number="20"> </div>
<div class="sourceLine" id="cb146-21" data-line-number="21"> Rerun with Debug</div>
<div class="sourceLine" id="cb146-22" data-line-number="22"> Error <span class="cf">in</span> <span class="kw">filter_impl</span>(.data, quo) <span class="op">:</span><span class="st"> </span></div>
<div class="sourceLine" id="cb146-23" data-line-number="23"><span class="st">  </span>Evaluation error<span class="op">:</span><span class="st"> </span>argument <span class="st">&quot;year_in&quot;</span> is missing, with no default. </div></code></pre>
<ul>
<li><strong>Now we have an issue - NO YEAR PROVIDED MEANS NO OUTPUT</strong>
<ul>
<li>We need to handle this</li>
<li>1 - <strong>PROVIDE A DEFAULT VALUE</strong> (<code>NULL</code>)</li>
<li>2 - <strong>TEST FOR VALUE AND TAKE ALTERNATIVE ACTIONS</strong></li>
</ul></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li><code>Source</code> script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb147"><code class="sourceCode r"><div class="sourceLine" id="cb147-1" data-line-number="1"><span class="co"># Calculate total GDP in gapminder data</span></div>
<div class="sourceLine" id="cb147-2" data-line-number="2">calcGDP &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">year_in=</span><span class="ot">NULL</span>) {</div>
<div class="sourceLine" id="cb147-3" data-line-number="3">  <span class="co"># Returns the gapminder data with additional column of total GDP</span></div>
<div class="sourceLine" id="cb147-4" data-line-number="4">  <span class="co">#</span></div>
<div class="sourceLine" id="cb147-5" data-line-number="5">  <span class="co"># data            - gapminder dataframe</span></div>
<div class="sourceLine" id="cb147-6" data-line-number="6">  <span class="co"># year_in         - year(s) to report data</span></div>
<div class="sourceLine" id="cb147-7" data-line-number="7">  <span class="co">#</span></div>
<div class="sourceLine" id="cb147-8" data-line-number="8">  <span class="co"># Example:</span></div>
<div class="sourceLine" id="cb147-9" data-line-number="9">  <span class="co"># gapminderGDP &lt;- calcGDP(gapminder)</span></div>
<div class="sourceLine" id="cb147-10" data-line-number="10">  gdp &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">gdp=</span>(pop <span class="op">*</span><span class="st"> </span>gdpPercap))</div>
<div class="sourceLine" id="cb147-11" data-line-number="11">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(year_in)) {</div>
<div class="sourceLine" id="cb147-12" data-line-number="12">    gdp &lt;-<span class="st"> </span>gdp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>year_in)</div>
<div class="sourceLine" id="cb147-13" data-line-number="13">  }</div>
<div class="sourceLine" id="cb147-14" data-line-number="14">  <span class="kw">return</span>(gdp)</div>
<div class="sourceLine" id="cb147-15" data-line-number="15">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb148"><code class="sourceCode r"><div class="sourceLine" id="cb148-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">source</span>(<span class="st">&#39;~/Desktop/swc-r-lesson/scripts/functions.R&#39;</span>)</div>
<div class="sourceLine" id="cb148-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder))</div>
<div class="sourceLine" id="cb148-3" data-line-number="3">[<span class="dv">1</span>] country   year      pop       continent lifeExp   gdpPercap gdp      </div>
<div class="sourceLine" id="cb148-4" data-line-number="4"><span class="op">&lt;</span><span class="dv">0</span> rows<span class="op">&gt;</span><span class="st"> </span>(or <span class="dv">0</span><span class="op">-</span>length row.names)</div>
<div class="sourceLine" id="cb148-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder))</div>
<div class="sourceLine" id="cb148-6" data-line-number="6">      country year      pop continent lifeExp gdpPercap         gdp</div>
<div class="sourceLine" id="cb148-7" data-line-number="7"><span class="dv">1</span> Afghanistan <span class="dv">1952</span>  <span class="dv">8425333</span>      Asia  <span class="fl">28.801</span>  <span class="fl">779.4453</span>  <span class="dv">6567086330</span></div>
<div class="sourceLine" id="cb148-8" data-line-number="8"><span class="dv">2</span> Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>  <span class="fl">820.8530</span>  <span class="dv">7585448670</span></div>
<div class="sourceLine" id="cb148-9" data-line-number="9"><span class="dv">3</span> Afghanistan <span class="dv">1962</span> <span class="dv">10267083</span>      Asia  <span class="fl">31.997</span>  <span class="fl">853.1007</span>  <span class="dv">8758855797</span></div>
<div class="sourceLine" id="cb148-10" data-line-number="10"><span class="dv">4</span> Afghanistan <span class="dv">1967</span> <span class="dv">11537966</span>      Asia  <span class="fl">34.020</span>  <span class="fl">836.1971</span>  <span class="dv">9648014150</span></div>
<div class="sourceLine" id="cb148-11" data-line-number="11"><span class="dv">5</span> Afghanistan <span class="dv">1972</span> <span class="dv">13079460</span>      Asia  <span class="fl">36.088</span>  <span class="fl">739.9811</span>  <span class="dv">9678553274</span></div>
<div class="sourceLine" id="cb148-12" data-line-number="12"><span class="dv">6</span> Afghanistan <span class="dv">1977</span> <span class="dv">14880372</span>      Asia  <span class="fl">38.438</span>  <span class="fl">786.1134</span> <span class="dv">11697659231</span></div>
<div class="sourceLine" id="cb148-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="dt">year_in=</span><span class="dv">2002</span>))</div>
<div class="sourceLine" id="cb148-14" data-line-number="14">      country year      pop continent lifeExp  gdpPercap          gdp</div>
<div class="sourceLine" id="cb148-15" data-line-number="15"><span class="dv">1</span> Afghanistan <span class="dv">2002</span> <span class="dv">25268405</span>      Asia  <span class="fl">42.129</span>   <span class="fl">726.7341</span>  <span class="dv">18363410424</span></div>
<div class="sourceLine" id="cb148-16" data-line-number="16"><span class="dv">2</span>     Albania <span class="dv">2002</span>  <span class="dv">3508512</span>    Europe  <span class="fl">75.651</span>  <span class="fl">4604.2117</span>  <span class="dv">16153932130</span></div>
<div class="sourceLine" id="cb148-17" data-line-number="17"><span class="dv">3</span>     Algeria <span class="dv">2002</span> <span class="dv">31287142</span>    Africa  <span class="fl">70.994</span>  <span class="fl">5288.0404</span> <span class="dv">165447670333</span></div>
<div class="sourceLine" id="cb148-18" data-line-number="18"><span class="dv">4</span>      Angola <span class="dv">2002</span> <span class="dv">10866106</span>    Africa  <span class="fl">41.003</span>  <span class="fl">2773.2873</span>  <span class="dv">30134833901</span></div>
<div class="sourceLine" id="cb148-19" data-line-number="19"><span class="dv">5</span>   Argentina <span class="dv">2002</span> <span class="dv">38331121</span>  Americas  <span class="fl">74.340</span>  <span class="fl">8797.6407</span> <span class="dv">337223430800</span></div>
<div class="sourceLine" id="cb148-20" data-line-number="20"><span class="dv">6</span>   Australia <span class="dv">2002</span> <span class="dv">19546792</span>   Oceania  <span class="fl">80.370</span> <span class="fl">30687.7547</span> <span class="dv">599847158654</span></div></code></pre>
<ul>
<li><strong>Now let’s do the same for country</strong></li>
<li><strong>DEMO IN SCRIPT</strong>
<ul>
<li><code>Source</code> script</li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb149"><code class="sourceCode r"><div class="sourceLine" id="cb149-1" data-line-number="1"><span class="co"># Calculate total GDP in gapminder data</span></div>
<div class="sourceLine" id="cb149-2" data-line-number="2">calcGDP &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">year_in=</span><span class="ot">NULL</span>, <span class="dt">country_in=</span><span class="ot">NULL</span>) {</div>
<div class="sourceLine" id="cb149-3" data-line-number="3">  <span class="co"># Returns the gapminder data with additional column of total GDP</span></div>
<div class="sourceLine" id="cb149-4" data-line-number="4">  <span class="co">#</span></div>
<div class="sourceLine" id="cb149-5" data-line-number="5">  <span class="co"># data            - gapminder dataframe</span></div>
<div class="sourceLine" id="cb149-6" data-line-number="6">  <span class="co"># year_in         - year(s) to report data</span></div>
<div class="sourceLine" id="cb149-7" data-line-number="7">  <span class="co">#</span></div>
<div class="sourceLine" id="cb149-8" data-line-number="8">  <span class="co"># Example:</span></div>
<div class="sourceLine" id="cb149-9" data-line-number="9">  <span class="co"># gapminderGDP &lt;- calcGDP(gapminder)</span></div>
<div class="sourceLine" id="cb149-10" data-line-number="10">  gdp &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">gdp=</span>(pop <span class="op">*</span><span class="st"> </span>gdpPercap))</div>
<div class="sourceLine" id="cb149-11" data-line-number="11">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(year_in)) {</div>
<div class="sourceLine" id="cb149-12" data-line-number="12">    gdp &lt;-<span class="st"> </span>gdp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>year_in)</div>
<div class="sourceLine" id="cb149-13" data-line-number="13">  }</div>
<div class="sourceLine" id="cb149-14" data-line-number="14">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(country_in)) {</div>
<div class="sourceLine" id="cb149-15" data-line-number="15">    gdp &lt;-<span class="st"> </span>gdp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>country_in)</div>
<div class="sourceLine" id="cb149-16" data-line-number="16">  }</div>
<div class="sourceLine" id="cb149-17" data-line-number="17">  <span class="kw">return</span>(gdp)</div>
<div class="sourceLine" id="cb149-18" data-line-number="18">}</div></code></pre>
<ul>
<li><strong>DEMO IN CONSOLE</strong></li>
</ul>
<pre class="sourceCode r" id="cb150"><code class="sourceCode r"><div class="sourceLine" id="cb150-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">source</span>(<span class="st">&#39;~/Desktop/swc-r-lesson/scripts/functions.R&#39;</span>)</div>
<div class="sourceLine" id="cb150-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder))</div>
<div class="sourceLine" id="cb150-3" data-line-number="3">      country year      pop continent lifeExp gdpPercap         gdp</div>
<div class="sourceLine" id="cb150-4" data-line-number="4"><span class="dv">1</span> Afghanistan <span class="dv">1952</span>  <span class="dv">8425333</span>      Asia  <span class="fl">28.801</span>  <span class="fl">779.4453</span>  <span class="dv">6567086330</span></div>
<div class="sourceLine" id="cb150-5" data-line-number="5"><span class="dv">2</span> Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>  <span class="fl">820.8530</span>  <span class="dv">7585448670</span></div>
<div class="sourceLine" id="cb150-6" data-line-number="6"><span class="dv">3</span> Afghanistan <span class="dv">1962</span> <span class="dv">10267083</span>      Asia  <span class="fl">31.997</span>  <span class="fl">853.1007</span>  <span class="dv">8758855797</span></div>
<div class="sourceLine" id="cb150-7" data-line-number="7"><span class="dv">4</span> Afghanistan <span class="dv">1967</span> <span class="dv">11537966</span>      Asia  <span class="fl">34.020</span>  <span class="fl">836.1971</span>  <span class="dv">9648014150</span></div>
<div class="sourceLine" id="cb150-8" data-line-number="8"><span class="dv">5</span> Afghanistan <span class="dv">1972</span> <span class="dv">13079460</span>      Asia  <span class="fl">36.088</span>  <span class="fl">739.9811</span>  <span class="dv">9678553274</span></div>
<div class="sourceLine" id="cb150-9" data-line-number="9"><span class="dv">6</span> Afghanistan <span class="dv">1977</span> <span class="dv">14880372</span>      Asia  <span class="fl">38.438</span>  <span class="fl">786.1134</span> <span class="dv">11697659231</span></div>
<div class="sourceLine" id="cb150-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="dv">1957</span>))</div>
<div class="sourceLine" id="cb150-11" data-line-number="11">      country year      pop continent lifeExp gdpPercap          gdp</div>
<div class="sourceLine" id="cb150-12" data-line-number="12"><span class="dv">1</span> Afghanistan <span class="dv">1957</span>  <span class="dv">9240934</span>      Asia  <span class="fl">30.332</span>   <span class="fl">820.853</span>   <span class="dv">7585448670</span></div>
<div class="sourceLine" id="cb150-13" data-line-number="13"><span class="dv">2</span>     Albania <span class="dv">1957</span>  <span class="dv">1476505</span>    Europe  <span class="fl">59.280</span>  <span class="fl">1942.284</span>   <span class="dv">2867792398</span></div>
<div class="sourceLine" id="cb150-14" data-line-number="14"><span class="dv">3</span>     Algeria <span class="dv">1957</span> <span class="dv">10270856</span>    Africa  <span class="fl">45.685</span>  <span class="fl">3013.976</span>  <span class="dv">30956113720</span></div>
<div class="sourceLine" id="cb150-15" data-line-number="15"><span class="dv">4</span>      Angola <span class="dv">1957</span>  <span class="dv">4561361</span>    Africa  <span class="fl">31.999</span>  <span class="fl">3827.940</span>  <span class="dv">17460618347</span></div>
<div class="sourceLine" id="cb150-16" data-line-number="16"><span class="dv">5</span>   Argentina <span class="dv">1957</span> <span class="dv">19610538</span>  Americas  <span class="fl">64.399</span>  <span class="fl">6856.856</span> <span class="dv">134466639306</span></div>
<div class="sourceLine" id="cb150-17" data-line-number="17"><span class="dv">6</span>   Australia <span class="dv">1957</span>  <span class="dv">9712569</span>   Oceania  <span class="fl">70.330</span> <span class="fl">10949.650</span> <span class="dv">106349227169</span></div>
<div class="sourceLine" id="cb150-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="dv">1957</span>, <span class="st">&quot;Egypt&quot;</span>))</div>
<div class="sourceLine" id="cb150-19" data-line-number="19">  country year      pop continent lifeExp gdpPercap         gdp</div>
<div class="sourceLine" id="cb150-20" data-line-number="20"><span class="dv">1</span>   Egypt <span class="dv">1957</span> <span class="dv">25009741</span>    Africa  <span class="fl">44.444</span>  <span class="fl">1458.915</span> <span class="dv">36487093094</span></div>
<div class="sourceLine" id="cb150-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="st">&quot;Egypt&quot;</span>))</div>
<div class="sourceLine" id="cb150-22" data-line-number="22">[<span class="dv">1</span>] country   year      pop       continent lifeExp   gdpPercap gdp      </div>
<div class="sourceLine" id="cb150-23" data-line-number="23"><span class="op">&lt;</span><span class="dv">0</span> rows<span class="op">&gt;</span><span class="st"> </span>(or <span class="dv">0</span><span class="op">-</span>length row.names)</div>
<div class="sourceLine" id="cb150-24" data-line-number="24"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">calcGDP</span>(gapminder, <span class="dt">country_in=</span><span class="st">&quot;Egypt&quot;</span>))</div>
<div class="sourceLine" id="cb150-25" data-line-number="25">  country year      pop continent lifeExp gdpPercap          gdp</div>
<div class="sourceLine" id="cb150-26" data-line-number="26"><span class="dv">1</span>   Egypt <span class="dv">1952</span> <span class="dv">22223309</span>    Africa  <span class="fl">41.893</span>  <span class="fl">1418.822</span>  <span class="dv">31530929611</span></div>
<div class="sourceLine" id="cb150-27" data-line-number="27"><span class="dv">2</span>   Egypt <span class="dv">1957</span> <span class="dv">25009741</span>    Africa  <span class="fl">44.444</span>  <span class="fl">1458.915</span>  <span class="dv">36487093094</span></div>
<div class="sourceLine" id="cb150-28" data-line-number="28"><span class="dv">3</span>   Egypt <span class="dv">1962</span> <span class="dv">28173309</span>    Africa  <span class="fl">46.992</span>  <span class="fl">1693.336</span>  <span class="dv">47706874227</span></div>
<div class="sourceLine" id="cb150-29" data-line-number="29"><span class="dv">4</span>   Egypt <span class="dv">1967</span> <span class="dv">31681188</span>    Africa  <span class="fl">49.293</span>  <span class="fl">1814.881</span>  <span class="dv">57497577541</span></div>
<div class="sourceLine" id="cb150-30" data-line-number="30"><span class="dv">5</span>   Egypt <span class="dv">1972</span> <span class="dv">34807417</span>    Africa  <span class="fl">51.137</span>  <span class="fl">2024.008</span>  <span class="dv">70450495584</span></div>
<div class="sourceLine" id="cb150-31" data-line-number="31"><span class="dv">6</span>   Egypt <span class="dv">1977</span> <span class="dv">38783863</span>    Africa  <span class="fl">53.319</span>  <span class="fl">2785.494</span> <span class="dv">108032201472</span></div></code></pre>
<hr />
<ul>
<li><strong>SLIDE: Challenge 23</strong></li>
</ul>
<pre class="sourceCode r" id="cb151"><code class="sourceCode r"><div class="sourceLine" id="cb151-1" data-line-number="1"><span class="co"># Plot grid of country life expectancy</span></div>
<div class="sourceLine" id="cb151-2" data-line-number="2">plotLifeExp &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">letter=</span>letters, <span class="dt">wrap=</span><span class="ot">FALSE</span>) {</div>
<div class="sourceLine" id="cb151-3" data-line-number="3">  <span class="co"># Return ggplot2 chart of life expectancy against year</span></div>
<div class="sourceLine" id="cb151-4" data-line-number="4">  <span class="co">#</span></div>
<div class="sourceLine" id="cb151-5" data-line-number="5">  <span class="co"># data          - gapminder dataframe</span></div>
<div class="sourceLine" id="cb151-6" data-line-number="6">  <span class="co"># letter        - start letters for countries</span></div>
<div class="sourceLine" id="cb151-7" data-line-number="7">  <span class="co"># wrap          - logical: wrap graphs by country</span></div>
<div class="sourceLine" id="cb151-8" data-line-number="8">  <span class="co">#</span></div>
<div class="sourceLine" id="cb151-9" data-line-number="9">  <span class="co"># Example:</span></div>
<div class="sourceLine" id="cb151-10" data-line-number="10">  <span class="co"># &gt; plotLifeExp(gapminder, c(&#39;A&#39;, &#39;Z&#39;), wrap=TRUE)</span></div>
<div class="sourceLine" id="cb151-11" data-line-number="11">  starts.with &lt;-<span class="st"> </span><span class="kw">substr</span>(data<span class="op">$</span>country, <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">stop =</span> <span class="dv">1</span>)</div>
<div class="sourceLine" id="cb151-12" data-line-number="12">  az.countries &lt;-<span class="st"> </span>data[starts.with <span class="op">%in%</span><span class="st"> </span>letter, ]</div>
<div class="sourceLine" id="cb151-13" data-line-number="13">  p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(az.countries, <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>lifeExp, <span class="dt">colour=</span>country))</div>
<div class="sourceLine" id="cb151-14" data-line-number="14">  p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</div>
<div class="sourceLine" id="cb151-15" data-line-number="15">  <span class="cf">if</span> (wrap) {</div>
<div class="sourceLine" id="cb151-16" data-line-number="16">    p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>country)</div>
<div class="sourceLine" id="cb151-17" data-line-number="17">  }</div>
<div class="sourceLine" id="cb151-18" data-line-number="18">  <span class="kw">return</span>(p)</div>
<div class="sourceLine" id="cb151-19" data-line-number="19">}</div></code></pre>
<figure>
<img src="images/red_green_sticky.png" alt="images/red_green_sticky.png" /><figcaption>images/red_green_sticky.png</figcaption>
</figure>
<hr />
<h1 id="dynamic-reports">11. Dynamic Reports</h1>
<hr />
<p><strong>SLIDE: Learning Objectives</strong></p>
<ul>
<li>In this final section, we’ll be learning how to <strong>create reproducible, attractive, dynamic reports</strong></li>
<li>To do so, we’ll learn some <strong>markdown syntax</strong>, and how to put <strong>working R code</strong> into a document</li>
<li>We’ll also look at <strong>generating the report in a number of file formats</strong>, for sharing.</li>
</ul>
<hr />
<p><strong>SLIDE: Literate Programming</strong></p>
<ul>
<li>What we’re about to do is an example of <strong>Literate Programming</strong>, a concept introduced by Donald Knuth</li>
<li>The idea of Literate Programming is that
<ul>
<li><strong>The program or analysis is explained in natural language</strong></li>
<li><strong>The code needed to run the program/analysis is embedded in the document</strong></li>
<li><strong>The whole document is executable</strong></li>
</ul></li>
<li>We can produce these documents in <code>RStudio</code></li>
</ul>
<hr />
<p><strong>SLIDE: Create an <code>R Markdown</code> file</strong></p>
<ul>
<li>In <code>R</code>, literate programming is **implemented in <code>R Markdown</code> files</li>
<li>To create one: <strong><code>File</code> <span class="math inline">→</span> <code>New File</code> <span class="math inline">→</span> <code>R Markdown</code></strong>
<ul>
<li>There is a dialog box - <strong>enter a title</strong> (<code>Literate Programming</code>)</li>
<li>Save the file (<code>Ctrl-S</code>) - <strong>create new subdirectory (<code>markdown</code>)</strong> - <code>literate_programming.Rmd</code></li>
</ul></li>
<li>The file <strong>gets the extension <code>.Rmd</code></strong>
<ul>
<li>The <strong>file is autopopulated with example text</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Components of an <code>R Markdown</code> file</strong></p>
<ul>
<li>The <strong>HEADER REGION IS FENCED BY <code>---</code></strong>
<ul>
<li><strong>Metadata</strong> (author, title, date)</li>
<li>Requested <strong>output format</strong></li>
</ul></li>
</ul>
<pre class="sourceCode r" id="cb152"><code class="sourceCode r"><div class="sourceLine" id="cb152-1" data-line-number="1"><span class="op">---</span></div>
<div class="sourceLine" id="cb152-2" data-line-number="2">title<span class="op">:</span><span class="st"> &quot;Literate Programming&quot;</span></div>
<div class="sourceLine" id="cb152-3" data-line-number="3">author<span class="op">:</span><span class="st"> &quot;Leighton Pritchard&quot;</span></div>
<div class="sourceLine" id="cb152-4" data-line-number="4">date<span class="op">:</span><span class="st"> &quot;04/12/2017&quot;</span></div>
<div class="sourceLine" id="cb152-5" data-line-number="5">output<span class="op">:</span><span class="st"> </span>html_document</div>
<div class="sourceLine" id="cb152-6" data-line-number="6"><span class="op">---</span></div></code></pre>
<ul>
<li>Natural language is written as plain text, <strong>with some extra characters to define formatting</strong>
<ul>
<li><strong>NOTE THE HASHES <code>#</code>, ASTERISKS <code>*</code> AND ANGLED BRACKETS <code>&lt;&gt;</code></strong></li>
</ul></li>
<li><p><code>R</code> code runs in the document, and is <strong>fenced by backticks</strong></p></li>
<li><strong>CLICK ON <code>KNIT</code></strong>
<ul>
<li>A new (pretty) document is produced in a new window</li>
</ul></li>
<li><strong>CROSS REFERENCE MARKDOWN TO DOCUMENT</strong>
<ul>
<li><strong>Title, Author, Date</strong></li>
<li><strong>Header</strong></li>
<li><strong>Link</strong></li>
<li><strong>Bold</strong></li>
<li><strong><code>R</code> code and output</strong></li>
<li><strong>Plots</strong></li>
</ul></li>
<li><strong>CLICK ON <code>KNIT TO PDF</code></strong>
<ul>
<li>A new <code>.pdf</code> document opens in a new window</li>
</ul></li>
<li><strong>CROSS REFERENCE MARKDOWN TO DOCUMENT</strong>
<ul>
<li><strong>NOTE:</strong> The formatting isn’t identical</li>
</ul></li>
<li><strong>CLICK ON <code>KNIT TO WORD</code></strong>
<ul>
<li>A new <code>Word</code> document opens up</li>
</ul></li>
<li><strong>CROSS REFERENCE MARKDOWN TO DOCUMENT</strong>
<ul>
<li><strong>NOTE:</strong> The formatting isn’t identical</li>
</ul></li>
<li><strong>NOTE THE LOCATION OF THE OUTPUT FILES - ALL IN THE SOURCE DIRECTORY</strong>
<ul>
<li><strong>CLOSE THE OUTPUT</strong></li>
</ul></li>
</ul>
<hr />
<p><strong>SLIDE: Creating a Report</strong></p>
<ul>
<li><p>We’ll <strong>create a report on the <code>gapminder</code> data</strong></p></li>
<li><strong>DELETE THE EXISTING TEXT/CODE CHUNKS</strong> (<code>literate_programming.Rmd</code>)
<ul>
<li><strong>Change the title</strong> (<code>Life Expectancies</code>)</li>
<li><strong>Define the input data location in the <code>setup</code> section</strong>
<ul>
<li>Code in the <code>setup</code> section is run, but not shown (<strong>knit to demo</strong>)</li>
<li><code>include = FALSE</code></li>
</ul></li>
<li><strong>Write introduction and KNIT</strong>
<ul>
<li>Header notation with the hash <code>#</code></li>
<li>Inline <code>R</code> to name the data used</li>
<li><strong>We can define the location of the data in one place, and reuse the variable/have it propagate when we update the data</strong></li>
<li>Import the data in <code>setup</code></li>
</ul></li>
<li><strong>Write next section</strong> (<code>Life expectancy in countries</code>)
<ul>
<li><code>Source</code> the <code>functions.R</code> file to get our solution to Challenge 23 (<code>plotLifeExp</code>)</li>
<li>Use the imported function</li>
<li><code>{r echo=FALSE}</code> shows output but not the code</li>
</ul></li>
<li><strong>Change the letters</strong>
<ul>
<li>Change the letters to something else</li>
<li>Re-run the document</li>
</ul></li>
<li><strong>Add Numbered Table of Contents (where possible)</strong>
<ul>
<li>Make the required changes in the header</li>
</ul></li>
</ul></li>
</ul>
<h2 id="r">```R</h2>
<p>title: “Life Expectancies” author: “Leighton Pritchard” date: “04/12/2017” output: pdf_document: toc: true number_sections: true html_document: toc: true toc_float: true number_sections: true word_document: toc: true —</p>
<p>```{r setup, include=FALSE} knitr::opts_chunk$set(echo = TRUE)</p>
<h1 id="path-to-gapminder-data">Path to gapminder data</h1>
<p>datapath &lt;- “../data/gapminder-FiveYearData.csv”</p>
<h1 id="letters-to-report-on">Letters to report on</h1>
<p>az &lt;- c(‘G’, ‘Y’, ‘R’)</p>
<h1 id="load-gapminder-data">Load gapminder data</h1>
<p>gapminder &lt;- read.csv(datapath, sep=“,”, header=TRUE)</p>
<h1 id="source-functions-from-earlier-lesson">Source functions from earlier lesson</h1>
<p>source(“../scripts/functions.R”) ```</p>
<h1 id="introduction">Introduction</h1>
<p>We will present the life expectancies over time in a set of countries, using the gapminder data in the file <code>r datapath</code>.</p>
<p>We will specifically focus on countries beginning with the letters: <code>r az</code>.</p>
<h1 id="life-expectancy-in-r-az-countries">Life expectancy in <code>r az</code> countries</h1>
<p>In countries starting with these letters, the life expectancy is as plotted below.</p>
<p>We use the code from our earlier challenge solution</p>
<p><code>{r plot_function} plotLifeExp</code></p>
<p><code>{r echo=FALSE} plotLifeExp(gapminder, az, wrap=TRUE)</code></p>
<p>```</p>
